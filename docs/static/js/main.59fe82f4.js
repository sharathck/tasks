/*! For license information please see main.59fe82f4.js.LICENSE.txt */
(()=>{var e={7174:(e,t,r)=>{"use strict";const n=r(5819);class i extends Error{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let s;super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(s||(s=this.arrayBuffer()),s)}),this.headers={};for(const[i,o]of e.headers.entries())this.headers[i.toLowerCase()]=o}}e.exports=n(((e,t,r,n,s)=>async function(o,a){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o=s+(o||"");let u=new URL(o);if(n||(n={}),u.username&&(n.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw new Error("Unknown protocol, ".concat(u.protocol));if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"===typeof a);else{if("object"!==typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),n["Content-Type"]="application/json"}c=new Headers({...n||{},...c});const l=await fetch(u,{method:t,headers:c,body:a});if(l.statusCode=l.status,!e.has(l.status))throw new i(l);return"json"===r?l.json():"buffer"===r?l.arrayBuffer():"string"===r?l.text():l}))},5819:e=>{"use strict";const t=new Set(["json","buffer","string"]);e.exports=e=>function(){const r=new Set;let n,i,s,o="";for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return c.forEach((e=>{if("string"===typeof e)if(e.toUpperCase()===e){if(n){const t="Can't set method to ".concat(e,", already set to ").concat(n,".");throw new Error(t)}n=e}else if(e.startsWith("http:")||e.startsWith("https:"))o=e;else{if(!t.has(e))throw new Error("Unknown encoding, ".concat(e));i=e}else if("number"===typeof e)r.add(e);else{if("object"!==typeof e)throw new Error("Unknown type: ".concat(typeof e));if(Array.isArray(e)||e instanceof Set)e.forEach((e=>r.add(e)));else{if(s)throw new Error("Cannot set headers twice.");s=e}}})),n||(n="GET"),0===r.size&&r.add(200),e(r,n,i,s,o)}},2450:function(e,t,r){var n,i,s;i=[],void 0===(s="function"===typeof(n=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,r){var a=o.URL||o.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?s(c):i(c.href)?n(e,t,r):s(c,c.target="_blank")):(c.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(c.href)}),4e4),setTimeout((function(){s(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,o){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),r);else if(i(e))n(e,r,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){s(a)}))}}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var s="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&c||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var h=o.URL||o.webkitURL,d=h.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});o.saveAs=c.saveAs=c,e.exports=c})?n.apply(t,i):n)||(e.exports=s)},8685:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});new(r(9859).AgentConfig),i(r(8040),t)},1922:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;const o=s(r(2250)),a=r(9099),c=r(260);t.ConsoleLoggingListener=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.LogLevel.None;this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){c.Contracts.throwIfNullOrUndefined(o.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.logCallback&&this.logCallback(t),this.privLogPath&&o.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case a.LogLevel.Debug:console.debug(t);break;case a.LogLevel.Info:console.info(t);break;case a.LogLevel.Warning:console.warn(t);break;case a.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){const t=["".concat(e.eventTime),"".concat(e.name)],r=e;for(const n in r)if(n&&e.hasOwnProperty(n)&&"eventTime"!==n&&"eventType"!==n&&"eventId"!==n&&"name"!==n&&"constructor"!==n){const e=r[n];let i="<NULL>";void 0!==e&&null!==e&&(i="number"===typeof e||"string"===typeof e?e.toString():JSON.stringify(e)),t.push("".concat(n,": ").concat(i))}return t.join(" | ")}}},2277:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1922),t),i(r(2371),t),i(r(4218),t),i(r(9868),t),i(r(3912),t),i(r(2965),t),i(r(4955),t),i(r(4057),t),i(r(7882),t),i(r(2588),t),i(r(3593),t)},9868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;const n=r(9859),i=r(2307),s=r(4175);t.FileAudioSource=class{constructor(e,t,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||i.createNoDashGuid(),this.privEvents=new i.EventSource,this.privSource=e,"undefined"!==typeof window&&"undefined"!==typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new i.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(e){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e));const t=await this.upload(e);return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:async()=>{t.readEnded(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),await this.turnOff()},id:()=>e,read:()=>t.read()})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new i.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:n.type.File})))}readHeader(){const e=this.privSource.slice(0,4296),t=new i.Deferred,r=e=>{const r=new DataView(e),n=e=>String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3));if("RIFF"!==n(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==n(8)||"fmt "!==n(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const i=r.getInt32(16,!0),o=r.getUint16(22,!0),a=r.getUint32(24,!0),c=r.getUint16(34,!0);let u=36+Math.max(i-16,0);for(;"data"!==n(u);u+=2)if(u>4288)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=u+8,t.resolve(s.AudioStreamFormat.getWaveFormatPCM(a,c,o))};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;r(t)},t.readAsArrayBuffer(e)}else{const t=e;r(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}async upload(e){const t=t=>{const r="Error occurred while processing '".concat(this.privFilename,"'. ").concat(t);throw this.onEvent(new i.AudioStreamNodeErrorEvent(this.privId,e,r)),new Error(r)};try{await this.turnOn();const r=await this.privAudioFormatPromise,n=new i.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e);this.privStreams[e]=n;const s=this.privSource.slice(this.privHeaderEnd),o=e=>{n.isClosed||(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n.close())};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&s instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(s)}else{const e=s;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return n}catch(r){t(r)}}onEvent(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)}}},2371:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const n=r(9859),i=r(2307),s=r(4175);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class o{constructor(e,t,r,n){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=o.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||i.createNoDashGuid(),this.privEvents=new i.EventSource,this.privMediaStream=n||null,this.privIsClosing=!1}get format(){return Promise.resolve(o.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new i.Deferred;try{this.createAudioContext()}catch(r){if(r instanceof Error){const e=r;this.privInitializeDeferral.reject(e.name+": "+e.message)}else this.privInitializeDeferral.reject(r);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,r,n)=>{e.mediaDevices.getUserMedia(t).then(r).catch(n)}),t){const e=()=>{this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new i.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new i.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t="Error occurred during microphone initialization: ".concat(e);this.privInitializeDeferral.reject(t),this.onEvent(new i.AudioSourceErrorEvent(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(e))})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new i.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(t.readEnded(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>t.read()})))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)))}async turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new i.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:o.AUDIOFORMAT.bitsPerSample,channelcount:o.AUDIOFORMAT.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:o.AUDIOFORMAT.samplesPerSec,type:n.type.Microphones})))}setProperty(e,r){if(e!==t.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(r)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const r=new i.Deferred;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const r of e)if(r.deviceId===t){this.privMicrophoneLabel=r.label;break}r.resolve(this.privMicrophoneLabel)}),(()=>r.resolve(this.privMicrophoneLabel))),r.promise}async listen(e){await this.turnOn();const t=new i.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(r){throw this.onEvent(new i.AudioStreamNodeErrorEvent(this.privId,e,r)),r}return t}onEvent(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(o.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&await this.privContext.suspend()}}t.MicAudioSource=o,o.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat()},3912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;const n=r(2307);t.PcmRecorder=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,r){const i=new n.RiffPcmEncoder(e.sampleRate,16e3),s=e.createMediaStreamSource(t),o=()=>{const n=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;let n=e.sampleRate;for(;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}})();n.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const e=i.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},s.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:s,stream:t}},a=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!a){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const n=new AudioWorkletNode(e,"speech-processor");n.port.onmessage=e=>{const t=e.data;if(r&&!r.isClosed){const e=i.encode(t);e&&r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},s.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:s,stream:t}})).catch((()=>{o()}))}else try{o()}catch(c){throw new Error("Unable to start audio worklet node for PCMRecorder: ".concat(c))}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}},7882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;const n=r(8040);class i{constructor(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}static fromParameters(e){return new i(e.getProperty(n.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(n.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}t.ProxyInfo=i},4057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;t.ReplayableAudioNode=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!==t%2&&t++;let r=0;for(;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const e=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new r(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const r=t.byteOffset/this.privBytesPerSecond*1e7,n=r+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=n)return t.chunk.timeReceived}return 0}};class r{constructor(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}},3593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;class r{static get requestOptions(){return r.privDefaultRequestOptions}static get configParams(){return r.privDefaultParams}static get restErrors(){return r.privRestErrors}}t.RestConfigBase=r,r.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},r.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},r.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},2588:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const i=n(r(7174)),s=r(2307);var o;!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(o=t.RestRequestType||(t.RestRequestType={}));t.RestMessageAdapter=class{constructor(e){if(!e)throw new s.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let r="";try{const n=t.trim().split(/[\r\n]+/),i={};n.forEach((e=>{const t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");i[r]=n})),r=i[e.toLowerCase()]}catch(n){}return r}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=new s.Deferred,c=e===o.File?"POST":e,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:r.statusText?r.statusText:r.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===o.Post&&n&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(n=>{i.default(t,c,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(r)?"":"?".concat(this.queryParams(r)),n).then((async t=>{if(e===o.Delete||204===t.statusCode)a.resolve(u(t));else try{const e=await t.json();a.resolve(u(t,e))}catch{a.resolve(u(t))}})).catch((e=>{a.reject(e)}))})(n),a.promise}queryParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}},2965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;const n=r(2307),i=r(4955);t.WebsocketConnection=class{constructor(e,t,r,s,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0;if(this.privIsDisposed=!1,!e)throw new n.ArgumentNullError("uri");if(!s)throw new n.ArgumentNullError("messageFormatter");this.privMessageFormatter=s;let u="",l=0;if(t)for(const n in t)if(n){u+=0===l&&-1===e.indexOf("?")?"?":"&";u+=encodeURIComponent(n);let r=t[n];r&&(r=encodeURIComponent(r),u+="=".concat(r)),l++}if(r)for(const n in r)if(n){u+=0===l&&-1===e.indexOf("?")?"?":"&";const t=encodeURIComponent(r[n]);u+="".concat(n,"=").concat(t),l++}this.privUri=e+u,this.privId=c||n.createNoDashGuid(),this.privConnectionMessageAdapter=new i.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},4955:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;const a=s(r(8632)),c=s(r(3678)),u=o(r(6308)),l=o(r(9645)),h=o(r(4573)),d=r(8643),p=r(2307);class f{constructor(e,t,r,n,i,s){if(!e)throw new p.ArgumentNullError("uri");if(!r)throw new p.ArgumentNullError("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new p.EventSource,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=p.ConnectionState.None,this.privUri=e,this.privHeaders=i,this.privEnableCompression=s,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===p.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in ".concat(this.privConnectionState," state"));if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new p.Deferred,this.privCertificateValidatedDeferral=new p.Deferred,this.privConnectionState=p.ConnectionState.Connecting;try{if("undefined"===typeof WebSocket||f.forceNpmWebSocket){var e,t;const r={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),r.agent=this.getAgent();let n=new URL(this.privUri).protocol;"wss:"===(null===(e=n)||void 0===e?void 0:e.toLocaleLowerCase())?n="https:":"ws:"===(null===(t=n)||void 0===t?void 0:t.toLocaleLowerCase())&&(n="http:"),r.agent.protocol=n,this.privWebsocketClient=new h.default(this.privUri,r)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new p.Queue,this.privDisconnectDeferral=new p.Deferred,this.privSendMessageQueue=new p.Queue,this.processSendQueue().catch((e=>{p.Events.instance.onEvent(new p.BackgroundEvent(e))}))}catch(r){return this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(500,r)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new p.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=p.ConnectionState.Connected,this.onEvent(new p.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new p.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===p.ConnectionState.Connecting?(this.privConnectionState=p.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new p.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=p.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new p.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{p.Events.instance.onEvent(new p.BackgroundEvent(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===p.ConnectionState.Connected){const r=new p.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const n=new p.RawWebsocketMessage(p.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(n).then((e=>{this.onEvent(new p.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),r.resolve(e)}),(e=>{r.reject("Invalid binary message format. Error: ".concat(e))}))}else{const n=new p.RawWebsocketMessage(p.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(n).then((e=>{this.onEvent(new p.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),r.resolve(e)}),(e=>{r.reject("Invalid text message format. Error: ".concat(e))}))}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==p.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in ".concat(p.ConnectionState[this.privConnectionState]," state"));const t=new p.Deferred,r=new p.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then((n=>{r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})}),(e=>{r.reject("Error formatting the message. ".concat(e))})),t.promise}read(){return this.privConnectionState!==p.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in ".concat(this.privConnectionState," state")):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==p.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new p.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(t){return Promise.reject("websocket send error: ".concat(t))}}async onClose(e,t){const r="Connection closed. ".concat(e,": ").concat(t);this.privConnectionState=p.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose((()=>{}),r),await this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(r)}),r)}async processSendQueue(){for(;;){const t=this.privSendMessageQueue.dequeue(),r=await t;if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(e){r.sendStatusDeferral.reject(e)}}}onEvent(e){this.privConnectionEvents.onEvent(e),p.Events.instance.onEvent(e)}getAgent(){const e=new u.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer("".concat(e.UserName,":").concat(void 0===e.Password?"":e.Password)).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new l.default(t)}createConnection(e,t){let r;if(t={...t,requestOCSP:!0,servername:t.host},this.proxyInfo){const n=f.GetProxyAgent(this.proxyInfo);r=new Promise(((r,i)=>{n.callback(e,t,((e,t)=>{e?i(e):r(t)}))}))}else r=t.secureEndpoint?Promise.resolve(c.connect(t)):Promise.resolve(a.connect(t));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}t.WebsocketMessageAdapter=f,f.forceNpmWebSocket=!1},3355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;t.AddedLmIntent=class{constructor(e,t){this.modelImpl=e,this.intentName=t}}},5619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;t.AgentConfig=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},9290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesisAdapter=void 0;const n=r(8040),i=r(9859);class s extends i.SynthesisAdapterBase{constructor(e,t,r,n,i){super(e,t,r,void 0),this.privAvatarSynthesizer=n,this.privSynthesizer=n,this.privAvatarConfig=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var e,t,r,i,s,o,a,c;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(e=this.privAvatarConfig.videoFormat)||void 0===e?void 0:e.bitrate,codec:null===(t=this.privAvatarConfig.videoFormat)||void 0===t?void 0:t.codec,crop:{bottomRight:{x:null===(r=this.privAvatarConfig.videoFormat)||void 0===r||null===(r=r.cropRange)||void 0===r||null===(r=r.bottomRight)||void 0===r?void 0:r.x,y:null===(i=this.privAvatarConfig.videoFormat)||void 0===i||null===(i=i.cropRange)||void 0===i||null===(i=i.bottomRight)||void 0===i?void 0:i.y},topLeft:{x:null===(s=this.privAvatarConfig.videoFormat)||void 0===s||null===(s=s.cropRange)||void 0===s||null===(s=s.topLeft)||void 0===s?void 0:s.x,y:null===(o=this.privAvatarConfig.videoFormat)||void 0===o||null===(o=o.cropRange)||void 0===o||null===(o=o.topLeft)||void 0===o?void 0:o.y}},resolution:{height:null===(a=this.privAvatarConfig.videoFormat)||void 0===a?void 0:a.height,width:null===(c=this.privAvatarConfig.videoFormat)||void 0===c?void 0:c.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){const r=new n.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,r)}catch(t){}}}}t.AvatarSynthesisAdapter=s},2070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;const n=r(2307),i=r(8643),s=r(7339);t.CognitiveSubscriptionKeyAuthentication=class{constructor(e){if(!e)throw new n.ArgumentNullError("subscriptionKey");this.privAuthInfo=new s.AuthInfo(i.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}},7487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;const n=r(2307),i=r(7339),s=r(8643);class o{constructor(e,t){if(!e)throw new n.ArgumentNullError("fetchCallback");if(!t)throw new n.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then((e=>new i.AuthInfo(s.HeaderNames.Authorization,void 0===e?void 0:o.privTokenPrefix+e)))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then((e=>new i.AuthInfo(s.HeaderNames.Authorization,void 0===e?void 0:o.privTokenPrefix+e)))}}t.CognitiveTokenAuthentication=o,o.privTokenPrefix="Bearer "},2679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;const n=r(9859),i=r(8040),s=r(7237);t.ConnectionFactoryBase=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,r){new Map([[i.PropertyId.Speech_SegmentationSilenceTimeoutMs,s.QueryParameterNames.SegmentationSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_EnableAudioLogging,s.QueryParameterNames.EnableAudioLogging],[i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,s.QueryParameterNames.EndSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,s.QueryParameterNames.InitialSilenceTimeoutMs],[i.PropertyId.SpeechServiceResponse_PostProcessingOption,s.QueryParameterNames.Postprocessing],[i.PropertyId.SpeechServiceResponse_ProfanityOption,s.QueryParameterNames.Profanity],[i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,s.QueryParameterNames.EnableWordLevelTimestamps],[i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,s.QueryParameterNames.StableIntermediateThreshold]]).forEach(((n,i)=>{this.setUrlParameter(i,n,e,t,r)}));const o=JSON.parse(e.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach((e=>{t[e]=o[e]}))}setUrlParameter(e,t,r,n,i){const s=r.parameters.getProperty(e,void 0);!s||i&&-1!==i.search(t)||(n[t]=s.toLocaleLowerCase())}}},8588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceRecognizer=void 0;const n=r(8040),i=r(9859);class s extends i.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.handleSpeechPhraseMessage=async e=>this.handleSpeechPhrase(e),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,r){}handleRecognizingCallback(e,t,r){}async processSpeechMessages(e){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(e.textBody),t=!0}return t}cancelRecognition(e,t,r,n,i){}async handleSpeechPhrase(e){const t=i.SimpleSpeechPhrase.fromJSON(e),r=i.EnumTranslation.implTranslateRecognitionResult(t.RecognitionStatus);let s;const o=new n.PropertyCollection;o.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e);const a=t.Offset+this.privRequestSession.currentTurnAudioOffset;let c=a;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+t.Offset+t.Duration),n.ResultReason.Canceled===r){const e=i.EnumTranslation.implTranslateCancelResult(t.RecognitionStatus),r=i.EnumTranslation.implTranslateCancelErrorCode(t.RecognitionStatus);await this.cancelRecognitionLocal(e,r,i.EnumTranslation.implTranslateErrorDetails(r))}else if(!this.privRequestSession.isSpeechEnded||r!==n.ResultReason.NoMatch||t.RecognitionStatus===i.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===n.OutputFormat[n.OutputFormat.Simple])s=new n.SpeechRecognitionResult(this.privRequestSession.requestId,r,t.DisplayText,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,o);else{const t=i.DetailedSpeechPhrase.fromJSON(e),a=t.Offset+this.privRequestSession.currentTurnAudioOffset,u=t.getJsonWithCorrectedOffsets(a);s=new n.SpeechRecognitionResult(this.privRequestSession.requestId,r,t.Text,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,u,o),c=s.offset}this.handleRecognizedCallback(s,c,this.privRequestSession.sessionId)}}handleSpeechHypothesis(e){const t=i.SpeechHypothesis.fromJSON(e),r=t.Offset+this.privRequestSession.currentTurnAudioOffset,s=new n.PropertyCollection;s.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e);const o=new n.SpeechRecognitionResult(this.privRequestSession.requestId,n.ResultReason.RecognizingSpeech,t.Text,t.Duration,r,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,s);this.privRequestSession.onHypothesis(r),this.handleRecognizingCallback(o,t.Duration,this.privRequestSession.sessionId)}}t.ConversationServiceRecognizer=s},4554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriberConnectionFactory=void 0;const n=r(2277),i=r(8040),s=r(9859),o=r(2679),a=r(9859),c=r(8643),u=r(7237);class l extends o.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,t,r){let s=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const l=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),h=o.ConnectionFactoryBase.getHostSuffix(l),d=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+l+".stt.speech"+h),p={},f=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?s&&-1!==s.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(p[u.QueryParameterNames.CustomSpeechDeploymentId]=f):v&&(s&&-1!==s.search(u.QueryParameterNames.Language)||(p[u.QueryParameterNames.Language]=v)),void 0!==e.autoDetectSourceLanguages&&(p[u.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,p,s),s||(s="".concat(d).concat(this.universalUri));const m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[c.HeaderNames.ConnectionId]=r;const g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new n.WebsocketConnection(s,p,m,new a.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),g,r),w=y.uri;return e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,w),y}setV2UrlParams(e,t,r){new Map([[i.PropertyId.Speech_SegmentationSilenceTimeoutMs,u.QueryParameterNames.SegmentationSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_EnableAudioLogging,u.QueryParameterNames.EnableAudioLogging],[i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,u.QueryParameterNames.EndSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,u.QueryParameterNames.InitialSilenceTimeoutMs],[i.PropertyId.SpeechServiceResponse_PostProcessingOption,u.QueryParameterNames.Postprocessing],[i.PropertyId.SpeechServiceResponse_ProfanityOption,u.QueryParameterNames.Profanity],[i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,u.QueryParameterNames.StableIntermediateThreshold]]).forEach(((n,i)=>{this.setUrlParameter(i,n,e,t,r)}));const n=JSON.parse(e.parameters.getProperty(s.ServicePropertiesPropertyName,"{}"));Object.keys(n).forEach((e=>{t[e]=n[e]}))}}t.ConversationTranscriberConnectionFactory=l},1632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionServiceRecognizer=void 0;const n=r(8040),i=r(9859);class s extends i.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privConversationTranscriber=i,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";const t={mode:"Anonymous"};t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}}async processTypeSpecificMessages(e){let t;const r=new n.PropertyCollection;r.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let s=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=i.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset;t=new n.ConversationTranscriptionResult(this.privRequestSession.requestId,n.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(c);const u=new n.ConversationTranscriptionEventArgs(t,a.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,u)}catch(o){}s=!0;break;case"speech.phrase":const l=i.SimpleSpeechPhrase.fromJSON(e.textBody),h=i.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),n.ResultReason.Canceled===h){const e=i.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),t=i.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(e,t,i.EnumTranslation.implTranslateErrorDetails(t))}else if(!this.privRequestSession.isSpeechEnded||h!==n.ResultReason.NoMatch||l.RecognitionStatus===i.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===n.OutputFormat[n.OutputFormat.Simple])t=new n.ConversationTranscriptionResult(this.privRequestSession.requestId,h,l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,e.textBody,r);else{const s=i.DetailedSpeechPhrase.fromJSON(e.textBody),o=s.Offset+this.privRequestSession.currentTurnAudioOffset,a=s.getJsonWithCorrectedOffsets(o);t=new n.ConversationTranscriptionResult(this.privRequestSession.requestId,h,s.RecognitionStatus===i.RecognitionStatus.Success?s.NBest[0].Display:void 0,s.Duration,o,s.Language,s.LanguageDetectionConfidence,l.SpeakerId,void 0,a,r)}const s=new n.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,s)}catch(o){}}s=!0}return s}cancelRecognition(e,t,r,s,o){if((new n.PropertyCollection).setProperty(i.CancellationErrorCodePropertyName,n.CancellationErrorCode[s]),this.privConversationTranscriber.canceled){const t=new n.ConversationTranscriptionCanceledEventArgs(r,o,s,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch{}}}}t.ConversationTranscriptionServiceRecognizer=s},8401:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;const n=r(2277),i=r(9859),s=r(8040),o=r(2679),a=r(9859),c=r(8643),u=r(7237);class l extends o.ConnectionFactoryBase{create(e,t,r){const h=e.parameters.getProperty(s.PropertyId.Conversation_ApplicationId,""),d=e.parameters.getProperty(s.PropertyId.Conversation_DialogType),p=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),f=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),v=e.parameters.getProperty(s.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),m={};m[c.HeaderNames.ConnectionId]=r,m[u.QueryParameterNames.Format]=e.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase(),m[u.QueryParameterNames.Language]=f,m[u.QueryParameterNames.RequestBotStatusMessages]=v,h&&(m[u.QueryParameterNames.BotId]=h,d===s.DialogServiceConfig.DialogTypes.CustomCommands&&(m[c.HeaderNames.CustomCommandsAppId]=h));const g=d===s.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=d===s.DialogServiceConfig.DialogTypes.CustomCommands?"v1":d===s.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",w={};null!=t.token&&""!==t.token&&(w[t.headerName]=t.token);let S=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"");if(!S){const t=o.ConnectionFactoryBase.getHostSuffix(p),r=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://".concat(p,".").concat(l.BaseUrl).concat(t)),n=r.endsWith("/")?r:r+"/";S="".concat(n).concat(g).concat(l.ApiKey,"/").concat(y)}this.setCommonUrlParams(e,m,S);const b="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(S,m,w,new a.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),b,r)}}t.DialogConnectionFactory=l,l.ApiKey="api",l.BaseUrl="convai.speech"},5200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;const n=r(2277),i=r(323),s=r(2307),o=r(7810),a=r(8040),c=r(7368),u=r(9859),l=r(5132),h=r(222);class d extends u.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privEvents=new s.EventSource,this.privDialogServiceConnector=i,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new c.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,r)=>this.listenOnce(e,t,r),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)}))}async sendMessage(e){const t=s.createGuid(),r=s.createNoDashGuid(),n={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},i=JSON.stringify(n),o=await this.fetchConnection();await o.send(new h.SpeechConnectionMessage(s.MessageType.Text,"agent",r,"application/json",i))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(e){const t=new a.PropertyCollection;let r,n;switch(e.messageType===s.MessageType.Text&&t.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const i=u.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==u.RecognitionStatus.TooManyRequests&&i.RecognitionStatus!==u.RecognitionStatus.Error){const e=this.fireEventForResult(i,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(o){}}n=!0;break;case"speech.hypothesis":const s=u.SpeechHypothesis.fromJSON(e.textBody),c=s.Offset+this.privRequestSession.currentTurnAudioOffset;r=new a.SpeechRecognitionResult(this.privRequestSession.requestId,a.ResultReason.RecognizingSpeech,s.Text,s.Duration,c,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(c);const l=new a.SpeechRecognitionEventArgs(r,s.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,l)}catch(o){}n=!0;break;case"speech.keyword":const h=u.SpeechKeyword.fromJSON(e.textBody);r=new a.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===h.Status?a.ResultReason.RecognizedKeyword:a.ResultReason.NoMatch,h.Text,h.Duration,h.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==h.Status&&(this.privLastResult=r);const d=new a.SpeechRecognitionEventArgs(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch(o){}n=!0;break;case"audio":{const t=e.requestId.toUpperCase(),r=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?r.audioStream.write(e.binaryBody):r.endAudioStream()}catch(o){}}n=!0;break;case"response":this.handleResponseMessage(e),n=!0}const i=new s.Deferred;return i.resolve(n),i.promise}async cancelRecognition(e,t,r,n,i){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const t=new a.PropertyCollection;t.setProperty(u.CancellationErrorCodePropertyName,a.CancellationErrorCode[n]);const s=new a.SpeechRecognitionCanceledEventArgs(r,i,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,s)}catch{}if(this.privSuccessCallback){const e=new a.SpeechRecognitionResult(void 0,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(e,t,r){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(a.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const i=this.connectImpl(),s=this.sendPreAudioMessages(),o=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),c=await this.privDialogAudioSource.format,u=await this.privDialogAudioSource.deviceInfo,l=new n.ReplayableAudioNode(o,c.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:u};try{await i,await s}catch(d){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,d),Promise.resolve()}const h=new a.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h);this.sendAudio(l).then((()=>{}),(async e=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,e)}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new s.Deferred,t=async()=>{try{const n=this.isDisposed(),i=!this.isDisposed()&&this.terminateMessageLoop;if(n||i)return void e.resolve(void 0);const o=await this.fetchConnection(),c=await o.read();if(!c)return t();const l=h.SpeechConnectionMessage.fromConnectionMessage(c);switch(l.path.toLowerCase()){case"turn.start":{const e=l.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=u.SpeechDetected.fromJSON(l.textBody),t=new a.RecognitionEventArgs(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let n;n=l.textBody.length>0?l.textBody:"{ Offset: 0 }";const i=u.SpeechDetected.fromJSON(n);this.privRequestSession.onServiceRecognized(i.Offset+this.privRequestSession.currentTurnAudioOffset);const o=new a.RecognitionEventArgs(i.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,o);break;case"turn.end":{const e=l.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new a.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(r){this.privErrorCallback&&this.privErrorCallback(r)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(l)||this.serviceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(l.path.toLowerCase(),l.textBody))}catch(r){}}return t()}catch(n){this.terminateMessageLoop=!0,e.resolve()}};return t().catch((e=>{s.Events.instance.onEvent(new s.BackgroundEvent(e))})),e.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(e){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()}async configConnection(e){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(e),e)}async sendPreAudioMessages(){const e=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(e,!0),await this.sendAgentContext(e),await this.sendWaveHeader(e)}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(a.PropertyId.Conversation_DialogType)===a.DialogServiceConfig.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new i.SendingAgentContextMessageEvent(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new h.SpeechConnectionMessage(s.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){const t=s.createGuid(),r=this.privDialogServiceConnector.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template),n={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof r?void 0:r,version:.5},i=JSON.stringify(n);return e.send(new h.SpeechConnectionMessage(s.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",i))}fireEventForResult(e,t){const r=u.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,i=new a.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new a.SpeechRecognitionEventArgs(i,n,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const n=e.requestId.toUpperCase(),i=l.ActivityPayloadResponse.fromJSON(e.textBody),c=this.privTurnStateManager.GetTurn(n);if(i.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=i.conversationId,this.agentConfig.set(e)}const u=c.processActivityPayload(i,o.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),h=new a.ActivityReceivedEventArgs(i.messagePayload,u);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,h)}catch(r){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new a.TurnStatusReceivedEventArgs(e.textBody))}catch(r){}break;default:s.Events.instance.onEvent(new s.BackgroundEvent("Unexpected response of type ".concat(t.messageType,". Ignoring.")))}}onEvent(e){this.privEvents.onEvent(e),s.Events.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),i=void 0===t?[]:t.split(";"),s=void 0===r?[]:r.split(";"),o=[];for(let a=0;a<n.length;a++){const e={};e.text=n[a],a<i.length&&(e.offset=Number(i[a])),a<s.length&&(e.duration=Number(s[a])),o.push(e)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:o,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}t.DialogServiceAdapter=d},5787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;const n=r(7810),i=r(9709),s=r(5132);t.DialogServiceTurnState=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===s.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=i.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:n.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}},7368:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;const n=r(8446),i=r(5787);t.DialogServiceTurnStateManager=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new n.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new i.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new n.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}},4149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;t.DynamicGrammarBuilder=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach((e=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}},2696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;const n=r(8040),i=r(9859);t.EnumTranslation=class{static implTranslateRecognitionResult(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.ResultReason.Canceled;switch(e){case i.RecognitionStatus.Success:r=n.ResultReason.RecognizedSpeech;break;case i.RecognitionStatus.EndOfDictation:r=t?n.ResultReason.RecognizedSpeech:n.ResultReason.NoMatch;break;case i.RecognitionStatus.NoMatch:case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:r=n.ResultReason.NoMatch;break;case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:r=n.ResultReason.Canceled}return r}static implTranslateCancelResult(e){let t=n.CancellationReason.EndOfStream;switch(e){case i.RecognitionStatus.Success:case i.RecognitionStatus.EndOfDictation:case i.RecognitionStatus.NoMatch:t=n.CancellationReason.EndOfStream;break;case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:t=n.CancellationReason.Error}return t}static implTranslateCancelErrorCode(e){let t=n.CancellationErrorCode.NoError;switch(e){case i.RecognitionStatus.Error:t=n.CancellationErrorCode.ServiceError;break;case i.RecognitionStatus.TooManyRequests:t=n.CancellationErrorCode.TooManyRequests;break;case i.RecognitionStatus.BadRequest:t=n.CancellationErrorCode.BadRequestParameters;break;case i.RecognitionStatus.Forbidden:t=n.CancellationErrorCode.Forbidden;break;default:t=n.CancellationErrorCode.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case n.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case n.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case n.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}},9859:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,i(r(2070),t),i(r(7487),t),i(r(7339),t),i(r(7961),t),i(r(9135),t),i(r(4920),t),i(r(482),t),i(r(4142),t),i(r(8096),t),i(r(8588),t),i(r(6518),t),i(r(9173),t),i(r(3444),t),i(r(9252),t),i(r(4554),t),i(r(3505),t),i(r(2433),t),i(r(3344),t),i(r(3356),t),i(r(9502),t),i(r(3260),t),i(r(4261),t),i(r(1974),t),i(r(1086),t),i(r(6710),t),i(r(6702),t),i(r(8073),t),i(r(5007),t),i(r(1632),t),i(r(4183),t),i(r(3337),t),i(r(6391),t),i(r(3355),t),i(r(8243),t),i(r(2259),t),i(r(8162),t),i(r(3525),t),i(r(9853),t),i(r(4149),t),i(r(2696),t),i(r(5200),t),i(r(5619),t),i(r(2080),t),i(r(4543),t),i(r(1953),t),i(r(4526),t);var s=r(9290);Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return s.AvatarSynthesisAdapter}});var o=r(8705);Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return o.SpeechSynthesisAdapter}}),i(r(3309),t),i(r(8960),t),i(r(4855),t),i(r(4436),t),i(r(7544),t),i(r(8557),t),i(r(4863),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},8643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;class r{}t.HeaderNames=r,r.AuthKey="Ocp-Apim-Subscription-Key",r.Authorization="Authorization",r.SpIDAuthKey="Apim-Subscription-Id",r.ConnectionId="X-ConnectionId",r.ContentType="Content-Type",r.CustomCommandsAppId="X-CommandsAppId",r.Path="Path",r.RequestId="X-RequestId",r.RequestStreamId="X-StreamId",r.RequestTimestamp="X-Timestamp"},7339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;t.AuthInfo=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},7961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;const n=r(2277),i=r(8040),s=r(2679),o=r(9859),a=r(8643);class c extends s.ConnectionFactoryBase{create(e,t,r){let c=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!c){const t=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_IntentRegion),r=s.ConnectionFactoryBase.getHostSuffix(t);c=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+r)+"/speech/recognition/interactive/cognitiveservices/v1"}const u={format:"simple",language:e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,u,c);const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[a.HeaderNames.ConnectionId]=r,e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,c);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(c,u,l,new o.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),h,r)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}t.IntentConnectionFactory=c},8243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;const n=r(2307),i=r(8040),s=r(9859);class o extends s.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privIntentRecognizer=i,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,r,o=!1;const a=new i.PropertyCollection;switch(e.messageType===n.MessageType.Text&&a.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const n=s.SpeechHypothesis.fromJSON(e.textBody);if(t=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,i.ResultReason.RecognizingIntent,n.Text,n.Duration,n.Offset+this.privRequestSession.currentTurnAudioOffset,n.Language,n.LanguageDetectionConfidence,void 0,e.textBody,a),this.privRequestSession.onHypothesis(t.offset),r=new i.IntentRecognitionEventArgs(t,n.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch(u){}o=!0;break;case"speech.phrase":const c=s.SimpleSpeechPhrase.fromJSON(e.textBody);t=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,s.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,void 0,e.textBody,a),r=new i.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(u){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||i.ResultReason.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),h()):this.privPendingIntentArgs=r,o=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===r){if(""===e.textBody)return;r=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const d=s.IntentResponse.fromJSON(e.textBody);if(null!==d&&d.topScoringIntent&&d.topScoringIntent.intent){let t=this.privAddedLmIntents[d.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(t=this.privUmbrellaIntent),t){const n=void 0===t||void 0===t.intentName?d.topScoringIntent.intent:t.intentName;let s=r.result.reason;void 0!==n&&(s=i.ResultReason.RecognizedIntent);const o=void 0!==r.result.properties?r.result.properties:new i.PropertyCollection;o.setProperty(i.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult(n,r.result.resultId,s,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,o),r.offset,r.sessionId)}}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(u){}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}o=!0}const c=new n.Deferred;return c.resolve(o),c.promise}cancelRecognition(e,t,r,n,o){const a=new i.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[n]),this.privIntentRecognizer.canceled){const t=new i.IntentRecognitionCanceledEventArgs(r,o,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new i.IntentRecognitionResult(void 0,t,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}t.IntentServiceRecognizer=o},7237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;class r{}t.QueryParameterNames=r,r.BotId="botid",r.CustomSpeechDeploymentId="cid",r.CustomVoiceDeploymentId="deploymentId",r.EnableAudioLogging="storeAudio",r.EnableLanguageId="lidEnabled",r.EnableWordLevelTimestamps="wordLevelTimestamps",r.EndSilenceTimeoutMs="endSilenceTimeoutMs",r.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",r.Format="format",r.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",r.Language="language",r.Profanity="profanity",r.RequestBotStatusMessages="enableBotMessageStatus",r.StableIntermediateThreshold="stableIntermediateThreshold",r.StableTranslation="stableTranslation",r.TestHooks="testhooks",r.Postprocessing="postprocessing",r.CtsMeetingId="meetingId",r.CtsDeviceId="deviceId",r.CtsIsParticipant="isParticipant",r.EnableAvatar="enableTalkingAvatar"},4142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const n=r(2307);class i extends n.PlatformEvent{constructor(e,t,r){super(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.EventType.Info),this.privRequestId=t,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=i;t.RecognitionTriggeredEvent=class extends i{constructor(e,t,r,n){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ListeningStartedEvent=class extends i{constructor(e,t,r,n){super("ListeningStartedEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ConnectingToServiceEvent=class extends i{constructor(e,t,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}};var s;t.RecognitionStartedEvent=class extends i{constructor(e,t,r,n,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=r,this.privAuthFetchEventId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(s=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));t.RecognitionEndedEvent=class extends i{constructor(e,t,r,i,o,a,c,u){super("RecognitionEndedEvent",e,o,c===s.Success?n.EventType.Info:n.EventType.Error),this.privAudioSourceId=t,this.privAudioNodeId=r,this.privAuthFetchEventId=i,this.privStatus=c,this.privError=u,this.privServiceTag=a}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}},6518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const n=r(8040),i=r(9859);var s;!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(s=t.RecognitionMode||(t.RecognitionMode={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));t.RecognizerConfig=class{constructor(e,t){this.privSpeechServiceConfig=e||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===s.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=s[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==s.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const e=[];let t=!1;if(void 0!==this.autoDetectSourceLanguages)for(const r of this.autoDetectSourceLanguages.split(",")){const i=r+n.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);void 0!==s?(e.push({language:r,endpoint:s}),t=!0):e.push({language:r,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}}},3525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;const n=r(2307),i=r(4142),s=r(4933);t.RequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=n.createNoDashGuid(),this.privAudioNodeId=n.createNoDashGuid(),this.privTurnDeferral=new n.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new i.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,t){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?await this.onComplete():this.onEvent(new i.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new i.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,t){if(200===e)return this.onEvent(new i.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=n.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new n.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),n.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}},5132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class r{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=r,function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))},3337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;const n=r(9859);class i{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new i(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){const r=e-t;for(const e of this.privDetailedSpeechPhrase.NBest){if(e.Words)for(const t of e.Words)t.Offset+=r;if(e.DisplayWords)for(const t of e.DisplayWords)t.Offset+=r}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}t.DetailedSpeechPhrase=i},9502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))},2259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;class r{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new r(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}t.IntentResponse=r},6391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;const n=r(9859);class i{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new i(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}t.SimpleSpeechPhrase=i},8162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;class r{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new r(e)}get Offset(){return this.privSpeechStartDetected.Offset}}t.SpeechDetected=r},6702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;class r{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new r(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}t.SpeechHypothesis=r},8073:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;class r{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new r(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}t.SpeechKeyword=r},4543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd",e.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class r{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new r(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=r},4261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;const n=r(260),i=r(5253);class s{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=i.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new s(JSON.parse(e))}static fromTranslationResponse(e){n.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new s(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null===(e=this.privTranslationHypothesis.PrimaryLanguage)||void 0===e?void 0:e.Language}}t.TranslationHypothesis=s},1974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;const n=r(260),i=r(9859),s=r(5253);class o{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=i.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=s.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new o(JSON.parse(e))}static fromTranslationResponse(e){n.Contracts.throwIfNullOrUndefined(e,"translationResponse");const t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new o(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Language}get Confidence(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}}t.TranslationPhrase=o},3260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;const n=r(9859);class i{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new i(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}t.TranslationSynthesisEnd=i},81:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;class r{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new r(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}t.TurnStatusResponsePayload=r},8096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;const n=r(2277),i=r(2307),s=r(8040),o=r(9859),a=r(222);class c{constructor(e,t,r,n,a){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new i.ArgumentNullError("authentication");if(!t)throw new i.ArgumentNullError("connectionFactory");if(!r)throw new i.ArgumentNullError("audioSource");if(!n)throw new i.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=n.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=r,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new o.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new i.EventSource,this.privServiceEvents=new i.EventSource,this.privDynamicGrammar=new o.DynamicGrammarBuilder,this.privSpeechContext=new o.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new o.AgentConfig;"on"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?this.privSetTimeout=i.Timeout.setTimeout:"undefined"!==typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(s.CancellationReason.Error,1007===t.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}})),this.privEnableSpeakerId&&(this.privDiarizationSessionId=i.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){const t=e.split(","),r=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),n=void 0!==r?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:n},output:{interimResults:{mode:"Always"}},targetLanguages:t}),void 0!==r){const e={};for(const n of t)e[n]=r;this.privSpeechContext.setSection("synthesis",{defaultVoices:e})}}}setSpeechSegmentationTimeoutJson(){const e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==e){const t=this.recognitionMode===o.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===o.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",r=parseInt(e,10),n=this.privSpeechContext.getSection("phraseDetection");n.mode=t,n[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:r}},this.privSpeechContext.setSection("phraseDetection",n)}}setLanguageIdJson(){const e=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const t=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let r;r="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:t,mode:r,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const n=this.privRecognizerConfig.sourceLanguageModels;void 0!==n&&(e.customModels=n,e.onInterim={action:"None"},e.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){if(this.privEnableSpeakerId){if("true"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase())this.privSpeechContext.setWordLevelTimings();else{this.privRecognizerConfig.parameters.getProperty(o.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat()}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}async dispose(e){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const t=await this.privConnectionConfigurationPromise;await t.dispose(e)}catch(t){return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(e,t,r){if(void 0!==this.recognizeOverride)return void await this.recognizeOverride(e,t,r);this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const i=this.connectImpl();let a;try{const e=await this.audioSource.attach(this.privRequestSession.audioNodeId),t=await this.audioSource.format,r=await this.audioSource.deviceInfo;this.privIsLiveAudio=r.type&&r.type===o.type.Microphones,a=new n.ReplayableAudioNode(e,t.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:r}}catch(u){throw await this.privRequestSession.onStopRecognizing(),u}try{await i}catch(u){return void await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,u)}const c=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage();this.sendAudio(a).catch((async e=>{await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)}))}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(e,t){this.connectImpl().then((()=>{try{e&&e()}catch(r){t&&t(r)}}),(e=>{try{t&&t(e)}catch(r){}}))}async disconnect(){if(await this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&await this.disconnectOverride(),void 0!==this.privConnectionPromise)try{await(await this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0}sendMessage(e){}async sendNetworkMessage(e,t){const r="string"===typeof t?i.MessageType.Text:i.MessageType.Binary,n="string"===typeof t?"application/json":"";return(await this.fetchConnection()).send(new a.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,n,t))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}async sendTelemetryData(){const e=this.privRequestSession.getTelemetry();if(!0!==c.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(c.telemetryData)try{c.telemetryData(e)}catch{}const t=await this.fetchConnection();await t.send(new a.SpeechConnectionMessage(i.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}async cancelRecognitionLocal(e,t,r){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,r))}async receiveMessage(){try{if(this.privIsDisposed)return;let e=await this.fetchConnection();const t=await e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.receiveMessage();this.privServiceHasSentMessage=!0;const r=a.SpeechConnectionMessage.fromConnectionMessage(t);if(r.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=o.SpeechDetected.fromJSON(r.textBody),n=new s.RecognitionEventArgs(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,n);break;case"speech.enddetected":let a;a=r.textBody.length>0?r.textBody:"{ Offset: 0 }";const c=o.SpeechDetected.fromJSON(a),u=new s.RecognitionEventArgs(c.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,u);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0));const l=new s.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,l));e=await this.fetchConnection(),await this.sendPrePayloadJSON(e);break;default:await this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new i.ServiceEvent(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch(e){return null}}updateSpeakerDiarizationAudioOffset(){const e=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(e)}sendSpeechContext(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const r=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),r)return e.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))}noOp(){}async sendPrePayloadJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);await this.sendSpeechContext(e,t),await this.sendWaveHeader(e)}async sendWaveHeader(e){const t=await this.audioSource.format;return e.send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then((e=>e.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,t,r){if(t.onSpeechContext(),!0!==c.telemetryDataEnabled){const e={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(r);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",r=JSON.stringify(e)}if(r)return e.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speech.config",t.requestId,"application/json",r))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===i.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(e){const t=await this.audioSource.format;this.privAverageBytesPerMs=t.avgBytesPerSec/1e3;let r=Date.now();const n=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=t.avgBytesPerSec/1e3*parseInt(n,10),o=this.privRequestSession.recogNumber,c=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){const n=await this.fetchConnection(),u=await e.read();if(this.privRequestSession.isSpeechEnded)return;let l,h;if(!u||u.isEnd?(l=null,h=0):(l=u.buffer,this.privRequestSession.onAudioSent(l.byteLength),h=s>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0!==h&&await this.delay(h),null!==l&&(r=Date.now()+1e3*l.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){if(n.send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),null===u||void 0===u||!u.isEnd)return c();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}};return c()}async retryableConnect(){let e=!1;this.privAuthFetchEventId=i.createNoDashGuid();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:i.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let r=0,n="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),i=await t;await this.privRequestSession.onAuthCompleted(!1);const s=this.privConnectionFactory.create(this.privRecognizerConfig,i,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(s.events),s.events.attach((e=>{this.connectionEvents.onEvent(e)}));const o=await s.open();if(200===o.statusCode)return await this.privRequestSession.onConnectionEstablishCompleted(o.statusCode),Promise.resolve(s);1006===o.statusCode&&(e=!0),r=o.statusCode,n=o.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(r,n),Promise.reject("Unable to contact server. StatusCode: ".concat(r,", ").concat(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(n))}delay(e){return new Promise((t=>this.privSetTimeout(t,e)))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const r=new Uint8Array(e);t+="".concat(e.byteLength,"\r\n");for(let n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" ",(n+1)%16===0&&(console.info(t),t="")}console.info(t)}async sendFinalAudio(){const e=await this.fetchConnection();await e.send(new a.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const e=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(e,!1),e)}}t.ServiceRecognizerBase=c,c.telemetryDataEnabled=!0},4933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;const n=r(2307),i=r(4142);t.ServiceTelemetryListener=class{constructor(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof i.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof n.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof n.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof n.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof n.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof n.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof i.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof n.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof n.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof n.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof n.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}},4436:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;const n=r(9859);t.SpeakerRecognitionConfig=class{constructor(e,t){this.privContext=e||new n.Context(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}},482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileConnectionFactory=t.SpeakerRecognitionConnectionFactory=void 0;const n=r(2277),i=r(8040),s=r(2679),o=r(9859),a=r(8643);class c extends s.ConnectionFactoryBase{create(e,t,r,c){let u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const t=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region),n=s.ConnectionFactoryBase.getHostSuffix(t),o=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://".concat(t,".spr-frontend.speech").concat(n)),a=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");u="".concat(o,"/speaker/ws/").concat(this.scenarioToPath(a),"/").concat(r)}const l={format:"simple",language:e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,l,u);const h={};void 0!==t.token&&""!==t.token&&(h[t.headerName]=t.token),h[a.HeaderNames.ConnectionId]=c,h[a.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,u);const d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(u,l,h,new o.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),d,c)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}t.SpeakerRecognitionConnectionFactory=class extends c{create(e,t,r){return super.create(e,t,"recognition",r)}};t.VoiceProfileConnectionFactory=class extends c{create(e,t,r){return super.create(e,t,"profile",r)}}},7544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerServiceRecognizer=void 0;const n=r(2277),i=r(2307),s=r(8040),o=r(9859),a=r(222);class c extends o.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privSpeakerRecognizer=i,this.privSpeakerAudioSource=r,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let t=!1;const r=new s.PropertyCollection;if(e.messageType===i.MessageType.Text&&r.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){const r=JSON.parse(e.textBody);let n;n="success"!==r.status.statusCode.toLowerCase()?new s.SpeakerRecognitionResult(r,s.ResultReason.Canceled,s.CancellationErrorCode.ServiceError,r.status.reason):new s.SpeakerRecognitionResult(r,s.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(n),t=!0}const n=new i.Deferred;return n.resolve(t),n.promise}cancelRecognition(e,t,r,n,i){if((new s.PropertyCollection).setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[n]),this.privResultDeferral){const e=new s.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:i,reason:i}},s.ResultReason.Canceled,n,i);try{this.privResultDeferral.resolve(e)}catch(i){this.privResultDeferral.reject(i)}}}async recognizeSpeakerOnce(e){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new i.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const t=this.connectImpl(),r=this.sendPreAudioMessages(this.extractSpeakerContext(e)),o=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=await this.privSpeakerAudioSource.format,c=await this.privSpeakerAudioSource.deviceInfo,u=new n.ReplayableAudioNode(o,a.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{await t,await r}catch(h){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,h)}const l=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.receiveMessage();return this.sendAudio(u).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)})),this.privResultDeferral.promise}async sendPreAudioMessages(e){const t=await this.fetchConnection();await this.sendSpeakerRecognition(t,e)}async sendSpeakerRecognition(e,t){const r=JSON.stringify(t);return e.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",r))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}}t.SpeakerServiceRecognizer=c},9252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;const n=r(2277),i=r(9859),s=r(8040),o=r(2679),a=r(9859),c=r(8643),u=r(7237);class l extends o.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,r){let l=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),d=o.ConnectionFactoryBase.getHostSuffix(h),p=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+d),f={},v=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?l&&-1!==l.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(f[u.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(l&&-1!==l.search(u.QueryParameterNames.Language)||(f[u.QueryParameterNames.Language]=m)),l&&-1!==l.search(u.QueryParameterNames.Format)||(f[u.QueryParameterNames.Format]=e.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(f[u.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,f,l),!l)switch(e.recognitionMode){case a.RecognitionMode.Conversation:l="true"===e.parameters.getProperty(i.ForceDictationPropertyName,"false")?p+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(p).concat(this.universalUri).concat(e.recognitionEndpointVersion):p+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:l=p+this.dictationRelativeUri;break;default:l=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(p).concat(this.universalUri).concat(e.recognitionEndpointVersion):p+this.interactiveRelativeUri}const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[c.HeaderNames.ConnectionId]=r;const y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),w=new n.WebsocketConnection(l,f,g,new a.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),y,r),S=w.uri;return e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,S),w}}t.SpeechConnectionFactory=l},222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;const n=r(2307),i=r(8643);class s extends n.ConnectionMessage{constructor(e,t,r,s,o,a,c,u){if(!t)throw new n.ArgumentNullError("path");if(!r)throw new n.ArgumentNullError("requestId");const l={};if(l[i.HeaderNames.Path]=t,l[i.HeaderNames.RequestId]=r,l[i.HeaderNames.RequestTimestamp]=(new Date).toISOString(),s&&(l[i.HeaderNames.ContentType]=s),a&&(l[i.HeaderNames.RequestStreamId]=a),c)for(const n in c)n&&(l[n]=c[n]);u?super(e,o,l,u):super(e,o,l),this.privPath=t,this.privRequestId=r,this.privContentType=s,this.privStreamId=a,this.privAdditionalHeaders=c}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,r=null,n=null,o=null;const a={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===i.HeaderNames.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===i.HeaderNames.RequestId.toLowerCase()?r=e.headers[s]:s.toLowerCase()===i.HeaderNames.ContentType.toLowerCase()?n=e.headers[s]:s.toLowerCase()===i.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[s]:a[s]=e.headers[s]);return new s(e.messageType,t,r,n,e.body,o,a,e.id)}}t.SpeechConnectionMessage=s},9853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;t.SpeechContext=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",e);return JSON.stringify(this.privContext)}}},4863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;t.SpeechServiceConfig=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,((e,t)=>{if(t&&"object"===typeof t&&!Array.isArray(t)){const e={};for(const r in t)Object.hasOwnProperty.call(t,r)&&(e[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return e}return t}))}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};t.Context=class{constructor(e){this.system=new r,this.os=e}};class r{constructor(){this.name="SpeechSDK",this.version="1.36.0",this.build="JavaScript",this.lang="JavaScript"}}t.System=r;t.OS=class{constructor(e,t,r){this.platform=e,this.name=t,this.version=r}};t.Device=class{constructor(e,t,r){this.manufacturer=e,this.model=t,this.version=r}},function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(t.type||(t.type={}))},9173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;const n=r(8040),i=r(9859);class s extends i.ServiceRecognizerBase{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privSpeechRecognizer=i}async processTypeSpecificMessages(e){let t;const r=new n.PropertyCollection;r.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let s=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=i.SpeechHypothesis.fromJSON(e.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;t=new n.SpeechRecognitionResult(this.privRequestSession.requestId,n.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(u);const l=new n.SpeechRecognitionEventArgs(t,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch(o){}s=!0;break;case"speech.phrase":const h=i.SimpleSpeechPhrase.fromJSON(e.textBody),d=i.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),n.ResultReason.Canceled===d){const e=i.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),t=i.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(e,t,i.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||d!==n.ResultReason.NoMatch||h.RecognitionStatus===i.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(i.OutputFormatPropertyName)===n.OutputFormat[n.OutputFormat.Simple])t=new n.SpeechRecognitionResult(this.privRequestSession.requestId,d,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,e.textBody,r);else{const s=i.DetailedSpeechPhrase.fromJSON(e.textBody),o=s.Offset+this.privRequestSession.currentTurnAudioOffset,a=s.getJsonWithCorrectedOffsets(o);t=new n.SpeechRecognitionResult(this.privRequestSession.requestId,d,s.RecognitionStatus===i.RecognitionStatus.Success?s.NBest[0].Display:void 0,s.Duration,o,s.Language,s.LanguageDetectionConfidence,void 0,void 0,a,r)}const s=new n.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,s)}catch(o){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}return s}cancelRecognition(e,t,r,s,o){const a=new n.PropertyCollection;if(a.setProperty(i.CancellationErrorCodePropertyName,n.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const t=new n.SpeechRecognitionCanceledEventArgs(r,o,s,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new n.SpeechRecognitionResult(t,n.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}}t.SpeechServiceRecognizer=s},8705:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisAdapter=void 0;const n=r(8040),i=r(9859);class s extends i.SynthesisAdapterBase{constructor(e,t,r,n,i){super(e,t,r,i),this.privSpeechSynthesizer=n,this.privSynthesizer=n}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){const t=new n.SpeechSynthesisEventArgs(new n.SpeechSynthesisResult(e,n.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{const t=this.privSynthesisTurn.audioOutputFormat.addHeader(e),r=new n.SpeechSynthesisEventArgs(new n.SpeechSynthesisResult(this.privSynthesisTurn.requestId,n.ResultReason.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,r)}catch(t){}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){const t=new n.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,t)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new n.SpeechSynthesisEventArgs(e))}catch(t){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(t){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(t){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(t){}}}t.SpeechSynthesisAdapter=s},3344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;const n=r(2277),i=r(8040),s=r(2679),o=r(9859),a=r(8643),c=r(7237);t.SpeechSynthesisConnectionFactory=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,r){let u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const l=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),h=s.ConnectionFactoryBase.getHostSuffix(l),d=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=void 0===d?"tts":"voice",f=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+l+"."+p+".speech"+h),v={},m={};void 0!==t.token&&""!==t.token&&(m[t.headerName]=t.token),m[a.HeaderNames.ConnectionId]=r,void 0!==d&&""!==d&&(u&&-1!==u.search(c.QueryParameterNames.CustomVoiceDeploymentId)||(v[c.QueryParameterNames.CustomVoiceDeploymentId]=d)),e.avatarEnabled&&(u&&-1!==u.search(c.QueryParameterNames.EnableAvatar)||(v[c.QueryParameterNames.EnableAvatar]="true")),u||(u=f+this.synthesisUri),e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,u);const g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(u,v,m,new o.WebsocketMessageFormatter,n.ProxyInfo.fromParameters(e.parameters),g,r)}}},4526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;const n=r(2307),i=r(8040),s=r(9859),o=r(222);class a{constructor(e,t,r,o){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new n.ArgumentNullError("authentication");if(!t)throw new n.ArgumentNullError("connectionFactory");if(!r)throw new n.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSessionAudioDestination=o,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new n.EventSource,this.privServiceEvents=new n.EventSource,this.privSynthesisContext=new s.SynthesisContext,this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(i.CancellationReason.Error,1007===t.statusCode?i.CancellationErrorCode.BadRequestParameters:i.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}async dispose(e){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=await this.privConnectionConfigurationPromise;await t.dispose(e)}}async connect(){await this.connectImpl()}async sendNetworkMessage(e,t){const r="string"===typeof t?n.MessageType.Text:n.MessageType.Binary,i="string"===typeof t?"application/json":"";return(await this.fetchConnection()).send(new o.SpeechConnectionMessage(r,e,this.privSynthesisTurn.requestId,i,t))}async Speak(e,t,r,n,s,o){let a;if(a=t?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(a,r,n,s);this.privSuccessCallback=n,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(r,e,t,o);try{await this.connectImpl();const e=await this.fetchConnection();await this.sendSynthesisContext(e),await this.sendSsmlMessage(e,a,r),this.onSynthesisStarted(r),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}}async stopSpeaking(){await this.connectImpl();return(await this.fetchConnection()).send(new o.SpeechConnectionMessage(n.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(e,t,r,n){const o=new i.PropertyCollection;o.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[r]);const a=new i.SpeechSynthesisResult(e,i.ResultReason.Canceled,void 0,n,o);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch{}}cancelSynthesisLocal(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))}processTypeSpecificMessages(e){return!0}async receiveMessage(){try{const t=await this.fetchConnection(),r=await t.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!r)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const a=o.SpeechConnectionMessage.fromConnectionMessage(r);if(a.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(a.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(a.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(a.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===a.streamId.toLowerCase()&&a.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(a.binaryBody),this.onSynthesizing(a.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(a.binaryBody));break;case"audio.metadata":const t=s.SynthesisAudioMetadata.fromJSON(a.textBody).Metadata;for(const e of t)switch(e.Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const t=new i.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(t);break;case s.MetadataType.Bookmark:const r=new i.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(r);break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const t=new i.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(t)}break;case s.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let r;this.privSynthesisTurn.onServiceTurnEndResponse();try{r=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(r)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.onSynthesisCompleted(r);break;default:this.processTypeSpecificMessages(a)||this.privServiceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(a.path.toLowerCase(),a.textBody))}return this.receiveMessage()}catch(t){}}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();const t=this.synthesisContext.toJSON();if(t)return e.send(new o.SpeechConnectionMessage(n.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}setSpeechConfigSynthesisSection(){}connectImpl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!=this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl())));this.privAuthFetchEventId=n.createNoDashGuid(),this.privConnectionId=n.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((async t=>{this.privSynthesisTurn.onAuthCompleted(!1);const r=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);r.events.attach((e=>{this.connectionEvents.onEvent(e)}));const n=await r.open();return 200===n.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode),Promise.resolve(r)):403!==n.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode),Promise.reject("Unable to contact server. StatusCode: ".concat(n.statusCode,",\n                    ").concat(this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Url)," Reason: ").concat(n.reason))):this.connectImpl(!0)}),(e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)})),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new o.SpeechConnectionMessage(n.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,r){return e.send(new o.SpeechConnectionMessage(n.MessageType.Text,"ssml",r,"application/ssml+xml",t))}async fetchConnection(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const e=await this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}}t.SynthesisAdapterBase=a,a.telemetryDataEnabled=!0},4855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;const n=r(8040);t.SynthesisContext=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){const t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!(null===e||void 0===e||!e.bookmarkReached),punctuationBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!(null===e||void 0===e||!e.wordBoundary)),sentenceBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!(null===e||void 0===e||!e.visemeReceived),wordBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordBoundary,!(null===e||void 0===e||!e.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null===e||void 0===e?void 0:e.autoDetectSourceLanguage}}}}},3903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;const n=r(2307);class i extends n.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.EventType.Info),this.privRequestId=t}get requestId(){return this.privRequestId}}t.SpeechSynthesisEvent=i;t.SynthesisTriggeredEvent=class extends i{constructor(e,t,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};t.ConnectingToSynthesisServiceEvent=class extends i{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};t.SynthesisStartedEvent=class extends i{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}},3309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRestAdapter=void 0;const n=r(2277),i=r(8040),s=r(2679),o=r(8643);t.SynthesisRestAdapter=class{constructor(e,t){let r=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!r){const t=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"westus"),n=s.ConnectionFactoryBase.getHostSuffix(t);r=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"https://".concat(t,".tts.speech").concat(n))}this.privUri="".concat(r,"/cognitiveservices/voices/list");const o=n.RestConfigBase.requestOptions;this.privRestAdapter=new n.RestMessageAdapter(o),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(o.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then((e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(n.RestRequestType.Get,this.privUri))))}}},1953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;const n=r(2307),i=r(9709),s=r(8040),o=r(4543),a=r(3903);class c{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=n.createNoDashGuid(),this.privTurnDeferral=new n.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const e=new s.PropertyCollection;return e.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}startNewSynthesis(e,t,r,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=r,this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==n&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new a.SynthesisTriggeredEvent(this.requestId,void 0,void 0===n?void 0:n.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new a.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new a.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new n.Deferred;const t=JSON.parse(e);t.webrtc&&(this.privWebRTCSDP=t.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}async constructSynthesisResult(){const e=await this.getAllReceivedAudioWithHeader();return new s.SpeechSynthesisResult(this.requestId,s.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){n.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===o.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!c.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!c.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}t.SynthesisTurn=c},8960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const n=r(9859);var i;!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(i=t.SynthesisServiceType||(t.SynthesisServiceType={}));t.SynthesizerConfig=class{constructor(e,t){this.privSynthesisServiceType=i.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},3505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;const n=r(2277),i=r(8040),s=r(2679),o=r(9859),a=r(8643),c=r(7237);class u extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,t,r){let c=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"centralus"),l="wss://transcribe."+u+".cts.speech"+s.ConnectionFactoryBase.getHostSuffix(u)+this.multiaudioRelativeUri,h=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,l),d={};this.setQueryParams(d,e,c),c||(c=h);const p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[a.HeaderNames.ConnectionId]=r,e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,c);const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(c,d,p,new o.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),f,r)}setQueryParams(e,t,r){const n=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),s=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);n&&!(c.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[c.QueryParameterNames.CustomSpeechDeploymentId]=n),s&&!(c.QueryParameterNames.Language in e)&&(e[c.QueryParameterNames.Language]=s);const a="true"===t.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),u=t.parameters.getProperty(o.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])!==i.OutputFormat[i.OutputFormat.Simple];(a||u)&&(e[c.QueryParameterNames.Format]=i.OutputFormat[i.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,r)}}t.TranscriberConnectionFactory=u},1666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;const n=r(3593);class i extends n.RestConfigBase{static get host(){return i.privHost}static get apiVersion(){return i.privApiVersion}static get clientAppId(){return i.privClientAppId}static get defaultLanguageCode(){return i.privDefaultLanguageCode}static get restPath(){return i.privRestPath}static get webSocketPath(){return i.privWebSocketPath}static get transcriptionEventKeys(){return i.privTranscriptionEventKeys}}t.ConversationConnectionConfig=i,i.privHost="dev.microsofttranslator.com",i.privRestPath="/capito/room",i.privApiVersion="2.0",i.privDefaultLanguageCode="en-US",i.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",i.privWebSocketPath="/capito/translate",i.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},7108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;const n=r(2277),i=r(2307),s=r(260),o=r(8040),a=r(2679),c=r(1666),u=r(4914);class l extends a.ConnectionFactoryBase{create(e,t,r){const a=e.parameters.getProperty(o.PropertyId.ConversationTranslator_Host,c.ConversationConnectionConfig.host),l=e.parameters.getProperty(o.PropertyId.ConversationTranslator_CorrelationId,i.createGuid()),h="wss://".concat(a).concat(c.ConversationConnectionConfig.webSocketPath),d=e.parameters.getProperty(o.PropertyId.ConversationTranslator_Token,void 0);s.Contracts.throwIfNullOrUndefined(d,"token");const p={};p[c.ConversationConnectionConfig.configParams.apiVersion]=c.ConversationConnectionConfig.apiVersion,p[c.ConversationConnectionConfig.configParams.token]=d,p[c.ConversationConnectionConfig.configParams.correlationId]=l;const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(h,p,{},new u.ConversationWebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),f,r)}}t.ConversationConnectionFactory=l},6109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;const n=r(2307);class i extends n.ConnectionMessage{constructor(e,t,r,n){super(e,t,r,n);const i=JSON.parse(this.textBody);void 0!==i.type&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}}t.ConversationConnectionMessage=i},9469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;const n=r(2277),i=r(260),s=r(8040),o=r(1666);t.ConversationManager=class{constructor(){this.privRequestParams=o.ConversationConnectionConfig.configParams,this.privErrors=o.ConversationConnectionConfig.restErrors,this.privHost=o.ConversationConnectionConfig.host,this.privApiVersion=o.ConversationConnectionConfig.apiVersion,this.privRestPath=o.ConversationConnectionConfig.restPath,this.privRestAdapter=new n.RestMessageAdapter({})}createOrJoin(e,t,r,a){try{i.Contracts.throwIfNullOrUndefined(e,"args");const c=e.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,o.ConversationConnectionConfig.defaultLanguageCode),u=e.getProperty(s.PropertyId.ConversationTranslator_Name,"conversation_host"),l=e.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),h=e.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),d=e.getProperty(s.PropertyId.SpeechServiceConnection_Key),p=e.getProperty(s.PropertyId.SpeechServiceConnection_Region),f=e.getProperty(s.PropertyId.SpeechServiceAuthorization_Token);i.Contracts.throwIfNullOrWhitespace(c,"languageCode"),i.Contracts.throwIfNullOrWhitespace(u,"nickname"),i.Contracts.throwIfNullOrWhitespace(l,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=c,v[this.privRequestParams.nickname]=u;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=o.ConversationConnectionConfig.clientAppId,void 0!==t?v[this.privRequestParams.roomId]=t:(i.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=p,d?m[this.privRequestParams.subscriptionKey]=d:f?m[this.privRequestParams.authorization]="Bearer ".concat(f):i.Contracts.throwIfNullOrUndefined(d,this.privErrors.authInvalidSubscriptionKey));const g={};g.headers=m,this.privRestAdapter.options=g;const y="https://".concat(l).concat(this.privRestPath);this.privRestAdapter.request(n.RestRequestType.Post,y,v,null).then((e=>{const t=n.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,e.headers);if(!e.ok){if(a){let r,n=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{r=JSON.parse(e.data),n+=" [".concat(r.error.code,": ").concat(r.error.message,"]")}catch(s){n+=" [".concat(e.data,"]")}t&&(n+=" ".concat(t)),a(n)}return}const i=JSON.parse(e.data);if(i&&(i.requestId=t),r){try{r(i)}catch(s){a&&a(s)}r=void 0}})).catch((()=>{}))}catch(c){if(a)if(c instanceof Error){const e=c;a(e.name+": "+e.message)}else a(c)}}leave(e,t){return new Promise(((r,o)=>{try{i.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),i.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const o=e.getProperty(s.PropertyId.ConversationTranslator_Host,this.privHost),a=e.getProperty(s.PropertyId.ConversationTranslator_CorrelationId),c={};c[this.privRequestParams.apiVersion]=this.privApiVersion,c[this.privRequestParams.sessionToken]=t;const u={};a&&(u[this.privRequestParams.correlationId]=a);const l={};l.headers=u,this.privRestAdapter.options=l;const h="https://".concat(o).concat(this.privRestPath);this.privRestAdapter.request(n.RestRequestType.Delete,h,c,null).then((e=>{e.ok,r()})).catch((()=>{}))}catch(a){if(a instanceof Error){const e=a;o(e.name+": "+e.message)}else o(a)}}))}}},7967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;const n=r(2307);t.ConversationRequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=n.createNoDashGuid(),this.privRequestCompletionDeferral=new n.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=n.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}},8486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;const n=r(2307),i=r(8040),s=r(9859),o=r(6109),a=r(7967),c=r(9537),u=r(4566),l=r(7316);class h extends s.ServiceRecognizerBase{constructor(e,t,r,i,s){super(e,t,r,i,s),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=s,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new a.ConversationRequestSession(n.createNoDashGuid()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(e){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=await this.privConnectionConfigPromise;await t.dispose(e)}await super.dispose(e)}async sendMessage(e){return(await this.fetchConnection()).send(new o.ConversationConnectionMessage(n.MessageType.Text,e))}async sendMessageAsync(e){const t=await this.fetchConnection();await t.send(new o.ConversationConnectionMessage(n.MessageType.Text,e))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(e,t,r,n,s){this.terminateMessageLoop=!0;const o=new i.ConversationTranslationCanceledEventArgs(r,s,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch{}}async conversationConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new n.Deferred;try{const r=await this.fetchConnection(),n=await r.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!n)return this.receiveConversationMessageOverride();const o=this.privConversationRequestSession.sessionId,a=n.conversationMessageType.toLowerCase();let h=!1;try{switch(a){case"info":case"participant_command":case"command":const e=l.CommandResponsePayload.fromJSON(n.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=l.ParticipantsListPayloadResponse.fromJSON(n.textBody),r=t.participants.map((e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new c.ParticipantsListEventArgs(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,r,o));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,u.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,o));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,u.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,o));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,u.ConversationTranslatorCommandTypes.setMute,e.value,o));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new c.MuteAllEventArgs(e.value,o));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new i.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,u.ConversationTranslatorCommandTypes.setUseTTS,e.value,o));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new c.LockRoomEventArgs(e.value,o));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new c.ParticipantAttributeEventArgs(e.participantId,u.ConversationTranslatorCommandTypes.changeNickname,e.value,o));break;case"joinsession":const a=l.ParticipantPayloadResponse.fromJSON(n.textBody),h={avatar:a.avatar,displayName:a.nickname,id:a.participantId,isHost:a.ishost,isMuted:a.ismuted,isUsingTts:a.usetts,preferredLanguage:a.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new c.ParticipantEventArgs(h,o));break;case"leavesession":const d={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new c.ParticipantEventArgs(d,o));break;case"disconnectsession":e.participantId;break;case"token":const p=new s.CognitiveTokenAuthentication((()=>{const t=e.token;return Promise.resolve(t)}),(()=>{const t=e.token;return Promise.resolve(t)}));this.authentication=p,this.privConversationServiceConnector.onToken(p)}break;case"partial":case"final":const t=l.SpeechResponsePayload.fromJSON(n.textBody),r="final"===a?i.ResultReason.TranslatedParticipantSpeech:i.ResultReason.TranslatingParticipantSpeech,d=new i.ConversationTranslationResult(t.participantId,this.getTranslations(t.translations),t.language,t.id,r,t.recognition,void 0,void 0,n.textBody,void 0);t.isFinal?((void 0!==d.text&&d.text.length>0||t.id===this.privLastPartialUtteranceId)&&(h=!0),h&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(u.ConversationTranslatorMessageTypes.final,d,o))):void 0!==d.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(u.ConversationTranslatorMessageTypes.partial,d,o)));break;case"translated_message":const p=l.TextResponsePayload.fromJSON(n.textBody),f=new i.ConversationTranslationResult(p.participantId,this.getTranslations(p.translations),p.language,void 0,void 0,p.originalText,void 0,void 0,void 0,n.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new c.ConversationReceivedTranslationEventArgs(u.ConversationTranslatorMessageTypes.instantMessage,f,o))}}catch(t){}return this.receiveConversationMessageOverride()}catch(t){this.terminateMessageLoop=!0}return e.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return await e}catch(t){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,t),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((e=>e.state()===n.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((e=>e)),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new i.Translations;for(const r of e)t.set(r.lang,r.translation)}return t}}t.ConversationServiceAdapter=h},5934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorConnectionFactory=void 0;const n=r(2277),i=r(7354),s=r(260),o=r(8040),a=r(8643),c=r(7237),u=r(2679),l=r(9859);class h extends u.ConnectionFactoryBase{constructor(e){super(),s.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,t,r){const s="TRUE"===e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),d=this.privConvGetter().room,p=d.cognitiveSpeechRegion||e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:u.ConnectionFactoryBase.getHostSuffix(p),path:h.CTS_VIRT_MIC_PATH,region:encodeURIComponent(p)};f[c.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[c.QueryParameterNames.CtsMeetingId]=encodeURIComponent(d.roomId),f[c.QueryParameterNames.CtsDeviceId]=encodeURIComponent(d.participantId),f[c.QueryParameterNames.CtsIsParticipant]=d.isHost?"":"&"+c.QueryParameterNames.CtsIsParticipant;let v="";const m={},g={};if(s){if(v=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint),!v){v="wss://"+e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"}v=i.StringUtils.formatString(v,f);const t=new URL(v);t.searchParams.forEach(((e,t)=>{m[t]=e}));(new l.TranscriberConnectionFactory).setQueryParams(m,e,v),m[c.QueryParameterNames.CtsMeetingId]=f[c.QueryParameterNames.CtsMeetingId],m[c.QueryParameterNames.CtsDeviceId]=f[c.QueryParameterNames.CtsDeviceId],d.isHost||(m[c.QueryParameterNames.CtsIsParticipant]=""),c.QueryParameterNames.Format in m||(m[c.QueryParameterNames.Format]="simple"),t.searchParams.forEach(((e,r)=>{t.searchParams.set(r,m[r]),delete m[r]})),v=t.toString()}else{const t=new l.TranslationConnectionFactory;v=t.getEndpointUrl(e,!0),v=i.StringUtils.formatString(v,f),t.setQueryParams(m,e,v)}g[a.HeaderNames.ConnectionId]=r,g[n.RestConfigBase.configParams.token]=d.token,t.token&&(g[t.headerName]=t.token);const y="TRUE"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new n.WebsocketConnection(v,m,g,new l.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),y,r)}}t.ConversationTranslatorConnectionFactory=h,h.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},9537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}t.MuteAllEventArgs=i;class s extends n.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}t.LockRoomEventArgs=s;class o extends n.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}t.ParticipantEventArgs=o;class a extends n.SessionEventArgs{constructor(e,t,r,n){super(n),this.privKey=t,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}t.ParticipantAttributeEventArgs=a;class c extends n.SessionEventArgs{constructor(e,t,r,n,i,s,o,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=r,this.privProfanityFilter=n,this.privRoomProfanityFilter=i,this.privIsRoomLocked=s,this.privIsRoomLocked=o,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}t.ParticipantsListEventArgs=c;t.ConversationReceivedTranslationEventArgs=class{constructor(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}},4566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;t.InternalParticipants=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex((t=>t.id===e))}getParticipant(e){return this.participants.find((t=>t.id===e))}deleteParticipant(e){this.participants=this.participants.filter((t=>t.id!==e))}get host(){return this.participants.find((e=>!0===e.isHost))}get me(){return this.getParticipant(this.meId)}},t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},8388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040),a=r(7108),c=r(8486);t.ConversationRecognizerFactory=class{static fromConfig(e,t,r){return new u(e,t,r)}};class u extends o.Recognizer{constructor(e,t,r){const n=t;s.Contracts.throwIfNull(n,"speechConfig");const c=e;s.Contracts.throwIfNull(c,"conversationImpl"),super(r,n.properties,new a.ConversationConnectionFactory),this.privConversation=c,this.privIsDisposed=!1,this.privProperties=n.properties.clone(),this.privConnection=o.Connection.fromRecognizer(this);"on"===this.privProperties.getProperty(o.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?(this.privSetTimeout=i.Timeout.setTimeout,this.privClearTimeout=i.Timeout.clearTimeout):"undefined"!==typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,r)}catch(n){if(r)if(n instanceof Error){const e=n;r(e.name+": "+e.message)}else r(n)}}disconnect(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then((()=>{e&&e()}),(e=>{t&&t(e)}))}catch(r){if(t)if(r instanceof Error){const e=r;t(e.name+": "+e.message)}else t(r);this.dispose(!0).catch((e=>{i.Events.instance.onEvent(new i.BackgroundEvent(e))}))}}sendRequest(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,r)}catch(n){if(r)if(n instanceof Error){const e=n;r(e.name+": "+e.message)}else r(n);this.dispose(!0).catch((e=>{i.Events.instance.onEvent(new i.BackgroundEvent(e))}))}}onToken(e){this.privConversation.onToken(e)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(e){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(e))}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,n){const i=r;return new c.ConversationServiceAdapter(e,t,i,n,this)}sendMessage(e,t,r){((e,t,r)=>{void 0!==e?e.then((()=>{try{t&&t()}catch(e){r&&r("'Unhandled error on promise callback: ".concat(e,"'"))}}),(e=>{try{r&&r(e)}catch(t){}})):r&&r("Null promise")})(this.privReco.sendMessageAsync(e),t,r),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout((()=>{this.sendRequest(this.privConversation.getKeepAlive())}),6e4)}}t.ConversationTranslatorRecognizer=u},4914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;const n=r(2307),i=r(6109);t.ConversationWebsocketMessageFormatter=class{toConnectionMessage(e){const t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){const r=new i.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===n.MessageType.Binary&&t.resolve(new i.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(r){t.reject("Error formatting the message. Error: ".concat(r))}return t.promise}fromConnectionMessage(e){const t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){const r="".concat(e.textBody?e.textBody:"");t.resolve(new n.RawWebsocketMessage(n.MessageType.Text,r,e.id))}}catch(r){t.reject("Error formatting the message. ".concat(r))}return t.promise}}},2080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9469);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return n.ConversationManager}});var i=r(1666);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return i.ConversationConnectionConfig}});var s=r(8388);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return s.ConversationRecognizerFactory}});var o=r(7130);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return o.TranscriberRecognizer}});var a=r(9537);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var c=r(4566);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})},3551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;class r{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new r(e)}}t.CommandResponsePayload=r},7316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3551);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return n.CommandResponsePayload}});var i=r(4555);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantPayloadResponse}});var s=r(4297);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return s.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return s.TextResponsePayload}})},4555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;class r{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new r(e)}}t.ParticipantsListPayloadResponse=r;class n{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new n(e)}}t.ParticipantPayloadResponse=n},4297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;class r{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new r(e)}}t.SpeechResponsePayload=r;class n{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new n(e)}}t.TextResponsePayload=n},7130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;const n=r(2307),i=r(260),s=r(8040),o=r(9859);class a extends s.Recognizer{constructor(e,t){const r=e;i.Contracts.throwIfNull(r,"speechTranslationConfig");const n=t;i.Contracts.throwIfNull(n,"audioConfigImpl"),i.Contracts.throwIfNullOrWhitespace(r.speechRecognitionLanguage,s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new o.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){i.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){i.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return i.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){i.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return i.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(o.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){n.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(e,t){const r=this.privReco;i.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),await r.sendSpeechEventAsync(e,t)}async pushMeetingEvent(e,t){const r=this.privReco;i.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),await r.sendMeetingSpeechEventAsync(e,t)}async enforceAudioGating(){const e=this.audioConfig,t=(await e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error("Unsupported audio configuration: Detected ".concat(t,"-channel audio"))}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(t,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(t,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(t,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(t,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new o.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,r,n){const i=r;return new o.TranscriptionServiceRecognizer(e,t,i,n,this)}}t.TranscriberRecognizer=a},4183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;const n=r(2307),i=r(8040),s=r(9859),o=r(222);class a extends s.ConversationServiceRecognizer{constructor(e,t,r,n,s){super(e,t,r,n,s),this.privTranscriberRecognizer=s,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(e,t){if(this.privRequestSession.isRecognizing){const r=await this.fetchConnection();await this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))}}async sendMeetingSpeechEventAsync(e,t){if(this.privRequestSession.isRecognizing){const r=await this.fetchConnection();await this.sendSpeechEvent(r,this.createMeetingSpeechEventPayload(e,t))}}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,t,r){try{const s=new i.SpeechRecognitionEventArgs(e,t,r);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,s),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(n){this.privErrorCallback&&this.privErrorCallback(n)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(s){}}handleRecognizingCallback(e,t,r){try{const n=new i.SpeechRecognitionEventArgs(e,t,r);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,n)}catch(n){}}cancelRecognition(e,t,r,n,o){const a=new i.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[n]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const t=new i.MeetingTranscriptionCanceledEventArgs(r,o,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const t=new i.ConversationTranscriptionCanceledEventArgs(r,o,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new i.SpeechRecognitionResult(t,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(e){if(await this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const t=this.privTranscriberRecognizer.getMeetingInfo(),r=this.createMeetingSpeechEventPayload(t,"start");await this.sendSpeechEvent(e,r)}else{const t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start");await this.sendSpeechEvent(e,r)}await this.sendWaveHeader(e)}sendSpeechEvent(e,t){const r=JSON.stringify(t);if(r)return e.send(new o.SpeechConnectionMessage(n.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))}createSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}createMeetingSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.meetingProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r}}t.TranscriptionServiceRecognizer=a},2433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;const n=r(2277),i=r(7354),s=r(8040),o=r(2679),a=r(9859),c=r(8643),u=r(7237);class l extends o.ConnectionFactoryBase{create(e,t,r){const i=this.getEndpointUrl(e),o={};void 0!==e.autoDetectSourceLanguages&&(o[u.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(o,e,i);const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[c.HeaderNames.ConnectionId]=r,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,i);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(i,o,l,new a.WebsocketMessageFormatter,n.ProxyInfo.fromRecognizerConfig(e),h,r)}getEndpointUrl(e,t){const r=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),n=o.ConnectionFactoryBase.getHostSuffix(r);let a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!a)if(void 0!==e.autoDetectSourceLanguages){a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+n)+"/speech/universal/v2"}else{a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+n)+"/speech/translation/cognitiveservices/v1"}return!0===t?a:i.StringUtils.formatString(a,{region:r})}setQueryParams(e,t,r){e.from=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,r),this.setUrlParameter(s.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,u.QueryParameterNames.StableTranslation,t,e,r);const n=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==n&&(e.voice=n,e.features="texttospeech")}}t.TranslationConnectionFactory=l},1086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;const n=r(2307),i=r(8040),s=r(9859);class o extends s.ConversationServiceRecognizer{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privTranslationRecognizer=i,this.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()}))}async processTypeSpecificMessages(e){const t=new i.PropertyCollection;let r=await this.processSpeechMessages(e);if(r)return!0;const o=async n=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus===s.RecognitionStatus.Success){const e=this.fireEventForResult(n,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(o){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const c=s.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),u=new i.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,c,n.Text,n.Duration,this.privRequestSession.currentTurnAudioOffset+n.Offset,n.Language,n.Confidence,void 0,e.textBody,t);if(c===i.ResultReason.Canceled){const e=s.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),t=s.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus);await this.cancelRecognitionLocal(e,t,s.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||c!==i.ResultReason.NoMatch||n.RecognitionStatus===s.RecognitionStatus.InitialSilenceTimeout){const e=new i.TranslationRecognitionEventArgs(u,u.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(o){}}if(this.privSuccessCallback){try{this.privSuccessCallback(u)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}},a=(e,t)=>{const n=this.fireEventForResult(e,t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+n.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(i){}r=!0};switch(e.messageType===n.MessageType.Text&&t.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":a(s.TranslationHypothesis.fromJSON(e.textBody),t);break;case"translation.response":const n=JSON.parse(e.textBody);if(n.SpeechPhrase)await o(s.TranslationPhrase.fromTranslationResponse(n));else{const r=JSON.parse(e.textBody);r.SpeechHypothesis&&a(s.TranslationHypothesis.fromTranslationResponse(r),t)}break;case"translation.phrase":await o(s.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0;break;case"audio.end":case"translation.synthesis.end":const u=s.TranslationSynthesisEnd.fromJSON(e.textBody);switch(u.SynthesisStatus){case s.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new i.TranslationSynthesisResult(i.ResultReason.Canceled,void 0),t=new i.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(c){}}if(this.privTranslationRecognizer.canceled){const e=new i.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,i.CancellationReason.Error,u.FailureReason,i.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(c){}}break;case s.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}r=!0}return r}cancelRecognition(e,t,r,n,o){const a=new i.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[n]),this.privTranslationRecognizer.canceled){const t=new i.TranslationRecognitionCanceledEventArgs(e,r,o,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch{}}if(this.privSuccessCallback){const e=new i.TranslationRecognitionResult(void 0,t,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,t,r){try{const n=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,r);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(n){}}handleRecognizedCallback(e,t,r){try{const n=new i.TranslationRecognitionEventArgs(i.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,r);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,n)}catch(n){}}fireEventForResult(e,t){let r,o,a;if(void 0!==e.Translation.Translations){r=new i.Translations;for(const t of e.Translation.Translations)r.set(t.Language,t.Text||t.DisplayText)}e instanceof s.TranslationPhrase?(o=e.Translation&&e.Translation.TranslationStatus===n.TranslationStatus.Success?i.ResultReason.TranslatedSpeech:i.ResultReason.RecognizedSpeech,a=e.Confidence):o=i.ResultReason.TranslatingSpeech;const c=e.Language,u=e.Offset+this.privRequestSession.currentTurnAudioOffset,l=new i.TranslationRecognitionResult(r,this.privRequestSession.requestId,o,e.Text,e.Duration,u,c,a,e.Translation.FailureReason,JSON.stringify(e),t);return new i.TranslationRecognitionEventArgs(l,u,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const r=void 0===e?i.ResultReason.SynthesizingAudioCompleted:i.ResultReason.SynthesizingAudio,n=new i.TranslationSynthesisResult(r,e),s=new i.TranslationSynthesisEventArgs(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,s)}catch(o){}}}t.TranslationServiceRecognizer=o},5253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))},8557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceServiceRecognizer=void 0;const n=r(2277),i=r(2307),s=r(8040),o=r(9859),a=r(222);class c extends o.ServiceRecognizerBase{constructor(e,t,r,n,s){super(e,t,r,n,s),this.privDeferralMap=new i.DeferralMap,this.privSpeakerAudioSource=r,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let t=!1;const r=new s.PropertyCollection;switch(e.messageType===i.MessageType.Text&&r.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":const r=JSON.parse(e.textBody);switch(r.operation.toLowerCase()){case"create":this.handleCreateResponse(r,e.requestId);break;case"delete":case"reset":this.handleResultResponse(r,e.requestId);break;case"fetch":const t=JSON.parse(e.textBody);this.handleFetchResponse(t,e.requestId)}t=!0;break;case"speaker.phrases":const n=JSON.parse(e.textBody);this.handlePhrasesResponse(n,e.requestId),t=!0;break;case"speaker.profile.enrollment":const i=JSON.parse(e.textBody),o=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(i.enrollment?i.enrollment.enrollmentStatus:i.status.statusCode),i.enrollment?JSON.stringify(i.enrollment):void 0,i.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,o),this.privRequestSession.onSpeechEnded(),t=!0}const n=new i.Deferred;return n.resolve(t),n.promise}cancelRecognition(e,t,r,n,i){(new s.PropertyCollection).setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[n]);const a=new s.VoiceProfileEnrollmentResult(s.ResultReason.Canceled,i,i);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,a)}async createProfile(e,t){this.voiceProfileType=e.toString();const r=this.connectImpl();try{const n=new i.Deferred;return await r,await this.sendCreateProfile(n,e,t),this.receiveMessage(),n.promise}catch(n){throw n}}async resetProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)}async deleteProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)}async retrieveEnrollmentResult(e){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)}async getAllProfiles(e){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)}async getActivationPhrases(e,t){this.voiceProfileType=e.toString();const r=this.connectImpl();try{const n=new i.Deferred;return await r,await this.sendPhrasesRequest(n,e,t),this.receiveMessage(),n.promise}catch(n){throw n}}async enrollProfile(e){this.voiceProfileType=e.profileType.toString();const t=new i.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const r=this.connectImpl(),o=this.sendPreAudioMessages(e,t),a=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),c=await this.privSpeakerAudioSource.format,u=await this.privSpeakerAudioSource.deviceInfo,l=new n.ReplayableAudioNode(a,c.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:u};try{await r,await o}catch(d){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,d)}const h=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h),this.receiveMessage();return this.sendAudio(l).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)})),t.promise}async sendPreAudioMessages(e,t){const r=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),await this.sendBaseRequest(r,"enroll",this.scenarioFrom(e.profileType),e)}async sendPhrasesRequest(e,t,r){const n=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const s={locale:r,scenario:this.scenarioFrom(t)};return n.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))}async sendCreateProfile(e,t,r){const n=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const o={locale:r,number:"1",scenario:t===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"};return n.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))}async sendCommonRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n=this.connectImpl();try{const s=new i.Deferred;this.privRequestSession.onSpeechContext(),await n;const o=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,s),await this.sendBaseRequest(o,e,this.scenarioFrom(t),r),this.receiveMessage(),s.promise}catch(s){throw s}}async sendBaseRequest(e,t,r,n){const s={scenario:r};return n?s.profileIds=[n.profileId]:s.maxPageSize=-1,e.send(new a.SpeechConnectionMessage(i.MessageType.Text,"speaker.profile.".concat(t),this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile get activation phrases request for requestID ".concat(t," not found"));if("success"!==e.status.statusCode.toLowerCase()){const r=s.ResultReason.Canceled,n=new s.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,n)}else{if(!(e.phrases&&e.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const r=s.ResultReason.EnrollingVoiceProfile,n=new s.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,n)}}}handleCreateResponse(e,t){if(!(e.profiles&&e.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const r=e.profiles.map((e=>e.profileId));this.privDeferralMap.complete(t,r)}}handleResultResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const r="delete"===e.operation.toLowerCase()?s.ResultReason.DeletedVoiceProfile:s.ResultReason.ResetVoiceProfile,n="success"===e.status.statusCode.toLowerCase()?r:s.ResultReason.Canceled,i=new s.VoiceProfileResult(n,"statusCode: ".concat(e.status.statusCode,", errorDetails: ").concat(e.status.reason));this.privDeferralMap.complete(t,i)}}handleFetchResponse(e,t){if(!this.privDeferralMap.getId(t)||!e.profiles[0])throw new Error("Voice Profile fetch request for requestID ".concat(t," not found"));if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const r=e.profiles[0],n=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollmentStatus),JSON.stringify(r),e.status.reason);this.privDeferralMap.complete(t,n)}else if(e.profiles.length>0){const r=e.profiles,n=[];for(const t of r)n.push(new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,n)}}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return s.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return s.ResultReason.Canceled;default:return s.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}t.VoiceServiceRecognizer=c},3444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;const n=r(2307);t.WebsocketMessageFormatter=class{toConnectionMessage(e){const t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){const r=e.textContent;let i={},s=null;if(r){const e=r.split("\r\n\r\n");e&&e.length>0&&(i=this.parseHeaders(e[0]),e.length>1&&(s=e[1]))}t.resolve(new n.ConnectionMessage(e.messageType,s,i,e.id))}else if(e.messageType===n.MessageType.Binary){const r=e.binaryContent;let i={},s=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(r),a=o.getInt16(0);if(r.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let e=0;e<a;e++)c+=String.fromCharCode(o.getInt8(e+2));i=this.parseHeaders(c),r.byteLength>a+2&&(s=r.slice(2+a)),t.resolve(new n.ConnectionMessage(e.messageType,s,i,e.id))}}catch(r){t.reject("Error formatting the message. Error: ".concat(r))}return t.promise}fromConnectionMessage(e){const t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){const r="".concat(this.makeHeaders(e)).concat("\r\n").concat(e.textBody?e.textBody:"");t.resolve(new n.RawWebsocketMessage(n.MessageType.Text,r,e.id))}else if(e.messageType===n.MessageType.Binary){const r=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(r),o=new Int8Array(s),a=o.byteLength,c=new Int8Array(2+a+(i?i.byteLength:0));if(c[0]=a>>8&255,c[1]=255&a,c.set(o,2),i){const e=new Int8Array(i);c.set(e,2+a)}const u=c.buffer;t.resolve(new n.RawWebsocketMessage(n.MessageType.Binary,u,e.id))}}catch(r){t.reject("Error formatting the message. ".concat(r))}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const r in e.headers)r&&(t+="".concat(r,": ").concat(e.headers[r]).concat("\r\n"));return t}parseHeaders(e){const t={};if(e){const r=e.match(/[^\r\n]+/g);if(t)for(const e of r)if(e){const r=e.indexOf(":"),n=r>0?e.substr(0,r).trim().toLowerCase():e,i=r>0&&e.length>r+1?e.substr(r+1).trim():"";t[n]=i}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),r=new DataView(t);for(let n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t}}},2274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;const n=r(333);class i extends n.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.EventType.Info),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}t.AudioSourceEvent=i;t.AudioSourceInitializingEvent=class extends i{constructor(e){super("AudioSourceInitializingEvent",e)}};t.AudioSourceReadyEvent=class extends i{constructor(e){super("AudioSourceReadyEvent",e)}};t.AudioSourceOffEvent=class extends i{constructor(e){super("AudioSourceOffEvent",e)}};t.AudioSourceErrorEvent=class extends i{constructor(e,t){super("AudioSourceErrorEvent",e,n.EventType.Error),this.privError=t}get error(){return this.privError}};class s extends i{constructor(e,t,r){super(e,t),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}t.AudioStreamNodeEvent=s;t.AudioStreamNodeAttachingEvent=class extends s{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}};t.AudioStreamNodeAttachedEvent=class extends s{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}};t.AudioStreamNodeDetachedEvent=class extends s{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}};t.AudioStreamNodeErrorEvent=class extends s{constructor(e,t,r){super("AudioStreamNodeErrorEvent",e,t),this.privError=r}get error(){return this.privError}}},9862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;const n=r(2307);class i extends n.PlatformEvent{constructor(e){super("BackgroundEvent",n.EventType.Error),this.privError=e}get error(){return this.privError}}t.BackgroundEvent=i},1345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;const n=r(2307);class i extends n.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const r=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),n=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,r+t));n.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,t+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}t.ChunkedArrayBufferStream=i},7811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;const n=r(333);class i extends n.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.EventType.Info),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}t.ServiceEvent=i;class s extends n.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.EventType.Info),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}t.ConnectionEvent=s;t.ConnectionStartEvent=class extends s{constructor(e,t,r){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}};t.ConnectionEstablishedEvent=class extends s{constructor(e){super("ConnectionEstablishedEvent",e)}};t.ConnectionClosedEvent=class extends s{constructor(e,t,r){super("ConnectionClosedEvent",e,n.EventType.Debug),this.privReason=r,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionErrorEvent=class extends s{constructor(e,t,r){super("ConnectionErrorEvent",e,n.EventType.Debug),this.privMessage=t,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}};t.ConnectionEstablishErrorEvent=class extends s{constructor(e,t,r){super("ConnectionEstablishErrorEvent",e,n.EventType.Error),this.privStatusCode=t,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionMessageReceivedEvent=class extends s{constructor(e,t,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};t.ConnectionMessageSentEvent=class extends s{constructor(e,t,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},2771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const n=r(8446),i=r(9463);var s;!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(s=t.MessageType||(t.MessageType={}));t.ConnectionMessage=class{constructor(e,t,r,o){if(this.privBody=null,e===s.Text&&t&&"string"!==typeof t)throw new n.InvalidOperationError("Payload must be a string");if(e===s.Binary&&t&&!(t instanceof ArrayBuffer))throw new n.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=r||{},this.privId=o||i.createNoDashGuid(),this.messageType){case s.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case s.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===s.Binary)throw new n.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===s.Text)throw new n.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}},4941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;t.ConnectionOpenResponse=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}},7155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferralMap=void 0;t.DeferralMap=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}}},323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;const n=r(333);class i extends n.PlatformEvent{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.EventType.Info)}}t.DialogEvent=i;t.SendingAgentContextMessageEvent=class extends i{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}},8446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;class r extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}t.ArgumentNullError=r;class n extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}t.InvalidOperationError=n;class i extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}t.ObjectDisposedError=i},385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;const n=r(8446),i=r(9463);t.EventSource=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new n.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=i.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach((t=>e.onEvent(t)))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach((t=>e.onEvent(t))),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},7807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const n=r(8446),i=r(385);class s{static setEventSource(e){if(!e)throw new n.ArgumentNullError("eventSource");s.privInstance=e}static get instance(){return s.privInstance}}t.Events=s,s.privInstance=new i.EventSource},2307:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2274),t),i(r(7811),t),i(r(2771),t),i(r(4941),t),i(r(7155),t),i(r(323),t),i(r(8446),t),i(r(7807),t),i(r(385),t),i(r(9463),t),i(r(2188),t),i(r(3151),t),i(r(2064),t),i(r(3643),t),i(r(9973),t),i(r(5047),t),i(r(5670),t),i(r(125),t),i(r(4474),t),i(r(6959),t),i(r(2670),t),i(r(333),t),i(r(553),t),i(r(2091),t),i(r(7252),t),i(r(3071),t),i(r(7722),t);var s=r(5253);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return s.TranslationStatus}}),i(r(1345),t),i(r(2537),t),i(r(699),t),i(r(6002),t),i(r(9862),t)},9463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;const n=r(177),i=()=>n.v4();t.createGuid=i;t.createNoDashGuid=()=>i().replace(new RegExp("-","g"),"").toUpperCase()},2537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))},2064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9973:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},125:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;const n=r(8446);class i{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach((t=>{e.push(t)})),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let r=0;r<this.privList.length;r++)t.push(e(this.privList[r],r));return new i(t)}where(e){this.throwIfDisposed();const t=new i;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&t.add(this.privList[r]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new i(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy(((t,r)=>e(r,t)))}clone(){return this.throwIfDisposed(),new i(this.toArray())}concat(e){return this.throwIfDisposed(),new i(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new i(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new n.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}t.List=i},6002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdateCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;const n=r(333);class i extends n.PlatformEvent{constructor(e,t,r){super(e,t),this.privSignature=r}}t.OCSPEvent=i;t.OCSPMemoryCacheHitEvent=class extends i{constructor(e){super("OCSPMemoryCacheHitEvent",n.EventType.Debug,e)}};t.OCSPCacheMissEvent=class extends i{constructor(e){super("OCSPCacheMissEvent",n.EventType.Debug,e)}};t.OCSPDiskCacheHitEvent=class extends i{constructor(e){super("OCSPDiskCacheHitEvent",n.EventType.Debug,e)}};t.OCSPCacheUpdateNeededEvent=class extends i{constructor(e){super("OCSPCacheUpdateNeededEvent",n.EventType.Debug,e)}};t.OCSPMemoryCacheStoreEvent=class extends i{constructor(e){super("OCSPMemoryCacheStoreEvent",n.EventType.Debug,e)}};t.OCSPDiskCacheStoreEvent=class extends i{constructor(e){super("OCSPDiskCacheStoreEvent",n.EventType.Debug,e)}};t.OCSPCacheUpdateCompleteEvent=class extends i{constructor(e){super("OCSPCacheUpdateCompleteEvent",n.EventType.Debug,e)}};t.OCSPStapleReceivedEvent=class extends i{constructor(){super("OCSPStapleReceivedEvent",n.EventType.Debug,"")}};t.OCSPWSUpgradeStartedEvent=class extends i{constructor(e){super("OCSPWSUpgradeStartedEvent",n.EventType.Debug,e)}};t.OCSPCacheEntryExpiredEvent=class extends i{constructor(e,t){super("OCSPCacheEntryExpiredEvent",n.EventType.Debug,e),this.privExpireTime=t}};t.OCSPCacheEntryNeedsRefreshEvent=class extends i{constructor(e,t,r){super("OCSPCacheEntryNeedsRefreshEvent",n.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=t}};t.OCSPCacheHitEvent=class extends i{constructor(e,t,r){super("OCSPCacheHitEvent",n.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}};t.OCSPVerificationFailedEvent=class extends i{constructor(e,t){super("OCSPVerificationFailedEvent",n.EventType.Debug,e),this.privError=t}};t.OCSPCacheFetchErrorEvent=class extends i{constructor(e,t){super("OCSPCacheFetchErrorEvent",n.EventType.Debug,e),this.privError=t}};t.OCSPResponseRetrievedEvent=class extends i{constructor(e){super("OCSPResponseRetrievedEvent",n.EventType.Debug,e)}};t.OCSPCacheUpdateErrorEvent=class extends i{constructor(e,t){super("OCSPCacheUpdateErrorEvent",n.EventType.Debug,e),this.privError=t}}},333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const n=r(9463);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(t.EventType||(t.EventType={}));t.PlatformEvent=class{constructor(e,t){this.privName=e,this.privEventId=n.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},553:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r=t.PromiseState||(t.PromiseState={}));class n{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on((e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)}),(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)}))}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=n;class i{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}t.PromiseResultEventSource=i;t.Deferred=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}};t.Sink=class{constructor(){this.privState=r.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new i,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==r.None)throw new Error("'Cannot resolve a completed promise'");this.privState=r.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==r.None)throw new Error("'Cannot reject a completed promise'");this.privState=r.Rejected,this.privPromiseResultEvents.setError(e);for(const t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,t){null==e&&(e=()=>{}),this.privState===r.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===r.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===r.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())}executeSuccessCallback(e,t,r){try{t(e)}catch(n){this.executeErrorCallback("'Unhandled callback error: ".concat(n,"'"),r)}}executeErrorCallback(e,t){if(!t)throw new Error("'Unhandled error: ".concat(e,"'"));try{t(e)}catch(r){throw new Error("'Unhandled callback error: ".concat(r,". InnerError: ").concat(e,"'"))}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},t.marshalPromiseToCallbacks=function(e,t,r){e.then((e=>{try{t&&t(e)}catch(n){if(r)try{if(n instanceof Error){const e=n;r(e.name+": "+e.message)}else r(n)}catch(n){}}}),(e=>{if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}}))}},2091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;const n=r(8446),i=r(2670),s=r(553);var o;!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(o||(o={}));t.Queue=class{constructor(e){this.privPromiseStore=new i.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new i.List,this.privDetachables=[],this.privSubscribers=new i.List,this.privDetachables.push(this.privList.onAdded((()=>this.drain())))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise((t=>t(e))))}enqueueFromPromise(e){this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(()=>{}))}dequeue(){this.throwIfDispose();const e=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:o.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}async drainAndDispose(e,t){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;){r.removeFirst().deferral.resolve(void 0)}this.privSubscribers===r&&(this.privSubscribers=r)}for(const e of this.privDetachables)await e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach((t=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===o.Peek)r.deferral.resolve(t.first());else{const e=t.removeFirst();r.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new n.InvalidOperationError(this.privDisposeReason);throw new n.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new n.InvalidOperationError("Queue disposing")}}},7252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;const n=r(2771),i=r(8446),s=r(9463);t.RawWebsocketMessage=class{constructor(e,t,r){if(this.privPayload=null,!t)throw new i.ArgumentNullError("payload");if(e===n.MessageType.Binary&&"ArrayBuffer"!==Object.getPrototypeOf(t).constructor.name)throw new i.InvalidOperationError("Payload must be ArrayBuffer");if(e===n.MessageType.Text&&"string"!==typeof t)throw new i.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||s.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===n.MessageType.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===n.MessageType.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}},3071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;t.RiffPcmEncoder=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const r=2*t.length,n=new ArrayBuffer(r),i=new DataView(n);return this.floatTo16BitPCM(i,0,t),n}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}floatTo16BitPCM(e,t,r){for(let n=0;n<r.length;n++,t+=2){const i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}downSampleAudioFrame(e,t,r){if(!e)return null;if(r===t||r>t)return e;const n=t/r,i=Math.round(e.length/n),s=new Float32Array(i);let o=0,a=0;for(;a<i;){const t=Math.round((a+1)*n);let r=0,i=0;for(;o<t&&o<e.length;)r+=e[o++],i++;s[a++]=r/i}return s}}},7722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;const n=r(8446),i=r(9463),s=r(2091);t.Stream=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||i.createNoDashGuid(),this.privReaderQueue=new s.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(t){}}read(){if(this.privIsReadEnded)throw new n.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then((async e=>((void 0===e||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e)))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new n.InvalidOperationError("Stream closed")}}},7354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;t.StringUtils=class{static formatString(e,t){if(!e)return"";if(!t)return e;let r="",n="";const i=e=>{r+=e},s=e=>{n+=e};let o=i;for(let a=0;a<e.length;a++){const c=e[a],u=a+1<e.length?e[a+1]:"";switch(c){case"{":"{"===u?(o("{"),a++):o=s;break;case"}":"}"===u?(o("}"),a++):(t.hasOwnProperty(n)&&(r+=t[n]),o=i,n="");break;default:o(c)}}return r}}},699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;class r{static load(){const e=new Map([[0,()=>{}]]),t=new Map,n="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),i=new Worker(n);i.addEventListener("message",(n=>{let{data:i}=n;if(r.isCallNotification(i)){const{params:{timerId:r}}=i,n=e.get(r);if("number"===typeof n){const e=t.get(n);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if("undefined"===typeof n)throw new Error("The timer is in an undefined state.");n(),e.delete(r)}}else{if(!r.isClearResponse(i)){const{error:{message:e}}=i;throw new Error(e)}{const{id:r}=i,n=t.get(r);if(void 0===n)throw new Error("The timer is in an undefined state.");t.delete(r),e.delete(n)}}}));return{clearTimeout:r=>{const n=Math.random();t.set(n,r),e.set(r,n),i.postMessage({id:n,method:"clear",params:{timerId:r}})},setTimeout:(t,r)=>{const n=Math.random();return e.set(n,t),i.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n}}),n}}}static loadWorkerTimers(){return()=>(null!==r.workerTimers||(r.workerTimers=r.load()),r.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"===typeof e.id}}t.Timeout=r,r.workerTimers=null,r.clearTimeout=e=>r.timers().clearTimeout(e),r.setTimeout=(e,t)=>r.timers().setTimeout(e,t),r.timers=r.loadWorkerTimers()},840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;t.ActivityReceivedEventArgs=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},6782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;const n=r(2277),i=r(260),s=r(8040),o=r(8777),a=r(6182),c=r(9709);class u{static fromDefaultMicrophoneInput(){const e=new n.PcmRecorder(!0);return new l(new n.MicAudioSource(e))}static fromMicrophoneInput(e){const t=new n.PcmRecorder(!0);return new l(new n.MicAudioSource(t,e))}static fromWavFileInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamedBuffer.wav";return new l(new n.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof s.PullAudioInputStreamCallback)return new l(new a.PullAudioInputStreamImpl(e));if(e instanceof s.AudioInputStream)return new l(e);if("undefined"!==typeof MediaStream&&e instanceof MediaStream){const t=new n.PcmRecorder(!1);return new l(new n.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new h(new s.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return u.fromDefaultSpeakerOutput();if(e instanceof s.SpeakerAudioDestination)return new h(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new h(new o.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof s.PushAudioOutputStreamCallback)return new h(new c.PushAudioOutputStreamImpl(e));if(e instanceof s.PushAudioOutputStream)return new h(e);if(e instanceof s.PullAudioOutputStream)return new h(e);throw new Error("Not Supported Type")}}t.AudioConfig=u;class l extends u{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(i.Contracts.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}t.AudioConfigImpl=l;class h extends u{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}t.AudioOutputConfigImpl=h},8777:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;const o=s(r(952)),a=r(260);t.AudioFileWriter=class{constructor(e){a.Contracts.throwIfNullOrUndefined(o.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=o.openSync(e,"w")}set format(e){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=o.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),o.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),o.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}id(){return this.privId}}},6182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;const n=r(9859),i=r(2307),s=r(9463),o=r(8040),a=r(4175);class c{constructor(){}static createPushStream(e){return u.create(e)}static createPullStream(e,t){return h.create(e,t)}}t.AudioInputStream=c;class u extends c{static create(e){return new l(e)}}t.PushAudioInputStream=u;class l extends u{constructor(e){super(),this.privFormat=void 0===e?a.AudioStreamFormatImpl.getDefaultInputFormat():e,this.privEvents=new i.EventSource,this.privId=s.createNoDashGuid(),this.privStream=new i.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(e){this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn();const t=this.privStream;return this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>t.read()}}detach(e){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:n.type.Stream})}onEvent(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let n=0;n<t.length;++n)t[n]=r[n];return t}}t.PushAudioInputStreamImpl=l;class h extends c{constructor(){super()}static create(e,t){return new d(e,t)}}t.PullAudioInputStream=h;class d extends h{constructor(e,t){super(),this.privFormat=void 0===t?o.AudioStreamFormat.getDefaultInputFormat():t,this.privEvents=new i.EventSource,this.privId=s.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))}async attach(e){return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn(),this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const r=new ArrayBuffer(this.privBufferSize-t),n=this.privCallback.read(r);if(void 0===e)e=r;else{new Int8Array(e).set(new Int8Array(r),t)}if(0===n)break;t+=n}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}detach(e){this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:n.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:n.type.Stream})}onEvent(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)}}t.PullAudioInputStreamImpl=d},7810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;const n=r(8765),i=r(4175);class s extends i.AudioStreamFormatImpl{constructor(e,t,r,n,i,s,o,a,c){super(r,s,t,e),this.formatTag=e,this.avgBytesPerSec=n,this.blockAlign=i,this.priAudioFormatString=o,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?s.getDefaultOutputFormat():s.fromSpeechSynthesisOutputFormatString(s.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new s(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new s(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new s(i.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new s(i.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new s(i.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new s(i.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new s(i.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new s(i.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new s(i.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new s(i.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new s(i.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new s(i.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new s(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new s(i.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new s(i.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new s(i.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return s.fromSpeechSynthesisOutputFormatString("undefined"!==typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}t.AudioOutputFormatImpl=s,s.SpeechSynthesisOutputFormatToString={[n.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[n.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[n.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[n.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[n.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[n.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[n.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[n.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[n.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[n.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[n.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[n.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[n.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[n.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[n.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[n.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[n.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[n.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[n.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[n.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},9709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;const n=r(2307),i=r(260),s=r(7810);class o{constructor(){}static createPullStream(){return a.create()}}t.AudioOutputStream=o;class a extends o{static create(){return new c}}t.PullAudioOutputStream=a;class c extends a{constructor(){super(),this.privId=n.createNoDashGuid(),this.privStream=new n.Stream}set format(e){void 0!==e&&null!==e||(this.privFormat=s.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const t=new Int8Array(e);let r=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const n=await this.privStream.read();if(void 0===n||n.isEnd)this.privStream.readEnded();else{let i;n.buffer.byteLength>e.byteLength-r?(i=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):i=n.buffer,t.set(new Int8Array(i),r),r+=i.byteLength}}return r}write(e){i.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}t.PullAudioOutputStreamImpl=c;class u extends o{constructor(){super()}static create(e){return new l(e)}}t.PushAudioOutputStream=u;class l extends u{constructor(e){super(),this.privId=n.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}t.PushAudioOutputStreamImpl=l},4175:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(r=t.AudioFormatTag||(t.AudioFormatTag={}));class n{static getDefaultInputFormat(){return i.getDefaultInputFormat()}static getWaveFormat(e,t,r,n){return new i(e,t,r,n)}static getWaveFormatPCM(e,t,r){return new i(e,t,r)}}t.AudioStreamFormat=n;class i extends n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.PCM;super();let s=!0;switch(i){case r.PCM:this.formatTag=1;break;case r.ALaw:this.formatTag=6;break;case r.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new i}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}}t.AudioStreamFormatImpl=i},4902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;const n=r(8446),i=r(8040),s=r(4175);t.BaseAudioPlayer=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=i.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,r){try{this.ensureInitializedContext();const r=this.formatAudioData(e),n=new Float32Array(this.samples.length+r.length);n.set(this.samples,0),n.set(r,this.samples.length),this.samples=n,t&&t()}catch(n){r&&r(n)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),e)}}createAudioContext(){this.audioContext=s.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new n.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const r=new Float32Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let i=0;i<e;i++){let t=i;const r=n.getChannelData(i);for(let n=0;n<this.samples.length;n++,t+=e)r[n]=this.samples[t]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}async playAudio(e){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),r=this.audioContext.destination;await this.audioContext.decodeAudioData(e,(e=>{t.buffer=e,t.connect(r),t.start(0)}))}}},7014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;t.PullAudioInputStreamCallback=class{}},8626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;t.PushAudioOutputStreamCallback=class{}},9553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;const n=r(2307),i=r(9709),s=r(4175),o={[s.AudioFormatTag.PCM]:"audio/wav",[s.AudioFormatTag.MuLaw]:"audio/x-wav",[s.AudioFormatTag.MP3]:"audio/mpeg",[s.AudioFormatTag.OGG_OPUS]:"audio/ogg",[s.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[s.AudioFormatTag.ALaw]:"audio/x-wav",[s.AudioFormatTag.FLAC]:"audio/flac"};t.SpeakerAudioDestination=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||n.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{r&&r(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream&&"undefined"!==typeof window)if(this.privFormat.formatTag!==s.AudioFormatTag.PCM&&this.privFormat.formatTag!==s.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==s.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then((()=>{r=this.privFormat.addHeader(r);const n=new Blob([r],{type:o[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(n),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!==typeof AudioContext||"undefined"!==typeof window&&"undefined"!==typeof window.webkitAudioContext){this.privFormat=e;const t=o[this.privFormat.formatTag];void 0===t?console.warn("Unknown mimeType for format ".concat(s.AudioFormatTag[this.privFormat.formatTag],"; playback is not supported.")):"undefined"!==typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch((e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))}))},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch((e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))}))},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{n.Events.instance.onEvent(new n.BackgroundEvent(e))}))):(console.warn("Format ".concat(s.AudioFormatTag[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled.")),this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(e=null===(t=this.privAudio)||void 0===t?void 0:t.volume)&&void 0!==e?e:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},9982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;const n=r(9859),i=r(260),s=r(8040),o=r(9531);class a{constructor(){this.privProperties=new s.PropertyCollection,this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=o.LanguageIdMode.AtStart}static fromOpenRange(){const e=new a;return e.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){i.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new a;return t.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new a,r=[];return e.forEach((e=>{if(r.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const r=e.language+s.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(r,e.endpointId)}})),t.properties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),t}get properties(){return this.privProperties}set mode(e){e===o.LanguageIdMode.Continuous?(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}}t.AutoDetectSourceLanguageConfig=a},6481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;const n=r(260);class i{constructor(e,t){n.Contracts.throwIfNullOrUndefined(e,"language"),n.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new i(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new i(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}t.AutoDetectSourceLanguageResult=i},4572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarConfig=void 0;const n=r(260),i=r(8040);t.AvatarConfig=class{constructor(e,t,r){this.privCustomized=!1,n.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=t,void 0===r&&(r=new i.AvatarVideoFormat),this.videoFormat=r}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}}},6669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(e){e.SwitchedToSpeaking="SwitchedToSpeaking",e.SwitchedToIdle="SwitchedToIdle",e.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));t.AvatarEventArgs=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}},5886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesizer=void 0;const n=r(3344),i=r(9859),s=r(2307),o=r(7810),a=r(8040),c=r(260),u=r(8021);class l extends a.Synthesizer{constructor(e,t){super(e),c.Contracts.throwIfNullOrUndefined(t,"avatarConfig"),this.privConnectionFactory=new n.SpeechSynthesisConnectionFactory,this.privAvatarConfig=t,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=o.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(e){c.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,c.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const t=new s.Deferred;e.onicegatheringstatechange=()=>{s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,s.EventType.Debug)),"complete"===e.iceGatheringState&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering complete.",s.EventType.Info)),t.resolve())},e.onicecandidate=e=>{e.candidate?s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: "+e.candidate.candidate,s.EventType.Debug)):(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice candidate: complete",s.EventType.Debug)),t.resolve())},setTimeout((()=>{"complete"!==e.iceGatheringState&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering timeout.",s.EventType.Warning)),t.resolve())}),2e3);const r=await e.createOffer();await e.setLocalDescription(r),await t.promise,s.Events.instance.onEvent(new s.PlatformEvent("peer connection: got local SDP.",s.EventType.Info)),this.privProperties.setProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));const n=await this.speak("",!1);if(n.reason!==a.ResultReason.SynthesizingAudioCompleted)return new a.SynthesisResult(n.resultId,n.reason,n.errorDetails,n.properties);const i=atob(n.properties.getProperty(a.PropertyId.TalkingAvatarService_WebRTC_SDP)),o=new RTCSessionDescription(JSON.parse(i));return await e.setRemoteDescription(o),new a.SynthesisResult(n.resultId,n.reason,void 0,n.properties)}async speakTextAsync(e){const t=await this.speak(e,!1);return new a.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}async speakSsmlAsync(e){const t=await this.speak(e,!0);return new a.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;){(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.")}return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return c.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,t,r){return new i.AvatarSynthesisAdapter(e,t,r,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){const t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}async speak(e,t){const r=s.createNoDashGuid(),n=new s.Deferred;return this.synthesisRequestQueue.enqueue(new u.SynthesisRequest(r,e,t,(e=>{n.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()}),(e=>{n.reject(e),this.privSynthesizing=!1}))),this.adapterSpeak(),n.promise}}t.AvatarSynthesizer=l},7996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarVideoFormat=t.Coordinate=void 0;t.Coordinate=class{constructor(e,t){this.x=e,this.y=t}};t.AvatarVideoFormat=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"H264",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e6,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1920,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1080;this.codec=e,this.bitrate=t,this.width=r,this.height=n}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}}},6222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWebRTCConnectionResult=void 0;const n=r(8040);class i extends n.SynthesisResult{constructor(e,t,r,n,i){super(t,r,n,i),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}}t.AvatarWebRTCConnectionResult=i},6566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;const n=r(260),i=r(3542),s=r(8040);class o extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,r){n.Contracts.throwIfNullOrWhitespace(e,"subscription"),n.Contracts.throwIfNullOrWhitespace(t,"region");const o=new i.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),o.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r&&o.setProperty(s.PropertyId.Conversation_ApplicationId,r),o}static fromAuthorizationToken(e,t,r){n.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(t,"region");const o=new i.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),o.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r&&o.setProperty(s.PropertyId.Conversation_ApplicationId,r),o}static fromHost(e,t,r){n.Contracts.throwIfNullOrUndefined(e,"host");const o=e instanceof URL?e:new URL("wss://".concat(e,".convai.speech.azure.us"));n.Contracts.throwIfNullOrUndefined(o,"resolvedHost");const a=new i.DialogServiceConfigImpl;return a.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(s.PropertyId.SpeechServiceConnection_Host,o.toString()),void 0!==t&&a.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),a}static fromEndpoint(e,t){n.Contracts.throwIfNull(e,"endpoint");const r=new i.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r}}t.BotFrameworkConfig=o},4148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;const n=r(9859),i=r(8293),s=r(8040);class o extends i.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(e){let t=s.CancellationReason.Error,r=s.CancellationErrorCode.NoError;if(e instanceof s.RecognitionResult&&e.json){const r=n.SimpleSpeechPhrase.fromJSON(e.json);t=n.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus)}return e.properties&&(r=s.CancellationErrorCode[e.properties.getProperty(n.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new o(t,e.errorDetails||n.EnumTranslation.implTranslateErrorDetails(r),r)}}t.CancellationDetails=o},8293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;t.CancellationDetailsBase=class{constructor(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}},372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))},8706:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;const n=r(8040);class i extends n.RecognitionEventArgs{constructor(e,t,r,n,i){super(n,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.CancellationEventArgsBase=i},2096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))},4931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const n=r(9859),i=r(2307),s=r(344),o=r(260),a=r(8040);class c{static fromRecognizer(e){const t=e.internalData,r=new c;return r.privInternalData=t,r.setupEvents(),r}static fromSynthesizer(e){const t=e.internalData,r=new c;return r.privInternalData=t,r.setupEvents(),r}openConnection(e,t){i.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof n.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");i.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,r){if(o.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof n.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,r)}else if(this.privInternalData instanceof n.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,r)}}sendMessageAsync(e,t,r,n){i.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),r,n)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new s.ConnectionMessageImpl(e.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(e.jsonString,e.name))}))}}t.Connection=c},5850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{}t.ConnectionEventArgs=i},344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;const n=r(8643),i=r(2307),s=r(6058),o=r(1743);t.ConnectionMessage=class{};t.ConnectionMessageImpl=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new s.PropertyCollection,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]&&this.privProperties.setProperty(o.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((e=>e.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===i.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===i.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},6471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;t.ConnectionMessageEventArgs=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;class r{static throwIfNullOrUndefined(e,t){if(void 0===e||null===e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,n){if(r.throwIfNullOrUndefined(e,t),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,t,n){if(r.throwIfNullOrUndefined(e,t),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(r.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const n of e)r.throwIfNullOrWhitespace(n,t)}static throwIfFileDoesNotExist(e,t){r.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}t.Contracts=r},684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;const n=r(8706);class i extends n.CancellationEventArgsBase{}t.ConversationTranscriptionCanceledEventArgs=i},980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;const n=r(260),i=r(3542),s=r(8040);class o extends i.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,r){n.Contracts.throwIfNullOrWhitespace(e,"applicationId"),n.Contracts.throwIfNullOrWhitespace(t,"subscription"),n.Contracts.throwIfNullOrWhitespace(r,"region");const o=new i.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(s.PropertyId.Conversation_ApplicationId,e),o.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),o.setProperty(s.PropertyId.SpeechServiceConnection_Region,r),o}static fromAuthorizationToken(e,t,r){n.Contracts.throwIfNullOrWhitespace(e,"applicationId"),n.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),n.Contracts.throwIfNullOrWhitespace(r,"region");const o=new i.DialogServiceConfigImpl;return o.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),o.setProperty(s.PropertyId.Conversation_ApplicationId,e),o.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,t),o.setProperty(s.PropertyId.SpeechServiceConnection_Region,r),o}set applicationId(e){n.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(s.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(s.PropertyId.Conversation_ApplicationId)}}t.CustomCommandsConfig=o},2999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const n=r(2277),i=r(2307);class s{static SetLoggingLevel(e){this.privListener=new n.ConsoleLoggingListener(e),i.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"!==typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}}t.Diagnostics=s,s.privListener=void 0},3542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;const n=r(260),i=r(8040);class s{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}t.DialogServiceConfig=s;t.DialogServiceConfigImpl=class extends s{constructor(){super(),this.privSpeechConfig=new i.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){n.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,r,n){this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPort,"".concat(t)),r&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName,r),n&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword,n)}setServiceProperty(e,t,r){this.privSpeechConfig.setServiceProperty(e,t)}close(){}}},4229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;const n=r(8401),i=r(9859),s=r(2307),o=r(260),a=r(8040),c=r(1743);class u extends a.Recognizer{constructor(e,t){const r=e;o.Contracts.throwIfNull(e,"dialogConfig"),super(t,r.properties,new n.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();const i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}connect(e,t){s.marshalPromiseToCallbacks(this.privReco.connect(),e,t)}disconnect(e,t){s.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(c.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(c.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){o.Contracts.throwIfDisposed(this.privIsDisposed);const r=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const e=new s.Deferred;await this.privReco.recognize(i.RecognitionMode.Conversation,e.resolve,e.reject);const t=await e.promise;return await this.implRecognizerStop(),t})();r.catch((()=>{this.dispose(!0).catch((()=>{}))})),s.marshalPromiseToCallbacks(r.finally((()=>{this.isTurnComplete=!0})),e,t)}}sendActivityAsync(e,t,r){s.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,r)}close(e,t){o.Contracts.throwIfDisposed(this.privIsDisposed),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privIsDisposed||e&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(e))}createRecognizerConfig(e){return new i.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,n){const s=r;return new i.DialogServiceAdapter(e,t,s,n,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(c.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(c.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(c.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}t.DialogServiceConnector=u},8040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6782);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return n.AudioConfig}});var i=r(4175);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return i.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return i.AudioFormatTag}});var s=r(6182);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return s.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return s.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return s.PushAudioInputStream}});var o=r(9709);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return o.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return o.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return o.PushAudioOutputStream}});var a=r(2096);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var c=r(7014);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var u=r(8626);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return u.PushAudioOutputStreamCallback}});var l=r(1220);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return l.KeywordRecognitionModel}});var h=r(9070);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return h.SessionEventArgs}});var d=r(8743);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return d.RecognitionEventArgs}});var p=r(3833);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var f=r(4065);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return f.IntentRecognitionEventArgs}});var v=r(7501);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return v.RecognitionResult}});var m=r(127);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var g=r(2399);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=r(590);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var w=r(1649);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return w.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return w.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return w.MeetingTranscriptionEventArgs}});var S=r(4832);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionCanceledEventArgs}});var b=r(6452);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return b.TranslationRecognitionEventArgs}});var C=r(4823);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var I=r(2936);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return I.TranslationRecognitionResult}});var E=r(3213);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return E.TranslationSynthesisResult}});var T=r(3906);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return T.ResultReason}});var P=r(3051);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return P.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return P.SpeechConfigImpl}});var R=r(3468);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return R.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return R.SpeechTranslationConfigImpl}});var _=r(6058);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return _.PropertyCollection}});var A=r(1743);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return A.PropertyId}});var k=r(8045);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return k.Recognizer}});var x=r(5411);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return x.SpeechRecognizer}});var O=r(7747);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return O.IntentRecognizer}});var D=r(8472);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return D.VoiceProfileType}});var N=r(2058);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return N.TranslationRecognizer}});var M=r(7515);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return M.Translations}});var L=r(6727);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return L.NoMatchReason}});var F=r(6501);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return F.NoMatchDetails}});var z=r(9169);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return z.TranslationRecognitionCanceledEventArgs}});var B=r(3552);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.IntentRecognitionCanceledEventArgs}});var j=r(8293);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return j.CancellationDetailsBase}});var U=r(4148);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return U.CancellationDetails}});var V=r(372);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return V.CancellationErrorCode}});var q=r(5850);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return q.ConnectionEventArgs}});var W=r(3707);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return W.ServiceEventArgs}});var H=r(4931);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return H.Connection}});var K=r(6945);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return K.PhraseListGrammar}});var G=r(3542);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return G.DialogServiceConfig}});var J=r(6566);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return J.BotFrameworkConfig}});var Q=r(980);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return Q.CustomCommandsConfig}});var Y=r(4229);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Y.DialogServiceConnector}});var X=r(840);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return X.ActivityReceivedEventArgs}});var Z=r(716);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Z.TurnStatusReceivedEventArgs}});var $=r(8282);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return $.ServicePropertyChannel}});var ee=r(94);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=r(4902);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var re=r(6471);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return re.ConnectionMessageEventArgs}});var ne=r(344);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return ne.ConnectionMessage}});var ie=r(4384);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return ie.VoiceProfile}});var se=r(6917);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return se.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return se.VoiceProfileEnrollmentCancellationDetails}});var oe=r(9941);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return oe.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileCancellationDetails}});var ae=r(7268);Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ae.VoiceProfilePhraseResult}});var ce=r(8163);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return ce.VoiceProfileClient}});var ue=r(4656);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return ue.SpeakerRecognizer}});var le=r(6031);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return le.SpeakerIdentificationModel}});var he=r(2040);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return he.SpeakerVerificationModel}});var de=r(9982);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return de.AutoDetectSourceLanguageConfig}});var pe=r(6481);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return pe.AutoDetectSourceLanguageResult}});var fe=r(7646);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return fe.SourceLanguageConfig}});var ve=r(9818);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return ve.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return ve.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return ve.SpeakerRecognitionCancellationDetails}});var me=r(5463);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return me.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return me.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return me.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return me.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return me.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return me.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return me.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return me.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return me.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return me.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return me.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return me.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return me.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return me.User}});var ge=r(8021);Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return ge.Synthesizer}});var ye=r(8765);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ye.SpeechSynthesisOutputFormat}});var we=r(9783);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return we.SpeechSynthesizer}});var Se=r(9548);Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return Se.SynthesisResult}});var be=r(8394);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return be.SpeechSynthesisResult}});var Ce=r(3289);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisEventArgs}});var Ie=r(8608);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Ie.SpeechSynthesisWordBoundaryEventArgs}});var Ee=r(4814);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ee.SpeechSynthesisBookmarkEventArgs}});var Te=r(3911);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Te.SpeechSynthesisVisemeEventArgs}});var Pe=r(9225);Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Pe.SpeechSynthesisBoundaryType}});var Re=r(2359);Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Re.SynthesisVoicesResult}});var _e=r(8833);Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return _e.VoiceInfo}});var Ae=r(9553);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Ae.SpeakerAudioDestination}});var ke=r(684);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ke.ConversationTranscriptionCanceledEventArgs}});var xe=r(6822);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return xe.MeetingTranscriptionCanceledEventArgs}});var Oe=r(175);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentGradingSystem}});var De=r(338);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return De.PronunciationAssessmentGranularity}});var Ne=r(1074);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Ne.PronunciationAssessmentConfig}});var Me=r(1045);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Me.PronunciationAssessmentResult}});var Le=r(9531);Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return Le.LanguageIdMode}});var Fe=r(4572);Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return Fe.AvatarConfig}});var ze=r(6669);Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return ze.AvatarEventArgs}});var Be=r(5886);Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return Be.AvatarSynthesizer}});var je=r(7996);Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return je.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return je.Coordinate}});var Ue=r(6222);Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Ue.AvatarWebRTCConnectionResult}});var Ve=r(2999);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return Ve.Diagnostics}});var qe=r(9099);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return qe.LogLevel}})},3552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;const n=r(8040);class i extends n.IntentRecognitionEventArgs{constructor(e,t,r,n,i,s){super(n,i,s),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.IntentRecognitionCanceledEventArgs=i},4065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;const n=r(8040);class i extends n.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}t.IntentRecognitionEventArgs=i},2399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;const n=r(8040);class i extends n.SpeechRecognitionResult{constructor(e,t,r,n,i,s,o,a,c,u,l){super(t,r,n,i,s,o,a,void 0,c,u,l),this.privIntentId=e}get intentId(){return this.privIntentId}}t.IntentRecognitionResult=i},7747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a extends o.Recognizer{constructor(e,t){s.Contracts.throwIfNullOrUndefined(e,"speechConfig");const r=e;s.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(t,r.properties,new n.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=r.properties,s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}i.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(n.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}i.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){s.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(r){t&&t(r)}}addIntent(e,t){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(t,"intentId"),s.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,r){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(e,"intentId"),s.Contracts.throwIfNull(t,"model");const i=t;s.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privAddedLmIntents[e]=new n.AddedLmIntent(i,r)}addAllIntents(e,t){s.Contracts.throwIfNull(e,"model");const r=e;s.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new n.AddedLmIntent(r,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,i){const s=r;return new n.IntentServiceRecognizer(e,t,s,i,this)}async dispose(e){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,await super.dispose(e))}buildSpeechContext(){let e,t,r;const n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const i of Object.keys(this.privAddedLmIntents)){const s=this.privAddedLmIntents[i];if(void 0===e)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=s.modelImpl.region;else if(t!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=s.modelImpl.subscriptionKey;else if(r!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const o="luis/"+e+"-PRODUCTION#"+i;n.push(o)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}}}t.IntentRecognizer=a},1220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;const n=r(260);t.KeywordRecognitionModel=class{constructor(){this.privDisposed=!1}static fromFile(e){throw n.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw n.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}},9531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))},590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;const n=r(260);class i{constructor(){}static fromEndpoint(e){n.Contracts.throwIfNull(e,"uri"),n.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new s,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);const i=e.pathname.lastIndexOf("/")+1;if(-1===i)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(i),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){n.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new s;return t.appId=e,t}static fromSubscription(e,t,r){n.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),n.Contracts.throwIfNullOrWhitespace(t,"appId"),n.Contracts.throwIfNullOrWhitespace(r,"region");const i=new s;return i.appId=t,i.region=r,i.subscriptionKey=e,i}}t.LanguageUnderstandingModel=i;class s extends i{}t.LanguageUnderstandingModelImpl=s},9099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const n=r(2307);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return n.EventType}})},6822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const n=r(8706);class i extends n.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=i},6501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;const n=r(9859),i=r(8040);class s{constructor(e){this.privReason=e}static fromResult(e){const t=n.SimpleSpeechPhrase.fromJSON(e.json);let r=i.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case n.RecognitionStatus.BabbleTimeout:r=i.NoMatchReason.InitialBabbleTimeout;break;case n.RecognitionStatus.InitialSilenceTimeout:r=i.NoMatchReason.InitialSilenceTimeout;break;default:r=i.NoMatchReason.NotRecognized}return new s(r)}get reason(){return this.privReason}}t.NoMatchDetails=s},6727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))},3833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))},6945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;class r{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new r(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}t.PhraseListGrammar=r},94:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))},1074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;const n=r(260),i=r(8040);class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.PronunciationAssessmentGradingSystem.FivePoint,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.PronunciationAssessmentGranularity.Phoneme,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new i.PropertyCollection,this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_GradingSystem,i.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Granularity,i.PronunciationAssessmentGranularity[r]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(e){n.Contracts.throwIfNullOrUndefined(e,"json");const t=new s("");return t.privProperties=new i.PropertyCollection,t.properties.setProperty(i.PropertyId.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();const t=e.internalData;t.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(i.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,t.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){n.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){n.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){const t=e?"true":"false";this.properties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,t)}get enableMiscue(){return"true"===this.properties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),r=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText);r&&(t.referenceText=r);const n=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_GradingSystem);n&&(t.gradingSystem=n);const s=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Granularity);s&&(t.granularity=s),this.privPhonemeAlphabet&&(t.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(t.nbestPhonemeCount=this.privNBestPhonemeCount),t.enableProsodyAssessment=this.privEnableProsodyAssessment,t.dimension="Comprehensive";this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue)&&(t.enableMiscue=this.enableMiscue),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))}}t.PronunciationAssessmentConfig=s},175:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))},338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))},1045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=t.ContentAssessmentResult=void 0;const n=r(260),i=r(8040);class s{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}t.ContentAssessmentResult=s;class o{constructor(e){const t=JSON.parse(e);n.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){n.Contracts.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(i.PropertyId.SpeechServiceResponse_JsonResult);return n.Contracts.throwIfNullOrUndefined(t,"json"),new o(t)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.PronScore}get completenessScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.CompletenessScore}get fluencyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.FluencyScore}get prosodyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new s(this.detailResult)}}t.PronunciationAssessmentResult=o},6058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;const n=r(8040);class i{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let r;r="string"===typeof e?e:n.PropertyId[e];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===r)return this.privValues[n];if(void 0!==t)return String(t)}setProperty(e,t){let r;r="string"===typeof e?e:n.PropertyId[e];for(let n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===r)return void(this.privValues[n]=t);this.privKeys.push(r),this.privValues.push(t)}clone(){const e=new i;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const r=this.getProperty(t);e.setProperty(t,r)}}))}get keys(){return this.privKeys}}t.PropertyCollection=i},1743:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))},8743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}t.RecognitionEventArgs=i},7501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;t.RecognitionResult=class{constructor(e,t,r,n,i,s,o,a,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=i,this.privLanguage=s,this.privLanguageDetectionConfidence=o,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},8045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a{constructor(e,t,r){this.audioConfig=void 0!==e?e:o.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}close(e,t){s.Contracts.throwIfDisposed(this.privDisposed),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privReco}async dispose(e){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return n.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){n.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const i=this.createRecognizerConfig(new n.SpeechServiceConfig(new n.Context(new n.OS(e,t,r))));this.privReco=this.createServiceRecognizer(a.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)}async recognizeOnceAsyncImpl(e){s.Contracts.throwIfDisposed(this.privDisposed);const t=new i.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(e,t.resolve,t.reject);const r=await t.promise;return await this.implRecognizerStop(),r}async startContinuousRecognitionAsyncImpl(e){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(e,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){s.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(e){const t=e.getProperty(o.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new n.CognitiveSubscriptionKeyAuthentication(t):new n.CognitiveTokenAuthentication((()=>{const t=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}),(()=>{const t=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}))}}t.Recognizer=a},3906:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))},3707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t,r){super(r),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}t.ServiceEventArgs=i},8282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))},9070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;t.SessionEventArgs=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},7646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;const n=r(260);class i{constructor(e,t){n.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new i(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}t.SourceLanguageConfig=i},6031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;const n=r(260),i=r(8040);class s{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],n.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");for(const t of e){if(t.profileType!==i.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+t.profileId);this.privVoiceProfiles.push(t),this.privProfileIds.push(t.profileId)}}static fromProfiles(e){return new s(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}t.SpeakerIdentificationModel=s},9818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const n=r(9859),i=r(8040);var s;!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(s=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));t.SpeakerRecognitionResult=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ResultReason.RecognizedSpeaker,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.CancellationErrorCode.NoError,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.privProperties=new i.PropertyCollection;const a="TextIndependentIdentification"===e.scenario?s.Identify:s.Verify;this.privReason=t,this.privReason!==i.ResultReason.Canceled?a===s.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=i.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=i.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=o,this.privProperties.setProperty(n.CancellationErrorCodePropertyName,i.CancellationErrorCode[r])),this.privProperties.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class o extends i.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=i.CancellationReason.Error;let r=i.CancellationErrorCode.NoError;return e.properties&&(r=i.CancellationErrorCode[e.properties.getProperty(n.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.NoError])]),new o(t,e.errorDetails,r)}}t.SpeakerRecognitionCancellationDetails=o},4656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;const n=r(9859),i=r(260),s=r(8040);class o extends s.Recognizer{constructor(e,t){i.Contracts.throwIfNullOrUndefined(e,"speechConfig");const r=e;i.Contracts.throwIfNullOrUndefined(r,"speechConfig"),super(t,r.properties,new n.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=t,i.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=r.properties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){i.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}async recognizeOnceAsync(e){return i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)}async close(){i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(e){i.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const t=await this.privReco.recognizeSpeaker(e);return await this.implRecognizerStop(),t}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,i){const s=r;return new n.SpeakerServiceRecognizer(e,t,s,i,this)}async dispose(e){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(e))}}t.SpeakerRecognizer=o},2040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;const n=r(260),i=r(8040);class s{constructor(e){if(n.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===i.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new s(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===i.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}t.SpeakerVerificationModel=s},3051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;const n=r(9859),i=r(260),s=r(8040);class o{constructor(){}static fromSubscription(e,t){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"region");const r=new a;return r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),r.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),r}static fromEndpoint(e,t){i.Contracts.throwIfNull(e,"endpoint");const r=new a;return r.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r}static fromHost(e,t){i.Contracts.throwIfNull(e,"hostName");const r=new a;return r.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r}static fromAuthorizationToken(e,t){i.Contracts.throwIfNull(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");const r=new a;return r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r}close(){}}t.SpeechConfig=o;class a extends o{constructor(){super(),this.privProperties=new s.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=s.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return s.OutputFormat[this.privProperties.getProperty(n.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(n.OutputFormatPropertyName,s.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){i.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,r,n){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],n)}setServiceProperty(e,t){const r=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(n.ForceDictationPropertyName,"true")}clone(){const e=new a;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])}}t.SpeechConfigImpl=a},4832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;const n=r(8706);class i extends n.CancellationEventArgsBase{}t.SpeechRecognitionCanceledEventArgs=i},1649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;const n=r(8040);class i extends n.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}t.SpeechRecognitionEventArgs=i;class s extends n.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}t.ConversationTranscriptionEventArgs=s;t.MeetingTranscriptionEventArgs=class extends i{}},127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;const n=r(8040);class i extends n.RecognitionResult{constructor(e,t,r,n,i,s,o,a,c,u,l){super(e,t,r,n,i,s,o,c,u,l),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.SpeechRecognitionResult=i},5411:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a extends o.Recognizer{constructor(e,t){const r=e;s.Contracts.throwIfNull(r,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new n.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;t.properties.mergeTo(n.properties);return new a(e,r)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple])===o.OutputFormat[o.OutputFormat.Simple]?o.OutputFormat.Simple:o.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){i.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(n.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){s.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,i){const s=r;return new n.SpeechServiceRecognizer(e,t,s,i,this)}}t.SpeechRecognizer=a},4814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;t.SpeechSynthesisBookmarkEventArgs=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},9225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))},3289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;t.SpeechSynthesisEventArgs=class{constructor(e){this.privResult=e}get result(){return this.privResult}}},8765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))},8394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;const n=r(8040);class i extends n.SynthesisResult{constructor(e,t,r,n,i,s){super(e,t,n,i),this.privAudioData=r,this.privAudioDuration=s}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}t.SpeechSynthesisResult=i},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;t.SpeechSynthesisVisemeEventArgs=class{constructor(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},8608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;t.SpeechSynthesisWordBoundaryEventArgs=class{constructor(e,t,r,n,i,s){this.privAudioOffset=e,this.privDuration=t,this.privText=r,this.privWordLength=n,this.privTextOffset=i,this.privBoundaryType=s}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},9783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesizer=void 0;const n=r(9859),i=r(2307),s=r(8777),o=r(7810),a=r(9709),c=r(260),u=r(8040),l=r(8021);class h extends u.Synthesizer{constructor(e,t){super(e),null!==t&&(this.audioConfig=void 0===t?"undefined"===typeof window?void 0:u.AudioConfig.fromDefaultSpeakerOutput():t),this.privConnectionFactory=new n.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new h(e,r)}speakTextAsync(e,t,r,n){this.speakImpl(e,!1,t,r,n)}speakSsmlAsync(e,t,r,n){this.speakImpl(e,!0,t,r,n)}async getVoicesAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getVoices(e)}close(e,t){c.Contracts.throwIfDisposed(this.privDisposed),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,t,r){return new n.SpeechSynthesisAdapter(e,t,r,this,this.audioConfig)}createRestSynthesisAdapter(e,t){return new n.SynthesisRestAdapter(t,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=o.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(u.SpeechSynthesisOutputFormat[this.properties.getProperty(u.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,r,n,o){try{c.Contracts.throwIfDisposed(this.privDisposed);const h=i.createNoDashGuid();let d;d=o instanceof u.PushAudioOutputStreamCallback?new a.PushAudioOutputStreamImpl(o):o instanceof u.PullAudioOutputStream?o:void 0!==o?new s.AudioFileWriter(o):void 0,this.synthesisRequestQueue.enqueue(new l.SynthesisRequest(h,e,t,(e=>{if(this.privSynthesizing=!1,r)try{r(e)}catch(e){n&&n(e)}r=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{n&&n(e)}),d)),this.adapterSpeak().catch((()=>{}))}catch(h){if(n)if(h instanceof Error){const e=h;n(e.name+": "+e.message)}else n(h);this.dispose(!0).catch((()=>{}))}}async getVoices(e){const t=i.createNoDashGuid(),r=await this.privRestAdapter.getVoicesList(t);if(r.ok&&Array.isArray(r.json)){let n=r.json;return e&&e.length>0&&(n=n.filter((t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase()))),new u.SynthesisVoicesResult(t,n,void 0)}return new u.SynthesisVoicesResult(t,void 0,"Error: ".concat(r.status,": ").concat(r.statusText))}}t.SpeechSynthesizer=h},3468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;const n=r(9859),i=r(260),s=r(8040);class o extends s.SpeechConfig{constructor(){super()}static fromSubscription(e,t){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"region");const r=new a;return r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r}static fromAuthorizationToken(e,t){i.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");const r=new a;return r.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r}static fromHost(e,t){i.Contracts.throwIfNull(e,"hostName");const r=new a;return r.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r}static fromEndpoint(e,t){i.Contracts.throwIfNull(e,"endpoint"),i.Contracts.throwIfNull(t,"subscriptionKey");const r=new a;return r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r}}t.SpeechTranslationConfig=o;class a extends o{constructor(){super(),this.privSpeechProperties=new s.PropertyCollection,this.outputFormat=s.OutputFormat.Simple}set authorizationToken(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return s.OutputFormat[this.privSpeechProperties.getProperty(n.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(n.OutputFormatPropertyName,s.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){i.Contracts.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.includes(e)||(t.push(e),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)}setProxy(e,t,r,n){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],n)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){const r=JSON.parse(this.privSpeechProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privSpeechProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(r))}setProfanity(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(n.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return s.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])}}t.SpeechTranslationConfigImpl=a},9548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisResult=void 0;t.SynthesisResult=class{constructor(e,t,r,n){this.privResultId=e,this.privReason=t,this.privErrorDetails=r,this.privProperties=n}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},2359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisVoicesResult=void 0;const n=r(8040);class i extends n.SynthesisResult{constructor(e,t,r){if(Array.isArray(t)){super(e,n.ResultReason.VoicesListRetrieved,void 0,new n.PropertyCollection),this.privVoices=[];for(const e of t)this.privVoices.push(new n.VoiceInfo(e))}else super(e,n.ResultReason.Canceled,r||"Error information unavailable",new n.PropertyCollection)}get voices(){return this.privVoices}}t.SynthesisVoicesResult=i},8021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.Synthesizer=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a{constructor(e){const t=e;s.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new i.Queue}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===n.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let r=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),n=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,""),i=a.XMLEncode(e);return this.autoDetectSourceLanguage?r="en-US":n=n||t[r],n&&(i="<voice name='".concat(n,"'>").concat(i,"</voice>")),i="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='".concat(r,"'>").concat(i,"</speak>"),i}async dispose(e){this.privDisposed||(e&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}createSynthesizerConfig(e){return new n.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const i=this.createSynthesizerConfig(new n.SpeechServiceConfig(new n.Context(new n.OS(e,t,r)))),s=this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Key,void 0),a=s&&""!==s?new n.CognitiveSubscriptionKeyAuthentication(s):new n.CognitiveTokenAuthentication((()=>{const e=this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}),(()=>{const e=this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}));this.privAdapter=this.createSynthesisAdapter(a,this.privConnectionFactory,i),this.privRestAdapter=this.createRestSynthesisAdapter(a,i)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}t.Synthesizer=a;t.SynthesisRequest=class{constructor(e,t,r,n,i,s){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=i,this.dataStream=s}}},2465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a{constructor(){}static createConversationAsync(e,t,r,a){let u,l,h;return s.Contracts.throwIfNullOrUndefined(e,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"===typeof t?(u=new c(e,t),i.marshalPromiseToCallbacks((async()=>{})(),r,a)):(u=new c(e),l=t,h=r,u.createConversationAsync((()=>{l&&l()}),(e=>{h&&h(e)}))),u}}t.Conversation=a;class c extends a{constructor(e,t){super(),this.privErrors=n.ConversationConnectionConfig.restErrors,this.onConnected=e=>{this.privIsConnected=!0;try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{try{var r;null!==(r=this.privConversationTranslator)&&void 0!==r&&r.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case n.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case n.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case n.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case n.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case n.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case n.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){var r;const e=null===(r=this.privConversationTranslator)||void 0===r?void 0:r.properties.getProperty(o.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new o.PropertyCollection,this.privManager=new n.ConversationManager;if(e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],n.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage);e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(o.ProfanityOption.Masked);let t=e.getProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name]);void 0!==t&&null!==t||(t="Host"),s.Contracts.throwIfNullOrTooLong(t,"nickname",50),s.Contracts.throwIfNullOrTooShort(t,"nickname",2),e.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],t)}this.privConfig=e;const r=e;s.Contracts.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privIsConnected=!1,this.privParticipants=new n.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const e=this.conversationId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),r={};for(const i of n.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(r[i]=e)}return{id:e,participants:t,conversationProperties:r}}get canSend(){var e;return this.privIsConnected&&!(null!==(e=this.privParticipants.me)&&void 0!==e&&e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=n.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}addParticipantAsync(e,t,r){s.Contracts.throwIfNullOrUndefined(e,"Participant"),i.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,r)}joinConversationAsync(e,t,r,n,i){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,i)}))}catch(o){this.handleError(o,i)}}deleteConversationAsync(e,t){i.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)}async deleteConversationImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(e,t){i.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}muteParticipantAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}removeParticipantAsync(e,t,r){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))i.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,r);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let n="";if("string"===typeof e)n=e;else if(e.hasOwnProperty("id")){n=e.id}else if(e.hasOwnProperty("userId")){n=e.userId}s.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===n))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(n),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}}catch(n){this.handleError(n,r)}}unlockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}unmuteParticipantAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}sendTextMessageAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}setTranslatedLanguagesAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}changeNicknameAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}async close(e){try{var t;this.privIsConnected=!1,await(null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(r){throw r}e&&this.dispose()}handleCallback(e,t){if(e){try{e()}catch(r){t&&t(r)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new o.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:n.ConversationTranslatorMessageTypes.instantMessage})}}t.ConversationImpl=c},796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;t.ConversationCommon=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(r){t&&t(r)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}}},1115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}t.ConversationExpirationEventArgs=i},4314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t,r){super(r),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}t.ConversationParticipantsChangedEventArgs=i},5482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a extends o.Recognizer{constructor(e,t){const r=e;s.Contracts.throwIfNull(r,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new n.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;t.properties.mergeTo(n.properties);return new a(e,r)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple])===o.OutputFormat[o.OutputFormat.Simple]?o.OutputFormat.Simple:o.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,t){i.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),e,t)}stopTranscribingAsync(e,t){i.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,i){const s=r;return i.isSpeakerDiarizationEnabled=!0,new n.ConversationTranscriptionServiceRecognizer(e,t,s,i,this)}}t.ConversationTranscriber=a},3496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=void 0;const n=r(8040);class i extends n.RecognitionResult{constructor(e,t,r,n,i,s,o,a,c,u,l){super(e,t,r,n,i,s,o,c,u,l),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.ConversationTranscriptionResult=i},8400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;const n=r(8706);class i extends n.CancellationEventArgsBase{}t.ConversationTranslationCanceledEventArgs=i},2033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;const n=r(8040);class i extends n.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}t.ConversationTranslationEventArgs=i},4383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;const n=r(2936);class i extends n.TranslationRecognitionResult{constructor(e,t,r,n,i,s,o,a,c,u,l){super(t,n,i,s,o,a,void 0,void 0,c,u,l),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}t.ConversationTranslationResult=i},2663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const n=r(9859),i=r(5934),s=r(2307),o=r(260),a=r(8040),c=r(2465),u=r(5463);var l;!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(l=t.SpeechState||(t.SpeechState={}));class h extends a.TranslationRecognizer{constructor(e,t,r,n){super(e,t,new i.ConversationTranslatorConnectionFactory(n)),this.privSpeechState=l.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=l.Connected},this.sessionStopped=()=>{this.privSpeechState=l.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=async(e,t)=>{var r;null!==(r=t.result)&&void 0!==r&&r.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)},this.canceled=async()=>{if(this.privSpeechState!==l.Inactive)try{await this.cancelSpeech()}catch(e){this.privSpeechState=l.Inactive}})}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=l.Connected}async onCancelSpeech(){this.privSpeechState=l.Inactive,await this.cancelSpeech()}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new u.ConversationTranslationCanceledEventArgs(a.CancellationReason.Error,e,a.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(t){}}async cancelSpeech(){try{var e;this.stopContinuousRecognitionAsync(),await(null===(e=this.privReco)||void 0===e?void 0:e.disconnect()),this.privSpeechState=l.Inactive}catch(t){}}}class d extends u.ConversationCommon{constructor(e){super(e),this.privErrors=n.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new a.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&(!this.privIsSpeaking&&this.privCTRecognizer.state!==l.Connected&&this.privCTRecognizer.state!==l.Connecting&&!this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,t){const r=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(n.ServicePropertiesPropertyName,JSON.stringify(r))}joinConversationAsync(e,t,r,i,s){try{if("string"===typeof e){o.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),s);let u=r;void 0!==u&&null!==u&&""!==u||(u=n.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=a.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(a.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(u),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],u),this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],t);const l=[a.PropertyId.SpeechServiceConnection_Host,a.PropertyId.ConversationTranslator_Host,a.PropertyId.SpeechServiceConnection_Endpoint,a.PropertyId.SpeechServiceConnection_ProxyHostName,a.PropertyId.SpeechServiceConnection_ProxyPassword,a.PropertyId.SpeechServiceConnection_ProxyPort,a.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const e of l){const t=this.privProperties.getProperty(e);if(t){const r="string"===typeof e?e:a.PropertyId[e];this.privSpeechTranslationConfig.setProperty(r,t)}}const h=JSON.parse(this.privProperties.getProperty(n.ServicePropertiesPropertyName,"{}"));for(const e of Object.keys(h))this.privSpeechTranslationConfig.setServiceProperty(e,h[e],a.ServicePropertyChannel.UriQueryParameter);this.privConversation=new c.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,u,(e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),s),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(i,s)}),(e=>{this.handleError(e,s)}))}),(e=>{this.handleError(e,s)}))}else"object"===typeof e?(o.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(a.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,i)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),i)}catch(u){this.handleError(u,"string"===typeof r?s:i)}}leaveConversationAsync(e,t){s.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),e,t)}sendTextMessageAsync(e,t,r){try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,r)}catch(n){this.handleError(n,r)}}startTranscribingAsync(e,t){s.marshalPromiseToCallbacks((async()=>{try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&await this.connectTranslatorRecognizer(),o.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,await this.cancelSpeech(),e}})(),e,t)}stopTranscribingAsync(e,t){s.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking)return void await this.cancelSpeech();this.privIsSpeaking=!1,await new Promise(((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)}))}catch(e){await this.cancelSpeech()}})(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,r){s.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),t,r)}async cancelSpeech(){try{var e;this.privIsSpeaking=!1,await(null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onCancelSpeech()),this.privCTRecognizer=void 0}catch(t){}}async connectTranslatorRecognizer(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=a.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key],"");const e=()=>this.privConversation;this.privCTRecognizer=new h(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw await this.cancelSpeech(),e}}startContinuousRecognition(){return new Promise(((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)}))}}t.ConversationTranslator=d},5463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2465);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return n.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return n.ConversationImpl}});var i=r(796);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return i.ConversationCommon}});var s=r(1115);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return s.ConversationExpirationEventArgs}});var o=r(4314);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return o.ConversationParticipantsChangedEventArgs}});var a=r(8400);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var c=r(2033);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var u=r(4383);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return u.ConversationTranslationResult}});var l=r(2663);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return l.ConversationTranslator}});var h=r(5482);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return h.ConversationTranscriber}});var d=r(4874);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return d.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return d.User}});var p=r(8545);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var f=r(5005);Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return f.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return f.MeetingImpl}});var v=r(2013);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionCanceledEventArgs}});var m=r(182);Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var g=r(3496);Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})},4874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;const n=r(8040);t.User=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};class i{constructor(e,t,r,i,s,o,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=r,this.privIsHost=i,this.privIsMuted=s,this.privIsUsingTts=o,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new n.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,r){return new i(e,"",e,!1,!1,!1,t,r)}}t.Participant=i},5005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingImpl=t.Meeting=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040);class a{constructor(){}static createMeetingAsync(e,t,r,a){if(s.Contracts.throwIfNullOrUndefined(e,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),s.Contracts.throwIfNull(t,"meetingId"),0===t.length)throw new Error("meetingId cannot be empty");e.subscriptionKey||e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,n.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const u=new c(e,t);return i.marshalPromiseToCallbacks((async()=>{})(),r,a),u}}t.Meeting=a;class c extends a{constructor(e,t){super(),this.privErrors=n.ConversationConnectionConfig.restErrors,this.onConnected=e=>{this.privIsConnected=!0;try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{try{var t;null!==(t=this.privConversationTranslator)&&void 0!==t&&t.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{try{var r;null!==(r=this.privConversationTranslator)&&void 0!==r&&r.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case n.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case n.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case n.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case n.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case n.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case n.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case n.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new o.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new o.ConversationParticipantsChangedEventArgs(o.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){var r;const e=null===(r=this.privConversationTranslator)||void 0===r?void 0:r.properties.getProperty(o.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new o.PropertyCollection,this.privManager=new n.ConversationManager;e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],n.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=t,this.privConfig=e;const r=e;s.Contracts.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privIsConnected=!1,this.privParticipants=new n.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const e=this.meetingId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),r={};for(const i of n.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(r[i]=e)}return{id:e,participants:t,meetingProperties:r}}get canSend(){var e;return this.privIsConnected&&!(null!==(e=this.privParticipants.me)&&void 0!==e&&e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}addParticipantAsync(e,t,r){s.Contracts.throwIfNullOrUndefined(e,"Participant"),i.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,r)}joinMeetingAsync(e,t,r,n,i){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,i)}))}catch(o){this.handleError(o,i)}}deleteMeetingAsync(e,t){i.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)}async deleteMeetingImplAsync(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(e,t){i.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}muteParticipantAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}removeParticipantAsync(e,t,r){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))i.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,r);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let n="";if("string"===typeof e)n=e;else if(e.hasOwnProperty("id")){n=e.id}else if(e.hasOwnProperty("userId")){n=e.userId}s.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===n))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(n),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}}catch(n){this.handleError(n,r)}}unlockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(r){this.handleError(r,t)}}unmuteParticipantAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}sendTextMessageAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}setTranslatedLanguagesAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}changeNicknameAsync(e,t,r){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(n){this.handleError(n,r)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}async close(e){try{var t;this.privIsConnected=!1,await(null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(r){throw r}e&&this.dispose()}handleCallback(e,t){if(e){try{e()}catch(r){t&&t(r)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new o.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:n.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:n.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:n.ConversationTranslatorMessageTypes.instantMessage})}}t.MeetingImpl=c},182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriber=void 0;const n=r(9859),i=r(2307),s=r(260),o=r(8040),a=r(5463);t.MeetingTranscriber=class{constructor(e){this.privAudioConfig=e,this.privProperties=new o.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return o.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,t,r){const o=e;s.Contracts.throwIfNullOrUndefined(a.MeetingImpl,"Meeting"),this.privRecognizer=new n.TranscriberRecognizer(e.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),i.marshalPromiseToCallbacks(o.connectTranscriberRecognizer(this.privRecognizer),t,r)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,t){this.privRecognizer.disconnectCallbacks(),i.marshalPromiseToCallbacks((async()=>{})(),e,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}async dispose(e){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))}}},2013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const n=r(8706);class i extends n.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=i},8545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))},9169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;t.TranslationRecognitionCanceledEventArgs=class{constructor(e,t,r,n,i){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=i,this.privSessionId=e,this.privErrorCode=n}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},6452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;const n=r(8040);class i extends n.RecognitionEventArgs{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}t.TranslationRecognitionEventArgs=i},2936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;const n=r(8040);class i extends n.SpeechRecognitionResult{constructor(e,t,r,n,i,s,o,a,c,u,l){super(t,r,n,i,s,o,a,void 0,c,u,l),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new i(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}}t.TranslationRecognitionResult=i},2058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;const n=r(9859),i=r(2307),s=r(4931),o=r(260),a=r(8040);class c extends a.Recognizer{constructor(e,t,r){const i=e;o.Contracts.throwIfNull(i,"speechConfig"),super(t,i.properties,r||new n.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice]),o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationToLanguages]),o.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new c(e,r)}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),i.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(n.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){i.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(o.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r=t.indexOf(e);r>-1&&(t.splice(r,1),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){o.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){o.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)}onConnection(){}async dispose(e){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(await this.implRecognizerStop(),await super.dispose(e)))}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,r,i){const s=r;return new n.TranslationServiceRecognizer(e,t,s,i,this)}updateLanguages(e){const t=s.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}}t.TranslationRecognizer=c},4823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;const n=r(8040);class i extends n.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}t.TranslationSynthesisEventArgs=i},3213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;t.TranslationSynthesisResult=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}},7515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const n=r(8040);t.Translations=class{constructor(){this.privMap=new n.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}},716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;const n=r(81);t.TurnStatusReceivedEventArgs=class{constructor(e){this.privTurnStatus=n.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},8833:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male",e[e.Neutral=3]="Neutral"}(r=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(n=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const i={[r[r.Neutral]]:r.Neutral,[r[r.Male]]:r.Male,[r[r.Female]]:r.Female};t.VoiceInfo=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?n.OnlineStandard:n.OnlineNeural,this.privGender=i[e.Gender]||r.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(const t of e.StyleList)this.privStyleList.push(t);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}},4384:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;t.VoiceProfile=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}},8163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;const n=r(9859),i=r(6782),s=r(260),o=r(8040);class a extends o.Recognizer{constructor(e){s.Contracts.throwIfNullOrUndefined(e,"speechConfig");const t=e;s.Contracts.throwIfNull(t,"speechConfig"),super(i.AudioConfig.fromStreamInput(o.AudioInputStream.createPushStream()),t.properties,new n.VoiceProfileConnectionFactory),this.privProperties=t.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}async createProfileAsync(e,t){const r=await this.privVoiceAdapter.createProfile(e,t);return new o.VoiceProfile(r[0],e)}async retrieveEnrollmentResultAsync(e){return this.privVoiceAdapter.retrieveEnrollmentResult(e)}async getAllProfilesAsync(e){return this.privVoiceAdapter.getAllProfiles(e)}async getActivationPhrasesAsync(e,t){return this.privVoiceAdapter.getActivationPhrases(e,t)}async enrollProfileAsync(e,t){const r=t;return s.Contracts.throwIfNullOrUndefined(r,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=r,this.privVoiceAdapter.enrollProfile(e)}async deleteProfileAsync(e){return this.privVoiceAdapter.deleteProfile(e)}async resetProfileAsync(e){return this.privVoiceAdapter.resetProfile(e)}async close(){await this.dispose(!0)}createServiceRecognizer(e,t,r,i){const s=r;return new n.VoiceServiceRecognizer(e,t,s,i,this)}async dispose(e){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&await super.dispose(e))}createRecognizerConfig(e){return new n.RecognizerConfig(e,this.properties)}getResult(e,t){return new o.VoiceProfileResult(e.ok?t:o.ResultReason.Canceled,e.statusText)}}t.VoiceProfileClient=a},6917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;const n=r(9859),i=r(8040);class s{constructor(e,t,r){this.privReason=e,this.privProperties=new i.PropertyCollection,this.privReason!==i.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=i.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(n.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const t=[];for(const r of e.value){const e="enrolling"===r.enrollmentStatus.toLowerCase()?i.ResultReason.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,n=new s(e,null,null);n.privDetails=this.getIdentificationDetails(r),t.push(n)}return t}static FromVerificationProfileList(e){const t=[];for(const r of e.value){const e="enrolling"===r.enrollmentStatus.toLowerCase()?i.ResultReason.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,n=new s(e,null,null);n.privDetails=this.getVerificationDetails(r),t.push(n)}return t}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}}t.VoiceProfileEnrollmentResult=s;class o extends i.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=i.CancellationReason.Error;let r=i.CancellationErrorCode.NoError;return e.properties&&(r=i.CancellationErrorCode[e.properties.getProperty(n.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.NoError])]),new o(t,e.errorDetails,r)}}t.VoiceProfileEnrollmentCancellationDetails=o},7268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfilePhraseResult=void 0;const n=r(260),i=r(8040);class s extends i.VoiceProfileResult{constructor(e,t,r,i){super(e,t),this.privPhrases=[],n.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=r,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}}t.VoiceProfilePhraseResult=s},9941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;const n=r(9859),i=r(260),s=r(8040);t.VoiceProfileResult=class{constructor(e,t){this.privReason=e,this.privProperties=new s.PropertyCollection,e===s.ResultReason.Canceled&&(i.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(n.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class o extends s.CancellationDetailsBase{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=s.CancellationReason.Error;let r=s.CancellationErrorCode.NoError;return e.properties&&(r=s.CancellationErrorCode[e.properties.getProperty(n.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new o(t,e.errorDetails,r)}}t.VoiceProfileCancellationDetails=o},8472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))},177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var n=d(r(7884)),i=d(r(9638)),s=d(r(2855)),o=d(r(1552)),a=d(r(1282)),c=d(r(1185)),u=d(r(7019)),l=d(r(5080)),h=d(r(4470));function d(e){return e&&e.__esModule?e:{default:e}}},6733:(e,t)=>{"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function n(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function i(e,t,r,i,s,o){return n((a=n(n(t,e),n(i,o)))<<(c=s)|a>>>32-c,r);var a,c}function s(e,t,r,n,s,o,a){return i(t&r|~t&n,e,t,s,o,a)}function o(e,t,r,n,s,o,a){return i(t&n|r&~n,e,t,s,o,a)}function a(e,t,r,n,s,o,a){return i(t^r^n,e,t,s,o,a)}function c(e,t,r,n,s,o,a){return i(r^(t|~n),e,t,s,o,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let i=1732584193,u=-271733879,l=-1732584194,h=271733878;for(let r=0;r<e.length;r+=16){const t=i,d=u,p=l,f=h;i=s(i,u,l,h,e[r],7,-680876936),h=s(h,i,u,l,e[r+1],12,-389564586),l=s(l,h,i,u,e[r+2],17,606105819),u=s(u,l,h,i,e[r+3],22,-1044525330),i=s(i,u,l,h,e[r+4],7,-176418897),h=s(h,i,u,l,e[r+5],12,1200080426),l=s(l,h,i,u,e[r+6],17,-1473231341),u=s(u,l,h,i,e[r+7],22,-45705983),i=s(i,u,l,h,e[r+8],7,1770035416),h=s(h,i,u,l,e[r+9],12,-1958414417),l=s(l,h,i,u,e[r+10],17,-42063),u=s(u,l,h,i,e[r+11],22,-1990404162),i=s(i,u,l,h,e[r+12],7,1804603682),h=s(h,i,u,l,e[r+13],12,-40341101),l=s(l,h,i,u,e[r+14],17,-1502002290),u=s(u,l,h,i,e[r+15],22,1236535329),i=o(i,u,l,h,e[r+1],5,-165796510),h=o(h,i,u,l,e[r+6],9,-1069501632),l=o(l,h,i,u,e[r+11],14,643717713),u=o(u,l,h,i,e[r],20,-373897302),i=o(i,u,l,h,e[r+5],5,-701558691),h=o(h,i,u,l,e[r+10],9,38016083),l=o(l,h,i,u,e[r+15],14,-660478335),u=o(u,l,h,i,e[r+4],20,-405537848),i=o(i,u,l,h,e[r+9],5,568446438),h=o(h,i,u,l,e[r+14],9,-1019803690),l=o(l,h,i,u,e[r+3],14,-187363961),u=o(u,l,h,i,e[r+8],20,1163531501),i=o(i,u,l,h,e[r+13],5,-1444681467),h=o(h,i,u,l,e[r+2],9,-51403784),l=o(l,h,i,u,e[r+7],14,1735328473),u=o(u,l,h,i,e[r+12],20,-1926607734),i=a(i,u,l,h,e[r+5],4,-378558),h=a(h,i,u,l,e[r+8],11,-2022574463),l=a(l,h,i,u,e[r+11],16,1839030562),u=a(u,l,h,i,e[r+14],23,-35309556),i=a(i,u,l,h,e[r+1],4,-1530992060),h=a(h,i,u,l,e[r+4],11,1272893353),l=a(l,h,i,u,e[r+7],16,-155497632),u=a(u,l,h,i,e[r+10],23,-1094730640),i=a(i,u,l,h,e[r+13],4,681279174),h=a(h,i,u,l,e[r],11,-358537222),l=a(l,h,i,u,e[r+3],16,-722521979),u=a(u,l,h,i,e[r+6],23,76029189),i=a(i,u,l,h,e[r+9],4,-640364487),h=a(h,i,u,l,e[r+12],11,-421815835),l=a(l,h,i,u,e[r+15],16,530742520),u=a(u,l,h,i,e[r+2],23,-995338651),i=c(i,u,l,h,e[r],6,-198630844),h=c(h,i,u,l,e[r+7],10,1126891415),l=c(l,h,i,u,e[r+14],15,-1416354905),u=c(u,l,h,i,e[r+5],21,-57434055),i=c(i,u,l,h,e[r+12],6,1700485571),h=c(h,i,u,l,e[r+3],10,-1894986606),l=c(l,h,i,u,e[r+10],15,-1051523),u=c(u,l,h,i,e[r+1],21,-2054922799),i=c(i,u,l,h,e[r+8],6,1873313359),h=c(h,i,u,l,e[r+15],10,-30611744),l=c(l,h,i,u,e[r+6],15,-1560198380),u=c(u,l,h,i,e[r+13],21,1309151649),i=c(i,u,l,h,e[r+4],6,-145523070),h=c(h,i,u,l,e[r+11],10,-1120210379),l=c(l,h,i,u,e[r+2],15,718787259),u=c(u,l,h,i,e[r+9],21,-343485551),i=n(i,t),u=n(u,d),l=n(l,p),h=n(h,f)}return[i,u,l,h]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};t.default=u},46:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=r},1282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},4470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7019))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};t.default=s},9102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},3708:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)};const n=new Uint8Array(16)},1560:(e,t)=>{"use strict";function r(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function n(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o);for(let r=0;r<o;++r){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*r+4*n]<<24|e[64*r+4*n+1]<<16|e[64*r+4*n+2]<<8|e[64*r+4*n+3];a[r]=t}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<o;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=a[c][t];for(let t=16;t<80;++t)e[t]=n(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let s=i[0],o=i[1],u=i[2],l=i[3],h=i[4];for(let i=0;i<80;++i){const a=Math.floor(i/20),c=n(s,5)+r(a,o,u,l)+h+t[a]+e[i]>>>0;h=l,l=u,u=n(o,30)>>>0,o=s,s=c}i[0]=i[0]+s>>>0,i[1]=i[1]+o>>>0,i[2]=i[2]+u>>>0,i[3]=i[3]+l>>>0,i[4]=i[4]+h>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};t.default=i},5080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=o;var n,i=(n=r(7019))&&n.__esModule?n:{default:n};const s=[];for(let c=0;c<256;++c)s.push((c+256).toString(16).slice(1));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}var a=function(e){const t=o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,i.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=a},7884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(3708))&&n.__esModule?n:{default:n},s=r(5080);let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let h=(e=e||{}).node||o,d=void 0!==e.clockseq?e.clockseq:a;if(null==h||null==d){const t=e.random||(e.rng||i.default)();null==h&&(h=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=a=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:u+1;const v=p-c+(f-u)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,u=f,a=d,p+=122192928e5;const m=(1e4*(268435455&p)+f)%4294967296;l[n++]=m>>>24&255,l[n++]=m>>>16&255,l[n++]=m>>>8&255,l[n++]=255&m;const g=p/4294967296*1e4&268435455;l[n++]=g>>>8&255,l[n++]=255&g,l[n++]=g>>>24&15|16,l[n++]=g>>>16&255,l[n++]=d>>>8|128,l[n++]=255&d;for(let i=0;i<6;++i)l[n+i]=h[i];return t||(0,s.unsafeStringify)(l)};t.default=l},9638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(495)),i=s(r(6733));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,i.default);t.default=o},495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,r){function n(e,n,o,a){var c;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"===typeof n&&(n=(0,s.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,i.unsafeStringify)(u)}try{n.name=e}catch(c){}return n.DNS=o,n.URL=a,n};var n,i=r(5080),s=(n=r(4470))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},2855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(46)),i=o(r(3708)),s=r(5080);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,s.unsafeStringify)(o)};t.default=a},1552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(495)),i=s(r(1560));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,i.default);t.default=o},7019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(9102))&&n.__esModule?n:{default:n};var s=function(e){return"string"===typeof e&&i.default.test(e)};t.default=s},1185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(7019))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=s},2730:(e,t,r)=>{"use strict";var n=r(5043),i=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function v(e,t,r,n,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,r,n){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,F=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function j(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=n.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case C:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function Z(e,t){X(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function se(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ve(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ve(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ee=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ce(e.stateNode,e.type,t))}}function Pe(e){Ie?Ee?Ee.push(e):Ee=[e]:Ie=e}function Re(){if(Ie){var e=Ie,t=Ee;if(Ee=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function _e(e,t){return e(t)}function Ae(){}var ke=!1;function xe(e,t,r){if(ke)return e(t,r);ke=!0;try{return _e(e,t,r)}finally{ke=!1,(null!==Ie||null!==Ee)&&(Ae(),Re())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var n=bi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var De=!1;if(l)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(le){De=!1}function Me(e,t,r,n,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(l){this.onError(l)}}var Le=!1,Fe=null,ze=!1,Be=null,je={onError:function(e){Le=!0,Fe=e}};function Ue(e,t,r,n,i,s,o,a,c){Le=!1,Fe=null,Me.apply(je,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return We(i),e;if(o===n)return We(i),t;o=o.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Je=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~i;0!==a?n=ht(a):0!==(s&=o)&&(n=ht(s))}else 0!==(o=r&~i)?n=ht(o):0!==s&&(n=ht(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ot(t)),n|=e[r],t&=~i;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var wt=0;function St(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Ct,It,Et,Tt,Pt=!1,Rt=[],_t=null,At=null,kt=null,xt=new Map,Ot=new Map,Dt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Ct(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qe(r)))return e.blockedOn=t,void Tt(e.priority,(function(){It(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=wi(r))&&Ct(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Se=n,r.target.dispatchEvent(n),Se=null,t.shift()}return!0}function Bt(e,t,r){zt(e)&&r.delete(t)}function jt(){Pt=!1,null!==_t&&zt(_t)&&(_t=null),null!==At&&zt(At)&&(At=null),null!==kt&&zt(kt)&&(kt=null),xt.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Rt.length){Ut(Rt[0],e);for(var r=1;r<Rt.length;r++){var n=Rt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==At&&Ut(At,e),null!==kt&&Ut(kt,e),xt.forEach(t),Ot.forEach(t),r=0;r<Dt.length;r++)(n=Dt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dt.length&&null===(r=Dt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Dt.shift()}var qt=S.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,r,n){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,r,n)}finally{wt=i,qt.transition=s}}function Kt(e,t,r,n){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,r,n)}finally{wt=i,qt.transition=s}}function Gt(e,t,r,n){if(Wt){var i=Qt(e,t,r,n);if(null===i)Wn(e,t,n,Jt,r),Mt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return _t=Lt(_t,e,t,r,n,i),!0;case"dragenter":return At=Lt(At,e,t,r,n,i),!0;case"mouseover":return kt=Lt(kt,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return xt.set(s,Lt(xt.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Lt(Ot.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Mt(e,n),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&bt(s),null===(s=Qt(e,t,r,n))&&Wn(e,t,n,Jt,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Jt=null;function Qt(e,t,r,n){if(Jt=null,null!==(e=yi(e=be(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function er(){if($t)return $t;var e,t,r=Zt,n=r.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,or,ar,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(cr),lr=F({},cr,{view:0,detail:0}),hr=ir(lr),dr=F({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(sr=e.screenX-ar.screenX,or=e.screenY-ar.screenY):or=sr=0,ar=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=ir(dr),fr=ir(F({},dr,{dataTransfer:0})),vr=ir(F({},lr,{relatedTarget:0})),mr=ir(F({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=F({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ir(gr),wr=ir(F({},cr,{data:0})),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ir(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Er(){return Ir}var Tr=F({},lr,{key:function(e){if(e.key){var t=Sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pr=ir(Tr),Rr=ir(F({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_r=ir(F({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Ar=ir(F({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),kr=F({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xr=ir(kr),Or=[9,13,27,32],Dr=l&&"CompositionEvent"in window,Nr=null;l&&"documentMode"in document&&(Nr=document.documentMode);var Mr=l&&"TextEvent"in window&&!Nr,Lr=l&&(!Dr||Nr&&8<Nr&&11>=Nr),Fr=String.fromCharCode(32),zr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Wr(e,t,r,n){Pe(n),0<(t=Kn(t,"onChange")).length&&(r=new ur("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Kr=null;function Gr(e){zn(e,0)}function Jr(e){if(G(Si(e)))return e}function Qr(e,t){if("change"===e)return t}var Yr=!1;if(l){var Xr;if(l){var Zr="oninput"in document;if(!Zr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Zr="function"===typeof $r.oninput}Xr=Zr}else Xr=!1;Yr=Xr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Kr=Hr=null)}function tn(e){if("value"===e.propertyName&&Jr(Kr)){var t=[];Wr(t,Kr,e,be(e)),xe(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),Kr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Kr)}function sn(e,t){if("click"===e)return Jr(t)}function on(e,t){if("input"===e||"change"===e)return Jr(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cn(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!h.call(t,i)||!an(e[i],t[i]))return!1}return!0}function un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var r,n=un(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=un(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=dn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=ln(r,s);var o=ln(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vn=l&&"documentMode"in document&&11>=document.documentMode,mn=null,gn=null,yn=null,wn=!1;function Sn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;wn||null==mn||mn!==J(n)||("selectionStart"in(n=mn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&cn(yn,n)||(yn=n,0<(n=Kn(gn,"onSelect")).length&&(t=new ur("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function bn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cn={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},In={},En={};function Tn(e){if(In[e])return In[e];if(!Cn[e])return e;var t,r=Cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return In[e]=r[t];return e}l&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var Pn=Tn("animationend"),Rn=Tn("animationiteration"),_n=Tn("animationstart"),An=Tn("transitionend"),kn=new Map,xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){kn.set(e,t),c(t,[e])}for(var Dn=0;Dn<xn.length;Dn++){var Nn=xn[Dn];On(Nn.toLowerCase(),"on"+(Nn[0].toUpperCase()+Nn.slice(1)))}On(Pn,"onAnimationEnd"),On(Rn,"onAnimationIteration"),On(_n,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(An,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,o,a,c,u){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(s(198));var l=Fe;Le=!1,Fe=null,ze||(ze=!0,Be=l)}}(n,t,void 0,e),e.currentTarget=null}function zn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fn(i,a,u),s=c}else for(o=0;o<n.length;o++){if(c=(a=n[o]).instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fn(i,a,u),s=c}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Bn(e,t){var r=t[vi];void 0===r&&(r=t[vi]=new Set);var n=e+"__bubble";r.has(n)||(qn(t,e,2,!1),r.add(n))}function jn(e,t,r){var n=0;t&&(n|=4),qn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Un]){e[Un]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ln.has(t)||jn(t,!1,e),jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,jn("selectionchange",!1,t))}}function qn(e,t,r,n){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}r=i.bind(null,t,r,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,i){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){n=s=o;continue e}a=a.parentNode}}n=n.return}xe((function(){var n=s,i=be(r),o=[];e:{var a=kn.get(e);if(void 0!==a){var c=ur,u=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=Pr;break;case"focusin":u="focus",c=vr;break;case"focusout":u="blur",c=vr;break;case"beforeblur":case"afterblur":c=vr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=_r;break;case Pn:case Rn:case _n:c=mr;break;case An:c=Ar;break;case"scroll":c=hr;break;case"wheel":c=xr;break;case"copy":case"cut":case"paste":c=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Rr}var l=0!==(4&t),h=!l&&"scroll"===e,d=l?null!==a?a+"Capture":null:a;l=[];for(var p,f=n;null!==f;){var v=(p=f).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&(null!=(v=Oe(f,d))&&l.push(Hn(f,v,p)))),h)break;f=f.return}0<l.length&&(a=new c(a,u,null,r,i),o.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===Se||!(u=r.relatedTarget||r.fromElement)||!yi(u)&&!u[fi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?yi(u):null)&&(u!==(h=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=n),c!==u)){if(l=pr,v="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rr,v="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==c?a:Si(c),p=null==u?a:Si(u),(a=new l(v,f+"leave",c,r,i)).target=h,a.relatedTarget=p,v=null,yi(i)===n&&((l=new l(d,f+"enter",u,r,i)).target=p,l.relatedTarget=h,v=l),h=v,c&&u)e:{for(d=u,f=0,p=l=c;p;p=Gn(p))f++;for(p=0,v=d;v;v=Gn(v))p++;for(;0<f-p;)l=Gn(l),f--;for(;0<p-f;)d=Gn(d),p--;for(;f--;){if(l===d||null!==d&&l===d.alternate)break e;l=Gn(l),d=Gn(d)}l=null}else l=null;null!==c&&Jn(o,a,c,l,!1),null!==u&&null!==h&&Jn(o,h,u,l,!0)}if("select"===(c=(a=n?Si(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var m=Qr;else if(qr(a))if(Yr)m=on;else{m=nn;var g=rn}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sn);switch(m&&(m=m(e,n))?Wr(o,m,r,i):(g&&g(e,a,n),"focusout"===e&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&ee(a,"number",a.value)),g=n?Si(n):window,e){case"focusin":(qr(g)||"true"===g.contentEditable)&&(mn=g,gn=n,yn=null);break;case"focusout":yn=gn=mn=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,Sn(o,r,i);break;case"selectionchange":if(vn)break;case"keydown":case"keyup":Sn(o,r,i)}var y;if(Dr)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ur?Br(e,r)&&(w="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(w="onCompositionStart");w&&(Lr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==w?"onCompositionEnd"===w&&Ur&&(y=er()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,Ur=!0)),0<(g=Kn(n,w)).length&&(w=new wr(w,e,null,r,i),o.push({event:w,listeners:g}),y?w.data=y:null!==(y=jr(r))&&(w.data=y))),(y=Mr?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(zr=!0,Fr);case"textInput":return(e=t.data)===Fr&&zr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Dr&&Br(e,t)?(e=er(),$t=Zt=Xt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Kn(n,"onBeforeInput")).length&&(i=new wr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y))}zn(o,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,r))&&n.unshift(Hn(e,s,i)),null!=(s=Oe(e,t))&&n.push(Hn(e,s,i))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jn(e,t,r,n,i){for(var s=t._reactName,o=[];null!==r&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(null!==c&&c===n)break;5===a.tag&&null!==u&&(a=u,i?null!=(c=Oe(r,s))&&o.unshift(Hn(r,c,a)):i||null!=(c=Oe(r,s))&&o.push(Hn(r,c,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Qn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Xn(e){return("string"===typeof e?e:""+e).replace(Qn,"\n").replace(Yn,"")}function Zn(e,t,r){if(t=Xn(t),Xn(e)!==t&&r)throw Error(s(425))}function $n(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ni;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[di]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=li(e);null!==e;){if(r=e[di])return r;e=li(e)}return t}r=(e=r).parentNode}return null}function wi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[pi]||null}var Ci=[],Ii=-1;function Ei(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ci[Ii],Ci[Ii]=null,Ii--)}function Pi(e,t){Ii++,Ci[Ii]=e.current,e.current=t}var Ri={},_i=Ei(Ri),Ai=Ei(!1),ki=Ri;function xi(e,t){var r=e.type.contextTypes;if(!r)return Ri;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ai),Ti(_i)}function Ni(e,t,r){if(_i.current!==Ri)throw Error(s(168));Pi(_i,t),Pi(Ai,r)}function Mi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},r,n)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,ki=_i.current,Pi(_i,e),Pi(Ai,Ai.current),!0}function Fi(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Mi(e,t,ki),n.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(_i),Pi(_i,e)):Ti(Ai),Pi(Ai,r)}var zi=null,Bi=!1,ji=!1;function Ui(e){null===zi?zi=[e]:zi.push(e)}function Vi(){if(!ji&&null!==zi){ji=!0;var e=0,t=wt;try{var r=zi;for(wt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),Ge($e,Vi),i}finally{wt=t,ji=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Ji=0,Qi=null,Yi=1,Xi="";function Zi(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function $i(e,t,r){Gi[Ji++]=Yi,Gi[Ji++]=Xi,Gi[Ji++]=Qi,Qi=e;var n=Yi;e=Xi;var i=32-ot(n)-1;n&=~(1<<i),r+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Yi=1<<32-ot(t)+i|r<<i|n,Xi=s+e}else Yi=1<<s|r<<i|n,Xi=e}function es(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Qi;)Qi=Gi[--Ji],Gi[Ji]=null,Xi=Gi[--Ji],Gi[Ji]=null,Yi=Gi[--Ji],Gi[Ji]=null}var rs=null,ns=null,is=!1,ss=null;function os(e,t){var r=Ou(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function as(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ou(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=ns;if(t){var r=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=ui(r.nextSibling);var n=rs;t&&as(e,t)?os(n,r):(e.flags=-4097&e.flags|2,is=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,rs=e}}}function ls(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!is)return ls(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=ns)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(ls(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ui(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=ns;e;)e=ui(e.nextSibling)}function ps(){ns=rs=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var vs=S.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var gs=Ei(null),ys=null,ws=null,Ss=null;function bs(){Ss=ws=ys=null}function Cs(e){var t=gs.current;Ti(gs),e._currentValue=t}function Is(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Es(e,t){ys=e,Ss=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Sa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function _s(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Rs(t)):(r.next=i.next,i.next=r),t.interleaved=r,As(e,n)}function As(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var ks=!1;function xs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ac)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,As(e,r)}return null===(i=n.interleaved)?(t.next=t,Rs(n)):(t.next=i.next,i.next=t),n.interleaved=t,As(e,r)}function Ms(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Ls(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fs(e,t,r,n){var i=e.updateQueue;ks=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===a?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,l=u=c=null,a=s;;){var d=a.lane,p=a.eventTime;if((n&d)===d){null!==l&&(l=l.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,v=a;switch(d=t,p=r,v.tag){case 1:if("function"===typeof(f=v.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=v.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:ks=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(u=l=p,c=h):l=l.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function zs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(s(191,i));i.call(n)}}}var Bs=(new n.Component).refs;function js(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Us={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),s=Ds(n,i);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ns(e,s,i))&&(nu(t,e,i,n),Ms(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),s=Ds(n,i);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ns(e,s,i))&&(nu(t,e,i,n),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tu(),n=ru(e),i=Ds(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ns(e,i,n))&&(nu(t,e,n,r),Ms(t,e,n))}};function Vs(e,t,r,n,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(i,s))}function qs(e,t,r){var n=!1,i=Ri,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Oi(t)?ki:_i.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?xi(e,i):Ri),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Us,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Us.enqueueReplaceState(t,t.state,null)}function Hs(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Bs,xs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Oi(t)?ki:_i.current,i.context=xi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(js(e,t,s,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Us.enqueueReplaceState(i,i.state,null),Fs(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var i=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Bs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Js(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=zu(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){var s=r.type;return s===I?h(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&Js(s)===t.type)?((n=i(t,r.props)).ref=Ks(e,t,r),n.return=e,n):((n=Mu(r.type,r.key,r.props,null,e.mode,n)).ref=Ks(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Bu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,s){return null===t||7!==t.tag?((t=Lu(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zu(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(r=Mu(t.type,t.key,t.props,null,e.mode,r)).ref=Ks(e,null,t),r.return=e,r;case C:return(t=Bu(t,e.mode,r)).return=e,t;case O:return d(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Lu(t,e.mode,r,null)).return=e,t;Gs(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:c(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===i?u(e,t,r,n):null;case C:return r.key===i?l(e,t,r,n):null;case O:return p(e,t,(i=r._init)(r._payload),n)}if(te(r)||M(r))return null!==i?null:h(e,t,r,n,null);Gs(e,r)}return null}function f(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return c(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case C:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case O:return f(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||M(n))return h(t,e=e.get(r)||null,n,i,null);Gs(t,n)}return null}function v(i,s,a,c){for(var u=null,l=null,h=s,v=s=0,m=null;null!==h&&v<a.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=p(i,h,a[v],c);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),s=o(g,s,v),null===l?u=g:l.sibling=g,l=g,h=m}if(v===a.length)return r(i,h),is&&Zi(i,v),u;if(null===h){for(;v<a.length;v++)null!==(h=d(i,a[v],c))&&(s=o(h,s,v),null===l?u=h:l.sibling=h,l=h);return is&&Zi(i,v),u}for(h=n(i,h);v<a.length;v++)null!==(m=f(h,i,v,a[v],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),s=o(m,s,v),null===l?u=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Zi(i,v),u}function m(i,a,c,u){var l=M(c);if("function"!==typeof l)throw Error(s(150));if(null==(c=l.call(c)))throw Error(s(151));for(var h=l=null,v=a,m=a=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var w=p(i,v,y.value,u);if(null===w){null===v&&(v=g);break}e&&v&&null===w.alternate&&t(i,v),a=o(w,a,m),null===h?l=w:h.sibling=w,h=w,v=g}if(y.done)return r(i,v),is&&Zi(i,m),l;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?l=y:h.sibling=y,h=y);return is&&Zi(i,m),l}for(v=n(i,v);!y.done;m++,y=c.next())null!==(y=f(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),is&&Zi(i,m),l}return function e(n,s,o,c){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,l=s;null!==l;){if(l.key===u){if((u=o.type)===I){if(7===l.tag){r(n,l.sibling),(s=i(l,o.props.children)).return=n,n=s;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&Js(u)===l.type){r(n,l.sibling),(s=i(l,o.props)).ref=Ks(n,l,o),s.return=n,n=s;break e}r(n,l);break}t(n,l),l=l.sibling}o.type===I?((s=Lu(o.props.children,n.mode,c,o.key)).return=n,n=s):((c=Mu(o.type,o.key,o.props,null,n.mode,c)).ref=Ks(n,s,o),c.return=n,n=c)}return a(n);case C:e:{for(l=o.key;null!==s;){if(s.key===l){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){r(n,s.sibling),(s=i(s,o.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Bu(o,n.mode,c)).return=n,n=s}return a(n);case O:return e(n,s,(l=o._init)(o._payload),c)}if(te(o))return v(n,s,o,c);if(M(o))return m(n,s,o,c);Gs(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,o)).return=n,n=s):(r(n,s),(s=zu(o,n.mode,c)).return=n,n=s),a(n)):r(n,s)}}var Ys=Qs(!0),Xs=Qs(!1),Zs={},$s=Ei(Zs),eo=Ei(Zs),to=Ei(Zs);function ro(e){if(e===Zs)throw Error(s(174));return e}function no(e,t){switch(Pi(to,t),Pi(eo,e),Pi($s,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti($s),Pi($s,t)}function io(){Ti($s),Ti(eo),Ti(to)}function so(e){ro(to.current);var t=ro($s.current),r=ce(t,e.type);t!==r&&(Pi(eo,e),Pi($s,r))}function oo(e){eo.current===e&&(Ti($s),Ti(eo))}var ao=Ei(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function lo(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=S.ReactCurrentDispatcher,po=S.ReactCurrentBatchConfig,fo=0,vo=null,mo=null,go=null,yo=!1,wo=!1,So=0,bo=0;function Co(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!an(e[r],t[r]))return!1;return!0}function Eo(e,t,r,n,i,o){if(fo=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=r(n,i),wo){o=0;do{if(wo=!1,So=0,25<=o)throw Error(s(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=ua,e=r(n,i)}while(wo)}if(ho.current=oa,t=null!==mo&&null!==mo.next,fo=0,go=mo=vo=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==So;return So=0,e}function Po(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Ro(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function _o(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Ro(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=mo,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(null!==i){o=i.next,n=n.baseState;var c=a=null,u=null,l=o;do{var h=l.lane;if((fo&h)===h)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=d,a=n):u=u.next=d,vo.lanes|=h,Fc|=h}l=l.next}while(null!==l&&l!==o);null===u?a=n:u.next=c,an(n,t.memoizedState)||(Sa=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ko(e){var t=Ro(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);an(o,t.memoizedState)||(Sa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function xo(){}function Oo(e,t){var r=vo,n=Ro(),i=t(),o=!an(n.memoizedState,i);if(o&&(n.memoizedState=i,Sa=!0),n=n.queue,Wo(Mo.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(r.flags|=2048,Bo(9,No.bind(null,r,n,i,t),void 0,null),null===kc)throw Error(s(349));0!==(30&fo)||Do(r,t,i)}return i}function Do(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function No(e,t,r,n){t.value=r,t.getSnapshot=n,Lo(t)&&Fo(e)}function Mo(e,t,r){return r((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!an(e,r)}catch(n){return!0}}function Fo(e){var t=As(e,1);null!==t&&nu(t,e,1,-1)}function zo(e){var t=Po();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function jo(){return Ro().memoizedState}function Uo(e,t,r,n){var i=Po();vo.flags|=e,i.memoizedState=Bo(1|t,r,void 0,void 0===n?null:n)}function Vo(e,t,r,n){var i=Ro();n=void 0===n?null:n;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==n&&Io(n,o.deps))return void(i.memoizedState=Bo(t,r,s,n))}vo.flags|=e,i.memoizedState=Bo(1|t,r,s,n)}function qo(e,t){return Uo(8390656,8,e,t)}function Wo(e,t){return Vo(2048,8,e,t)}function Ho(e,t){return Vo(4,2,e,t)}function Ko(e,t){return Vo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Jo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Vo(4,4,Go.bind(null,t,e),r)}function Qo(){}function Yo(e,t){var r=Ro();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Io(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Xo(e,t){var r=Ro();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Io(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Zo(e,t,r){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=r):(an(r,t)||(r=vt(),vo.lanes|=r,Fc|=r,e.baseState=!0),t)}function $o(e,t){var r=wt;wt=0!==r&&4>r?r:4,e(!0);var n=po.transition;po.transition={};try{e(!1),t()}finally{wt=r,po.transition=n}}function ea(){return Ro().memoizedState}function ta(e,t,r){var n=ru(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},na(e))ia(t,r);else if(null!==(r=_s(e,t,r,n))){nu(r,e,n,tu()),sa(r,t,n)}}function ra(e,t,r){var n=ru(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,an(a,o)){var c=t.interleaved;return null===c?(i.next=i,Rs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(r=_s(e,t,i,n))&&(nu(r,e,n,i=tu()),sa(r,t,n))}}function na(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function ia(e,t){wo=yo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sa(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var oa={readContext:Ts,useCallback:Co,useContext:Co,useEffect:Co,useImperativeHandle:Co,useInsertionEffect:Co,useLayoutEffect:Co,useMemo:Co,useReducer:Co,useRef:Co,useState:Co,useDebugValue:Co,useDeferredValue:Co,useTransition:Co,useMutableSource:Co,useSyncExternalStore:Co,useId:Co,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return Po().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Uo(4194308,4,Go.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var r=Po();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Po();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ta.bind(null,vo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Po().memoizedState=e},useState:zo,useDebugValue:Qo,useDeferredValue:function(e){return Po().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=$o.bind(null,e[1]),Po().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=vo,i=Po();if(is){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===kc)throw Error(s(349));0!==(30&fo)||Do(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,n,o,e),[e]),n.flags|=2048,Bo(9,No.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Po(),t=kc.identifierPrefix;if(is){var r=Xi;t=":"+t+"R"+(r=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+r),0<(r=So++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Jo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ao,useRef:jo,useState:function(){return Ao(_o)},useDebugValue:Qo,useDeferredValue:function(e){return Zo(Ro(),mo.memoizedState,e)},useTransition:function(){return[Ao(_o)[0],Ro().memoizedState]},useMutableSource:xo,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Jo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:ko,useRef:jo,useState:function(){return ko(_o)},useDebugValue:Qo,useDeferredValue:function(e){var t=Ro();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[ko(_o)[0],Ro().memoizedState]},useMutableSource:xo,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function la(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var i=r}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=Ds(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hc||(Hc=!0,Kc=n),da(0,t)},r}function va(e,t,r){(r=Ds(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){da(0,t),"function"!==typeof n&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ma(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pa;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Pu.bind(null,e,t,r),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ds(-1,1)).tag=2,Ns(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=S.ReactCurrentOwner,Sa=!1;function ba(e,t,r,n){t.child=null===e?Xs(t,null,r,n):Ys(t,e.child,r,n)}function Ca(e,t,r,n,i){r=r.render;var s=t.ref;return Es(t,i),n=Eo(e,t,r,n,s,i),r=To(),null===e||Sa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,r,n,i){if(null===e){var s=r.type;return"function"!==typeof s||Du(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mu(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(o,n)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Nu(s,n)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(cn(s,n)&&e.ref===t.ref){if(Sa=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(Sa=!0)}}return Ra(e,t,r,n,i)}function Ta(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pi(Nc,Dc),Dc|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pi(Nc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Pi(Nc,Dc),Dc|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Pi(Nc,Dc),Dc|=n;return ba(e,t,i,r),t.child}function Pa(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,r,n,i){var s=Oi(r)?ki:_i.current;return s=xi(t,s),Es(t,i),r=Eo(e,t,r,n,s,i),n=To(),null===e||Sa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function _a(e,t,r,n,i){if(Oi(r)){var s=!0;Li(t)}else s=!1;if(Es(t,i),null===t.stateNode)Wa(e,t),qs(t,r,n),Hs(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=r.contextType;"object"===typeof u&&null!==u?u=Ts(u):u=xi(t,u=Oi(r)?ki:_i.current);var l=r.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==n||c!==u)&&Ws(t,o,n,u),ks=!1;var d=t.memoizedState;o.state=d,Fs(t,n,o,i),c=t.memoizedState,a!==n||d!==c||Ai.current||ks?("function"===typeof l&&(js(t,r,l,n),c=t.memoizedState),(a=ks||Vs(t,r,a,n,d,c,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ms(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(c=r.contextType)&&null!==c?c=Ts(c):c=xi(t,c=Oi(r)?ki:_i.current);var p=r.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ws(t,o,n,c),ks=!1,d=t.memoizedState,o.state=d,Fs(t,n,o,i);var f=t.memoizedState;a!==h||d!==f||Ai.current||ks?("function"===typeof p&&(js(t,r,p,n),f=t.memoizedState),(u=ks||Vs(t,r,u,n,d,f,c)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=c,n=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Aa(e,t,r,n,s,i)}function Aa(e,t,r,n,i,s){Pa(e,t);var o=0!==(128&t.flags);if(!n&&!o)return i&&Fi(t,r,!1),Ha(e,t,s);n=t.stateNode,wa.current=t;var a=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):ba(e,t,a,s),t.memoizedState=n.state,i&&Fi(t,r,!0),t.child}function ka(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),no(e,t.containerInfo)}function xa(e,t,r,n,i){return ps(),fs(i),t.flags|=256,ba(e,t,r,n),t.child}var Oa,Da,Na,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function za(e,t,r){var n,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Pi(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fu(c,i,0,null),e=Lu(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(r),t.memoizedState=La,e):Ba(t,c));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,i,o,a){if(r)return 256&t.flags?(t.flags&=-257,ja(e,t,a,n=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Fu({mode:"visible",children:n.children},i,0,null),(o=Lu(o,i,a,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var c=n.dgst;return n=c,ja(e,t,a,n=ha(o=Error(s(419)),n,void 0))}if(c=0!==(a&e.childLanes),Sa||c){if(null!==(n=kc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),nu(n,e,i,-1))}return mu(),ja(e,t,a,n=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_u.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ns=ui(i.nextSibling),rs=t,is=!0,ss=null,null!==e&&(Gi[Ji++]=Yi,Gi[Ji++]=Xi,Gi[Ji++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Ba(t,n.children),t.flags|=4096,t)}(e,t,c,i,n,o,r);if(a){a=i.fallback,c=t.mode,n=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==n?a=Nu(n,a):(a=Lu(a,c,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~r,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,r,n){return null!==n&&fs(n),Ys(t,e.child,null,r),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Is(e.return,t,r)}function Va(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function qa(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(ba(e,t,n.children,r),0!==(2&(n=ao.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,r,t);else if(19===e.tag)Ua(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pi(ao,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===co(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Va(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Va(t,!0,r,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Nu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ja(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Oi(t.type)&&Di(),Ga(t),null;case 3:return n=t.stateNode,io(),Ti(Ai),Ti(_i),lo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Da(e,t),Ga(t),null;case 5:oo(t);var i=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)Na(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=ro($s.current),hs(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[di]=t,n[pi]=o,e=0!==(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(i=0;i<Mn.length;i++)Bn(Mn[i],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":Y(n,o),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Bn("invalid",n);break;case"textarea":ie(n,o),Bn("invalid",n)}for(var c in ye(r,o),i=null,o)if(o.hasOwnProperty(c)){var u=o[c];"children"===c?"string"===typeof u?n.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zn(n.textContent,u,e),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zn(n.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Bn("scroll",n)}switch(r){case"input":K(n),$(n,o,!0);break;case"textarea":K(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=$n)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[di]=t,e[pi]=n,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),i=n;break;case"iframe":case"object":case"embed":Bn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Mn.length;i++)Bn(Mn[i],e);i=n;break;case"source":Bn("error",e),i=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),i=n;break;case"details":Bn("toggle",e),i=n;break;case"input":Y(e,n),i=Q(e,n),Bn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=F({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Bn("invalid",e)}for(o in ye(r,i),u=i)if(u.hasOwnProperty(o)){var l=u[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==r||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Bn("scroll",e):null!=l&&w(e,o,l,c))}switch(r){case"input":K(e),$(e,n,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=ro(to.current),ro($s.current),hs(t)){if(n=t.stateNode,r=t.memoizedProps,n[di]=t,(o=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Zn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=t,t.stateNode=n}return Ga(t),null;case 13:if(Ti(ao),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Mc&&(Mc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Da(e,t),null===e&&Vn(t.stateNode.containerInfo),Ga(t),null;case 10:return Cs(t.type._context),Ga(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ga(t),null;if(n=0!==(128&t.flags),null===(c=o.rendering))if(n)Ka(o,!1);else{if(0!==Mc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ka(o,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pi(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qc&&(t.flags|=128,n=!0,Ka(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=co(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ga(t),null}else 2*Xe()-o.renderingStartTime>qc&&1073741824!==r&&(t.flags|=128,n=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=o.last)?r.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=ao.current,Pi(ao,n?1&r|2:1&r),t):(Ga(t),null);case 22:case 23:return du(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(_i),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Oa=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Da=function(){},Na=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ro($s.current);var s,o=null;switch(r){case"input":i=Q(e,i),n=Q(e,n),o=[];break;case"select":i=F({},i,{value:void 0}),n=F({},n,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),n=ne(e,n),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in ye(r,n),r=null,i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(s in c)c.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var u=n[l];if(c=null!=i?i[l]:void 0,n.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(o||(o=[]),o.push(l,r)),r=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(o=o||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Bn("scroll",e),o||c===u||(o=[])):(o=o||[]).push(l,u))}r&&(o=o||[]).push("style",r);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ma=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ya=!1,Xa=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function ec(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Tu(e,t,n)}else r.current=null}function tc(e,t,r){try{r()}catch(n){Tu(e,t,n)}}var rc=!1;function nc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,r,s)}i=i.next}while(i!==n)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sc(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(uc(e,t,r),e=e.sibling;null!==e;)uc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var hc=null,dc=!1;function pc(e,t,r){for(r=r.child;null!==r;)fc(e,t,r),r=r.sibling}function fc(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,r)}catch(a){}switch(r.tag){case 5:Xa||ec(r,t);case 6:var n=hc,i=dc;hc=null,pc(e,t,r),dc=i,null!==(hc=n)&&(dc?(e=hc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):hc.removeChild(r.stateNode));break;case 18:null!==hc&&(dc?(e=hc,r=r.stateNode,8===e.nodeType?ci(e.parentNode,r):1===e.nodeType&&ci(e,r),Vt(e)):ci(hc,r.stateNode));break;case 4:n=hc,i=dc,hc=r.stateNode.containerInfo,dc=!0,pc(e,t,r),hc=n,dc=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(r,t,o),i=i.next}while(i!==n)}pc(e,t,r);break;case 1:if(!Xa&&(ec(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Tu(r,t,a)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:1&r.mode?(Xa=(n=Xa)||null!==r.memoizedState,pc(e,t,r),Xa=n):pc(e,t,r);break;default:pc(e,t,r)}}function vc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Za),t.forEach((function(t){var n=Au.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function mc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));fc(o,a,i),hc=null,dc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Tu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),yc(e),4&n){try{nc(3,e,e.return),ic(3,e)}catch(m){Tu(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Tu(e,e.return,m)}}break;case 1:mc(t,e),yc(e),512&n&&null!==r&&ec(r,r.return);break;case 5:if(mc(t,e),yc(e),512&n&&null!==r&&ec(r,r.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Tu(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==r?r.memoizedProps:o,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===o.type&&null!=o.name&&X(i,o),we(c,a);var l=we(c,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,l)}switch(c){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(m){Tu(e,e.return,m)}}break;case 6:if(mc(t,e),yc(e),4&n){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tu(e,e.return,m)}}break;case 3:if(mc(t,e),yc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Tu(e,e.return,m)}break;case 4:default:mc(t,e),yc(e);break;case 13:mc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vc=Xe())),4&n&&vc(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?(Xa=(l=Xa)||h,mc(t,e),Xa=l):mc(t,e),yc(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(f=(p=$a).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:ec(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){n=p,r=p.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tu(n,r,m)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){Cc(d);continue}}null!==f?(f.return=p,$a=f):Cc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ve("display",a))}catch(m){Tu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Tu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),yc(e),4&n&&vc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ac(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(de(i,""),n.flags&=-33),lc(e,cc(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;uc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,r){$a=e,Sc(e,t,r)}function Sc(e,t,r){for(var n=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Xa;a=Ya;var u=Xa;if(Ya=o,(Xa=c)&&!u)for($a=i;null!==$a;)c=(o=$a).child,22===o.tag&&null!==o.memoizedState?Ic(i):null!==c?(c.return=o,$a=c):Ic(i);for(;null!==s;)$a=s,Sc(s,t,r),s=s.sibling;$a=i,Ya=a,Xa=u}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):bc(e)}}function bc(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||ic(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xa)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ms(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zs(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}zs(t,a,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sc(t)}catch(p){Tu(t,t.return,p)}}if(t===e){$a=null;break}if(null!==(r=t.sibling)){r.return=t.return,$a=r;break}$a=t.return}}function Cc(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$a=r;break}$a=t.return}}function Ic(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ic(4,t)}catch(c){Tu(t,r,c)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(c){Tu(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tu(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tu(t,o,c)}}}catch(c){Tu(t,t.return,c)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Ec,Tc=Math.ceil,Pc=S.ReactCurrentDispatcher,Rc=S.ReactCurrentOwner,_c=S.ReactCurrentBatchConfig,Ac=0,kc=null,xc=null,Oc=0,Dc=0,Nc=Ei(0),Mc=0,Lc=null,Fc=0,zc=0,Bc=0,jc=null,Uc=null,Vc=0,qc=1/0,Wc=null,Hc=!1,Kc=null,Gc=null,Jc=!1,Qc=null,Yc=0,Xc=0,Zc=null,$c=-1,eu=0;function tu(){return 0!==(6&Ac)?Xe():-1!==$c?$c:$c=Xe()}function ru(e){return 0===(1&e.mode)?1:0!==(2&Ac)&&0!==Oc?Oc&-Oc:null!==vs.transition?(0===eu&&(eu=vt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,r,n){if(50<Xc)throw Xc=0,Zc=null,Error(s(185));gt(e,r,n),0!==(2&Ac)&&e===kc||(e===kc&&(0===(2&Ac)&&(zc|=r),4===Mc&&cu(e,Oc)),iu(e,n),1===r&&0===Ac&&0===(1&t.mode)&&(qc=Xe()+500,Bi&&Vi()))}function iu(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&r)&&0===(a&n)||(i[o]=pt(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var n=dt(e,e===kc?Oc:0);if(0===n)null!==r&&Je(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Je(r),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(uu.bind(null,e)):Ui(uu.bind(null,e)),oi((function(){0===(6&Ac)&&Vi()})),r=null;else{switch(St(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=ku(r,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function su(e,t){if($c=-1,eu=0,0!==(6&Ac))throw Error(s(327));var r=e.callbackNode;if(Iu()&&e.callbackNode!==r)return null;var n=dt(e,e===kc?Oc:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gu(e,n);else{t=n;var i=Ac;Ac|=2;var o=vu();for(kc===e&&Oc===t||(Wc=null,qc=Xe()+500,pu(e,t));;)try{wu();break}catch(c){fu(e,c)}bs(),Pc.current=o,Ac=i,null!==xc?t=0:(kc=null,Oc=0,t=Mc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(n=i,t=ou(e,i))),1===t)throw r=Lc,pu(e,0),cu(e,n),iu(e,Xe()),r;if(6===t)cu(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,n))&&(0!==(o=ft(e))&&(n=o,t=ou(e,o))),1===t))throw r=Lc,pu(e,0),cu(e,n),iu(e,Xe()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:Cu(e,Uc,Wc);break;case 3:if(cu(e,n),(130023424&n)===n&&10<(t=Vc+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(Cu.bind(null,e,Uc,Wc),t);break}Cu(e,Uc,Wc);break;case 4:if(cu(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ot(n);o=1<<a,(a=t[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Xe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tc(n/1960))-n)){e.timeoutHandle=ni(Cu.bind(null,e,Uc,Wc),n);break}Cu(e,Uc,Wc);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===r?su.bind(null,e):null}function ou(e,t){var r=jc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Uc,Uc=r,null!==t&&au(t)),e}function au(e){null===Uc?Uc=e:Uc.push.apply(Uc,e)}function cu(e,t){for(t&=~Bc,t&=~zc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function uu(e){if(0!==(6&Ac))throw Error(s(327));Iu();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var r=gu(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=ou(e,n))}if(1===r)throw r=Lc,pu(e,0),cu(e,t),iu(e,Xe()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Uc,Wc),iu(e,Xe()),null}function lu(e,t){var r=Ac;Ac|=1;try{return e(t)}finally{0===(Ac=r)&&(qc=Xe()+500,Bi&&Vi())}}function hu(e){null!==Qc&&0===Qc.tag&&0===(6&Ac)&&Iu();var t=Ac;Ac|=1;var r=_c.transition,n=wt;try{if(_c.transition=null,wt=1,e)return e()}finally{wt=n,_c.transition=r,0===(6&(Ac=t))&&Vi()}}function du(){Dc=Nc.current,Ti(Nc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==xc)for(r=xc.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Di();break;case 3:io(),Ti(Ai),Ti(_i),lo();break;case 5:oo(n);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Cs(n.type._context);break;case 22:case 23:du()}r=r.return}if(kc=e,xc=e=Nu(e.current,null),Oc=Dc=t,Mc=0,Lc=null,Bc=zc=Fc=0,Uc=jc=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(n=(r=Ps[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=i,n.next=o}r.pending=n}Ps=null}return e}function fu(e,t){for(;;){var r=xc;try{if(bs(),ho.current=oa,yo){for(var n=vo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}yo=!1}if(fo=0,go=mo=vo=null,wo=!1,So=0,Rc.current=null,null===r||null===r.return){Mc=1,Lc=t,xc=null;break}e:{var o=e,a=r.return,c=r,u=t;if(t=Oc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,ya(f,a,c,0,t),1&f.mode&&ma(o,l,t),u=l;var v=(t=f).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ma(o,l,t),mu();break e}u=Error(s(426))}else if(is&&1&c.mode){var g=ga(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ya(g,a,c,0,t),fs(la(u,c));break e}}o=u=la(u,c),4!==Mc&&(Mc=2),null===jc?jc=[o]:jc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,fa(0,u,t));break e;case 1:c=u;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gc||!Gc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,va(o,c,t));break e}}o=o.return}while(null!==o)}bu(r)}catch(S){t=S,xc===r&&null!==r&&(xc=r=r.return);continue}break}}function vu(){var e=Pc.current;return Pc.current=oa,null===e?oa:e}function mu(){0!==Mc&&3!==Mc&&2!==Mc||(Mc=4),null===kc||0===(268435455&Fc)&&0===(268435455&zc)||cu(kc,Oc)}function gu(e,t){var r=Ac;Ac|=2;var n=vu();for(kc===e&&Oc===t||(Wc=null,pu(e,t));;)try{yu();break}catch(i){fu(e,i)}if(bs(),Ac=r,Pc.current=n,null!==xc)throw Error(s(261));return kc=null,Oc=0,Mc}function yu(){for(;null!==xc;)Su(xc)}function wu(){for(;null!==xc&&!Qe();)Su(xc)}function Su(e){var t=Ec(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?bu(e):xc=t,Rc.current=null}function bu(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ja(r,t,Dc)))return void(xc=r)}else{if(null!==(r=Qa(r,t)))return r.flags&=32767,void(xc=r);if(null===e)return Mc=6,void(xc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Mc&&(Mc=5)}function Cu(e,t,r){var n=wt,i=_c.transition;try{_c.transition=null,wt=1,function(e,t,r,n){do{Iu()}while(null!==Qc);if(0!==(6&Ac))throw Error(s(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ot(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,o),e===kc&&(xc=kc=null,Oc=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Jc||(Jc=!0,ku(tt,(function(){return Iu(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=_c.transition,_c.transition=null;var a=wt;wt=1;var c=Ac;Ac|=4,Rc.current=null,function(e,t){if(ei=Wt,pn(e=dn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(b){r=null;break e}var a=0,c=-1,u=-1,l=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==n&&3!==d.nodeType||(u=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===r&&++l===i&&(c=a),p===o&&++h===n&&(u=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}r=-1===c||-1===u?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;1===S.nodeType?S.textContent="":9===S.nodeType&&S.documentElement&&S.removeChild(S.documentElement);break;default:throw Error(s(163))}}catch(b){Tu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}v=rc,rc=!1}(e,r),gc(r,e),fn(ti),Wt=!!ei,ti=ei=null,e.current=r,wc(r,e,i),Ye(),Ac=c,wt=a,_c.transition=o}else e.current=r;if(Jc&&(Jc=!1,Qc=e,Yc=i),o=e.pendingLanes,0===o&&(Gc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),iu(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=Kc,Kc=null,e;0!==(1&Yc)&&0!==e.tag&&Iu(),o=e.pendingLanes,0!==(1&o)?e===Zc?Xc++:(Xc=0,Zc=e):Xc=0,Vi()}(e,t,r,n)}finally{_c.transition=i,wt=n}return null}function Iu(){if(null!==Qc){var e=St(Yc),t=_c.transition,r=wt;try{if(_c.transition=null,wt=16>e?16:e,null===Qc)var n=!1;else{if(e=Qc,Qc=null,Yc=0,0!==(6&Ac))throw Error(s(331));var i=Ac;for(Ac|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var c=o.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for($a=l;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nc(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var p=(h=$a).sibling,f=h.return;if(oc(h),h===l){$a=null;break}if(null!==p){p.return=f,$a=p;break}$a=f}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$a=y;break e}$a=o.return}}var w=e.current;for($a=w;null!==$a;){var S=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==S)S.return=a,$a=S;else e:for(a=w;null!==$a;){if(0!==(2048&(c=$a).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(C){Tu(c,c.return,C)}if(c===a){$a=null;break e}var b=c.sibling;if(null!==b){b.return=c.return,$a=b;break e}$a=c.return}}if(Ac=i,Vi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(C){}n=!0}return n}finally{wt=r,_c.transition=t}}return!1}function Eu(e,t,r){e=Ns(e,t=fa(0,t=la(r,t),1),1),t=tu(),null!==e&&(gt(e,1,t),iu(e,t))}function Tu(e,t,r){if(3===e.tag)Eu(e,e,r);else for(;null!==t;){if(3===t.tag){Eu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gc||!Gc.has(n))){t=Ns(t,e=va(t,e=la(r,e),1),1),e=tu(),null!==t&&(gt(t,1,e),iu(t,e));break}}t=t.return}}function Pu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&r,kc===e&&(Oc&r)===r&&(4===Mc||3===Mc&&(130023424&Oc)===Oc&&500>Xe()-Vc?pu(e,0):Bc|=r),iu(e,t)}function Ru(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=tu();null!==(e=As(e,t))&&(gt(e,t,r),iu(e,r))}function _u(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ru(e,r)}function Au(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Ru(e,r)}function ku(e,t){return Ge(e,t)}function xu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,r,n){return new xu(e,t,r,n)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var r=e.alternate;return null===r?((r=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mu(e,t,r,n,i,o){var a=2;if(n=e,"function"===typeof e)Du(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Lu(r.children,i,o,t);case E:a=8,i|=8;break;case T:return(e=Ou(12,r,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Ou(13,r,t,i)).elementType=A,e.lanes=o,e;case k:return(e=Ou(19,r,t,i)).elementType=k,e.lanes=o,e;case D:return Fu(r,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case P:a=10;break e;case R:a=9;break e;case _:a=11;break e;case x:a=14;break e;case O:a=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ou(a,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function Lu(e,t,r,n){return(e=Ou(7,e,n,t)).lanes=r,e}function Fu(e,t,r,n){return(e=Ou(22,e,n,t)).elementType=D,e.lanes=r,e.stateNode={isHidden:!1},e}function zu(e,t,r){return(e=Ou(6,e,null,t)).lanes=r,e}function Bu(e,t,r){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,r,n,i,s,o,a,c){return e=new ju(e,t,r,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ou(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xs(s),e}function Vu(e){if(!e)return Ri;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Oi(r))return Mi(e,r,t)}return t}function qu(e,t,r,n,i,s,o,a,c){return(e=Uu(r,n,!0,e,0,s,0,a,c)).context=Vu(null),r=e.current,(s=Ds(n=tu(),i=ru(r))).callback=void 0!==t&&null!==t?t:null,Ns(r,s,i),e.current.lanes=i,gt(e,i,n),iu(e,n),e}function Wu(e,t,r,n){var i=t.current,s=tu(),o=ru(i);return r=Vu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ds(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ns(i,t,o))&&(nu(e,i,o,s),Ms(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Ec=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)Sa=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return Sa=!1,function(e,t,r){switch(t.tag){case 3:ka(t),ps();break;case 5:so(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Pi(gs,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Pi(ao,1&ao.current),t.flags|=128,null):0!==(r&t.child.childLanes)?za(e,t,r):(Pi(ao,1&ao.current),null!==(e=Ha(e,t,r))?e.sibling:null);Pi(ao,1&ao.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return qa(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pi(ao,ao.current),n)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,r)}return Ha(e,t,r)}(e,t,r);Sa=0!==(131072&e.flags)}else Sa=!1,is&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wa(e,t),e=t.pendingProps;var i=xi(t,_i.current);Es(t,r),i=Eo(null,t,n,e,i,r);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(n)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,xs(t),i.updater=Us,t.stateNode=i,i._reactInternals=t,Hs(t,n,e,r),t=Aa(null,t,n,!0,o,r)):(t.tag=0,is&&o&&es(t),ba(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===x)return 14}return 2}(n),e=ms(n,e),i){case 0:t=Ra(null,t,n,e,r);break e;case 1:t=_a(null,t,n,e,r);break e;case 11:t=Ca(null,t,n,e,r);break e;case 14:t=Ia(null,t,n,ms(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ra(e,t,n,i=t.elementType===n?i:ms(n,i),r);case 1:return n=t.type,i=t.pendingProps,_a(e,t,n,i=t.elementType===n?i:ms(n,i),r);case 3:e:{if(ka(t),null===e)throw Error(s(387));n=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=xa(e,t,n,r,i=la(Error(s(423)),t));break e}if(n!==i){t=xa(e,t,n,r,i=la(Error(s(424)),t));break e}for(ns=ui(t.stateNode.containerInfo.firstChild),rs=t,is=!0,ss=null,r=Xs(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),n===i){t=Ha(e,t,r);break e}ba(e,t,n,r)}t=t.child}return t;case 5:return so(t),null===e&&us(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(n,i)?a=null:null!==o&&ri(n,o)&&(t.flags|=32),Pa(e,t),ba(e,t,a,r),t.child;case 6:return null===e&&us(t),null;case 13:return za(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ys(t,null,n,r):ba(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Ca(e,t,n,i=t.elementType===n?i:ms(n,i),r);case 7:return ba(e,t,t.pendingProps,r),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Pi(gs,n._currentValue),n._currentValue=a,null!==o)if(an(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ha(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var u=c.firstContext;null!==u;){if(u.context===n){if(1===o.tag){(u=Ds(-1,r&-r)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),l.pending=u}}o.lanes|=r,null!==(u=o.alternate)&&(u.lanes|=r),Is(o.return,r,t),c.lanes|=r;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Is(a,r,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Es(t,r),n=n(i=Ts(i)),t.flags|=1,ba(e,t,n,r),t.child;case 14:return i=ms(n=t.type,t.pendingProps),Ia(e,t,n,i=ms(n.type,i),r);case 15:return Ea(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ms(n,i),Wa(e,t),t.tag=1,Oi(n)?(e=!0,Li(t)):e=!1,Es(t,r),qs(t,n,i),Hs(t,n,i,r),Aa(null,t,n,!0,e,r);case 19:return qa(e,t,r);case 22:return Ta(e,t,r)}throw Error(s(156,t.tag))};var Ju="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function el(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hu(o);a.call(e)}}Wu(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"===typeof n){var s=n;n=function(){var e=Hu(o);s.call(e)}}var o=qu(t,n,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[fi]=o.current,Vn(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var a=n;n=function(){var e=Hu(c);a.call(e)}}var c=Uu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[fi]=c.current,Vn(8===e.nodeType?e.parentNode:e),hu((function(){Wu(t,c,r,n)})),c}(r,t,e,i,n);return Hu(o)}Yu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wu(e,t,null,null)},Yu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Wu(null,e,null,null)})),t[fi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dt.length&&0!==t&&t<Dt[r].priority;r++);Dt.splice(r,0,e),0===r&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(yt(t,1|r),iu(t,Xe()),0===(6&Ac)&&(qc=Xe()+500,Vi()))}break;case 13:hu((function(){var t=As(e,1);if(null!==t){var r=tu();nu(t,e,1,r)}})),Gu(e,1)}},Ct=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)nu(t,e,134217728,tu());Gu(e,134217728)}},It=function(e){if(13===e.tag){var t=ru(e),r=As(e,t);if(null!==r)nu(r,e,t,tu());Gu(e,t)}},Et=function(){return wt},Tt=function(e,t){var r=wt;try{return wt=e,t()}finally{wt=r}},Ce=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=bi(n);if(!i)throw Error(s(90));G(n),Z(n,i)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},_e=lu,Ae=hu;var tl={usingClientEntryPoint:!1,Events:[wi,Si,bi,Pe,Re,lu]},rl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(nl),st=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var r=!1,n="",i=Ju;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,r){if(!Zu(t))throw Error(s(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xu(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,i=!1,o="",a=Ju;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=qu(t,null,e,1,null!=r?r:null,i,0,o,a),e[fi]=t.current,Vn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Yu(t)},t.render=function(e,t,r){if(!Zu(t))throw Error(s(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zu(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return el(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},1153:(e,t,r)=>{"use strict";var n=r(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,s={},u=null,l=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,n)&&!c.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:l,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function y(){}function w(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var S=w.prototype=new y;S.constructor=w,v(S,g.prototype),S.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];s.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:r,type:e,key:o,ref:a,props:s,_owner:I.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var R=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return o=o(c=e),e=""===s?"."+_(c,0):s,b(o)?(i="",null!=e&&(i=e.replace(R,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(P(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(R,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",b(e))for(var u=0;u<e.length;u++){var l=s+_(a=e[u],u);c+=A(a,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,l=s+_(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function k(e,t,r){if(null==e)return e;var n=[],i=0;return A(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function x(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},N={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:k,forEach:function(e,t,r){k(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)C.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:r,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},579:(e,t,r)=>{"use strict";e.exports=r(1153)},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<s(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var a=2*(n+1)-1,c=e[a],u=a+1,l=e[u];if(0>s(c,r))u<i&&0>s(l,c)?(e[n]=l,e[u]=r,n=u):(e[n]=c,e[a]=r,n=a);else{if(!(u<i&&0>s(l,r)))break e;e[n]=l,e[u]=r,n=u}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],l=[],h=1,d=null,p=3,f=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function S(e){for(var t=n(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,r(u,t)}t=n(l)}}function b(e){if(m=!1,S(e),!v)if(null!==n(u))v=!0,D(C);else{var t=n(l);null!==t&&N(b,t.startTime-e)}}function C(e,r){v=!1,m&&(m=!1,y(P),P=-1),f=!0;var s=p;try{for(S(r),d=n(u);null!==d&&(!(d.expirationTime>r)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?d.callback=a:d===n(u)&&i(u),S(r)}else i(u);d=n(u)}if(null!==d)var c=!0;else{var h=n(l);null!==h&&N(b,h.startTime-r),c=!1}return c}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,E=!1,T=null,P=-1,R=5,_=-1;function A(){return!(t.unstable_now()-_<R)}function k(){if(null!==T){var e=t.unstable_now();_=e;var r=!0;try{r=T(!0,e)}finally{r?I():(E=!1,T=null)}}else E=!1}if("function"===typeof w)I=function(){w(k)};else if("undefined"!==typeof MessageChannel){var x=new MessageChannel,O=x.port2;x.port1.onmessage=k,I=function(){O.postMessage(null)}}else I=function(){g(k,0)};function D(e){T=e,E||(E=!0,I())}function N(e,r){P=g((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,D(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,r(l,e),null===n(u)&&e===n(l)&&(m?(y(P),P=-1):m=!0,N(b,s-o))):(e.sortIndex=a,r(u,e),v||f||(v=!0,D(C))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},6308:()=>{},2250:()=>{},9645:()=>{},8632:()=>{},3678:()=>{},4573:()=>{},952:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.m=e,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".061517d3.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="todo-app:";r.l=(n,i,s,o)=>{if(e[n])e[n].push(i);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+s),a.src=n),e[n]=[i];var d=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="./",(()=>{var e={792:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((r,n)=>i=e[t]=[r,n]));n.push(i[2]=s);var o=r.p+r.u(t),a=new Error;r.l(o,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,s,o=n[0],a=n[1],c=n[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)c(r)}for(t&&t(n);u<o.length;u++)s=o[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunktodo_app=self.webpackChunktodo_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=r(5043),t=r(4391),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=e.createContext&&e.createContext(n),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function a(t){return t&&t.map((function(t,r){return e.createElement(t.tag,s({key:r},t.attr),a(t.child))}))}function c(t){return function(r){return e.createElement(u,s({attr:s({},t.attr)},r),a(t.child))}}function u(t){var r=function(r){var n,i=t.attr,a=t.size,c=t.title,u=o(t,["attr","size","title"]),l=a||r.size||"1em";return r.className&&(n=r.className),t.className&&(n=(n?n+" ":"")+t.className),e.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,u,{className:n,style:s(s({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),c&&e.createElement("title",null,c),t.children)};return void 0!==i?e.createElement(i.Consumer,null,(function(e){return r(e)})):r(n)}function l(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M2.3 412.2c-4.5 7.6-2.1 17.5 5.5 22.2l105.9 65.2c7.7 4.7 17.7 2.4 22.4-5.3 0-.1.1-.2.1-.2 67.1-112.2 80.5-95.9 280.9-.7 8.1 3.9 17.8.4 21.7-7.7.1-.1.1-.3.2-.4l50.4-114.1c3.6-8.1-.1-17.6-8.1-21.3-22.2-10.4-66.2-31.2-105.9-50.3C127.5 179 44.6 345.3 2.3 412.2zm507.4-312.1c4.5-7.6 2.1-17.5-5.5-22.2L398.4 12.8c-7.5-5-17.6-3.1-22.6 4.4-.2.3-.4.6-.6 1-67.3 112.6-81.1 95.6-280.6.9-8.1-3.9-17.8-.4-21.7 7.7-.1.1-.1.3-.2.4L22.2 141.3c-3.6 8.1.1 17.6 8.1 21.3 22.2 10.4 66.3 31.2 106 50.4 248 120 330.8-45.4 373.4-112.9z"}}]})(e)}function h(e){return c({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.3 46.5H388.5c-48.1 0-89.9 33.3-100.4 80.3-10.6-47-52.3-80.3-100.4-80.3H48c-26.5 0-48 21.5-48 48v245.8c0 26.5 21.5 48 48 48h89.7c102.2 0 132.7 24.4 147.3 75 .7 2.8 5.2 2.8 6 0 14.7-50.6 45.2-75 147.3-75H528c26.5 0 48-21.5 48-48V94.6c0-26.4-21.3-47.9-47.7-48.1zM242 311.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5V289c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V251zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm259.3 121.7c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5V228c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.8c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V190z"}}]})(e)}function d(e){return c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function p(e){return c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"}}]})(e)}function f(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"}}]})(e)}function v(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function m(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function g(e){return c({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function y(e){return c({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function w(e){return c({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function S(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"}}]})(e)}function b(e){return c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function C(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function I(e){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function E(e){return c({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function T(e){return c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}const P=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296===(64512&i)&&n+1<e.length&&56320===(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),n.push(r[u],r[l],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{const s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<e.length;){const t=r[e.charAt(i++)],s=i<e.length?r[e.charAt(i)]:0;++i;const o=i<e.length?r[e.charAt(i)]:64;++i;const a=i<e.length?r[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new _;const c=t<<2|s>>4;if(n.push(c),64!==o){const e=s<<4&240|o>>2;if(n.push(e),64!==a){const e=o<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A=function(e){return function(e){const t=P(e);return R.encodeByteArray(t,!0)}(e).replace(/\./g,"")},k=function(e){try{return R.decodeString(e,!0)}catch(nA){console.error("base64Decode failed: ",nA)}return null};const x=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,O=()=>{try{return x()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AZURE_SPEECH_API_KEY:"55c4f5f13d764a77a683b5c225c52705",REACT_APP_FIREBASE_API_KEY:"AIzaSyBNeonGTfBV2QhXxkufPueC-gQLCrcsB08",REACT_APP_FIREBASE_AUTH_DOMAIN:"reviewtext-ad5c6.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://reviewtext-ad5c6.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"reviewtext-ad5c6",REACT_APP_FIREBASE_STORAGE_BUCKET:"reviewtext-ad5c6.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"892085575649",REACT_APP_FIREBASE_APP_ID:"1:892085575649:web:b57abe0e1438f10dc6fca0"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(nA){return}const t=e&&k(e[1]);return t&&JSON.parse(t)})()}catch(nA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(nA))}},D=e=>{var t,r;return null===(r=null===(t=O())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},N=()=>{var e;return null===(e=O())||void 0===e?void 0:e.config},M=e=>{var t;return null===(t=O())||void 0===t?void 0:t["_".concat(e)]};class L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,r))}}}function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function z(){return!function(){var e;const t=null===(e=O())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(r.g.process)}catch(nA){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){try{return"object"===typeof indexedDB}catch(nA){return!1}}class j extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},r="".concat(this.service,"/").concat(e),n=this.errors[e],i=n?function(e,t){return e.replace(V,((e,r)=>{const n=t[r];return null!=n?String(n):"<".concat(r,"?>")}))}(n,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(r,").");return new j(r,s,t)}}const V=/\{\$([^}]+)}/g;function q(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const r=e[i],s=t[i];if(W(r)&&W(s)){if(!q(r,s))return!1}else if(r!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function W(e){return null!==e&&"object"===typeof e}function H(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function K(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}})),t}function G(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}class J{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!==typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"===typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=Q),void 0===n.error&&(n.error=Q),void 0===n.complete&&(n.complete=Q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(nA){}})),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(nA){"undefined"!==typeof console&&console.error&&console.error(nA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Q(){}function Y(e){return e&&e._delegate?e._delegate:e}class X{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Z="[DEFAULT]";class ${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new L;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(nA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),n=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(nA){if(n)return null;throw nA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(nA){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(nA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,s]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(i)&&s.resolve(n)}return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(n){}}getOrInitializeService(e){let{instanceIdentifier:t,options:r={}}=e,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Z?void 0:i),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(s){}var i;return n||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.component?this.component.multipleInstances?e:Z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const te=[];var re;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(re||(re={}));const ne={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},ie=re.INFO,se={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},oe=function(e,t){if(t<e.logLevel)return;const r=(new Date).toISOString(),n=se[t];if(!n)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[n]("[".concat(r,"]  ").concat(e.name,":"),...s)};class ae{constructor(e){this.name=e,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,te.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}const ce=(e,t)=>t.some((t=>e instanceof t));let ue,le;const he=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,ve=new WeakMap;let me={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return de.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pe.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return we(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ge(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(Se(this),r),we(he.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return we(e.apply(Se(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const s=e.call(Se(this),t,...n);return pe.set(s,t.sort?t.sort():[t]),we(s)}}function ye(e){return"function"===typeof e?ge(e):(e instanceof IDBTransaction&&function(e){if(de.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));de.set(e,t)}(e),ce(e,ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,me):e)}function we(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(we(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&he.set(t,e)})).catch((()=>{})),ve.set(t,e),t}(e);if(fe.has(e))return fe.get(e);const t=ye(e);return t!==e&&(fe.set(e,t),ve.set(t,e)),t}const Se=e=>ve.get(e);const be=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ie=new Map;function Ee(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ie.get(t))return Ie.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=Ce.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!be.includes(r))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return n&&(s=s.index(a.shift())),(await Promise.all([s[r](...a),i&&t.done]))[0]};return Ie.set(t,s),s}me=(e=>({...e,get:(t,r,n)=>Ee(t,r)||e.get(t,r,n),has:(t,r)=>!!Ee(t,r)||e.has(t,r)}))(me);class Te{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Pe="@firebase/app",Re="0.10.1",_e=new ae("@firebase/app"),Ae="@firebase/app-compat",ke="@firebase/analytics-compat",xe="@firebase/analytics",Oe="@firebase/app-check-compat",De="@firebase/app-check",Ne="@firebase/auth",Me="@firebase/auth-compat",Le="@firebase/database",Fe="@firebase/database-compat",ze="@firebase/functions",Be="@firebase/functions-compat",je="@firebase/installations",Ue="@firebase/installations-compat",Ve="@firebase/messaging",qe="@firebase/messaging-compat",We="@firebase/performance",He="@firebase/performance-compat",Ke="@firebase/remote-config",Ge="@firebase/remote-config-compat",Je="@firebase/storage",Qe="@firebase/storage-compat",Ye="@firebase/firestore",Xe="@firebase/firestore-compat",Ze="firebase",$e="[DEFAULT]",et={[Pe]:"fire-core",[Ae]:"fire-core-compat",[xe]:"fire-analytics",[ke]:"fire-analytics-compat",[De]:"fire-app-check",[Oe]:"fire-app-check-compat",[Ne]:"fire-auth",[Me]:"fire-auth-compat",[Le]:"fire-rtdb",[Fe]:"fire-rtdb-compat",[ze]:"fire-fn",[Be]:"fire-fn-compat",[je]:"fire-iid",[Ue]:"fire-iid-compat",[Ve]:"fire-fcm",[qe]:"fire-fcm-compat",[We]:"fire-perf",[He]:"fire-perf-compat",[Ke]:"fire-rc",[Ge]:"fire-rc-compat",[Je]:"fire-gcs",[Qe]:"fire-gcs-compat",[Ye]:"fire-fst",[Xe]:"fire-fst-compat","fire-js":"fire-js",[Ze]:"fire-js-all"},tt=new Map,rt=new Map,nt=new Map;function it(e,t){try{e.container.addComponent(t)}catch(nA){_e.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),nA)}}function st(e){const t=e.name;if(nt.has(t))return _e.debug("There were multiple attempts to register component ".concat(t,".")),!1;nt.set(t,e);for(const r of tt.values())it(r,e);for(const r of rt.values())it(r,e);return!0}function ot(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function at(e){return void 0!==e.settings}const ct=new U("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ut{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new X("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const lt="10.11.0";function ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if("object"!==typeof t){t={name:t}}const n=Object.assign({name:$e,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!==typeof i||!i)throw ct.create("bad-app-name",{appName:String(i)});if(r||(r=N()),!r)throw ct.create("no-options");const s=tt.get(i);if(s){if(q(r,s.options)&&q(n,s.config))return s;throw ct.create("duplicate-app",{appName:i})}const o=new ee(i);for(const c of nt.values())o.addComponent(c);const a=new ut(r,n,o);return tt.set(i,a),a}function dt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;const t=tt.get(e);if(!t&&e===$e&&N())return ht();if(!t)throw ct.create("no-app",{appName:e});return t}function pt(e,t,r){var n;let i=null!==(n=et[e])&&void 0!==n?n:e;r&&(i+="-".concat(r));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _e.warn(e.join(" "))}st(new X("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const ft="firebase-heartbeat-database",vt=1,mt="firebase-heartbeat-store";let gt=null;function yt(){return gt||(gt=function(e,t){let{blocked:r,upgrade:n,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=we(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(we(o.result),e.oldVersion,e.newVersion,we(o.transaction),e)})),r&&o.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ft,vt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(mt)}catch(nA){console.warn(nA)}}}).catch((e=>{throw ct.create("idb-open",{originalErrorMessage:e.message})}))),gt}async function wt(e,t){try{const r=(await yt()).transaction(mt,"readwrite"),n=r.objectStore(mt);await n.put(t,St(e)),await r.done}catch(nA){if(nA instanceof j)_e.warn(nA.message);else{const t=ct.create("idb-set",{originalErrorMessage:null===nA||void 0===nA?void 0:nA.message});_e.warn(t.message)}}}function St(e){return"".concat(e.name,"!").concat(e.options.appId)}class bt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new It(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ct();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ct(),{heartbeatsToSend:r,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const r=[];let n=e.slice();for(const i of e){const e=r.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Et(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Et(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=A(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ct(){return(new Date).toISOString().substring(0,10)}class It{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!B()&&new Promise(((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(r){t(r)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await yt()).transaction(mt),r=await t.objectStore(mt).get(St(e));return await t.done,r}catch(nA){if(nA instanceof j)_e.warn(nA.message);else{const t=ct.create("idb-get",{originalErrorMessage:null===nA||void 0===nA?void 0:nA.message});_e.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return wt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function Et(e){return A(JSON.stringify({version:2,heartbeats:e})).length}var Tt;Tt="",st(new X("platform-logger",(e=>new Te(e)),"PRIVATE")),st(new X("heartbeat",(e=>new bt(e)),"PRIVATE")),pt(Pe,Re,Tt),pt(Pe,Re,"esm2017"),pt("fire-js","");pt("firebase","10.11.0","app");var Pt,Rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_t={},At=At||{},kt=Rt||self;function xt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ot(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dt="closure_uid_"+(1e9*Math.random()>>>0),Nt=0;function Mt(e,t,r){return e.call.apply(e.bind,arguments)}function Lt(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Ft(e,t,r){return(Ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mt:Lt).apply(null,arguments)}function zt(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Bt(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function jt(){this.s=this.s,this.o=this.o}jt.prototype.s=!1,jt.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Dt)&&e[Dt]||(e[Dt]=++Nt))},jt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ut=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function Vt(e){const t=e.length;if(0<t){const r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function qt(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];if(xt(t)){const r=e.length||0,n=t.length||0;e.length=r+n;for(let i=0;i<n;i++)e[r+i]=t[i]}else e.push(t)}}function Wt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var Ht=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};kt.addEventListener("test",e,t),kt.removeEventListener("test",e,t)}catch(r){}return e}();function Kt(e){return/^[\s\xa0]*$/.test(e)}function Gt(){var e=kt.navigator;return e&&(e=e.userAgent)?e:""}function Jt(e){return-1!=Gt().indexOf(e)}function Qt(e){return Qt[" "](e),e}Qt[" "]=function(){};var Yt,Xt,Zt=Jt("Opera"),$t=Jt("Trident")||Jt("MSIE"),er=Jt("Edge"),tr=er||$t,rr=Jt("Gecko")&&!(-1!=Gt().toLowerCase().indexOf("webkit")&&!Jt("Edge"))&&!(Jt("Trident")||Jt("MSIE"))&&!Jt("Edge"),nr=-1!=Gt().toLowerCase().indexOf("webkit")&&!Jt("Edge");function ir(){var e=kt.document;return e?e.documentMode:void 0}e:{var sr="",or=function(){var e=Gt();return rr?/rv:([^\);]+)(\)|;)/.exec(e):er?/Edge\/([\d\.]+)/.exec(e):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nr?/WebKit\/(\S+)/.exec(e):Zt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(or&&(sr=or?or[1]:""),$t){var ar=ir();if(null!=ar&&ar>parseFloat(sr)){Yt=String(ar);break e}}Yt=sr}if(kt.document&&$t){var cr=ir();Xt=cr||(parseInt(Yt,10)||void 0)}else Xt=void 0;var ur=Xt;function lr(e,t){if(Wt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(rr){e:{try{Qt(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&lr.$.h.call(this)}}Bt(lr,Wt);var hr={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var dr="closure_listenable_"+(1e6*Math.random()|0),pr=0;function fr(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=i,this.key=++pr,this.fa=this.ia=!1}function vr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function mr(e,t,r){for(const n in e)t.call(r,e[n],n,e)}function gr(e){const t={};for(const r in e)t[r]=e[r];return t}const yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wr(e,t){let r,n;for(let i=1;i<arguments.length;i++){for(r in n=arguments[i],n)e[r]=n[r];for(let t=0;t<yr.length;t++)r=yr[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function Sr(e){this.src=e,this.g={},this.h=0}function br(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=Ut(i,t);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(vr(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function Cr(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!r&&s.la==n)return i}return-1}Sr.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Cr(e,t,n,i);return-1<o?(t=e[o],r||(t.ia=!1)):((t=new fr(t,this.src,s,!!n,i)).ia=r,e.push(t)),t};var Ir="closure_lm_"+(1e6*Math.random()|0),Er={};function Tr(e,t,r,n,i){if(n&&n.once)return Rr(e,t,r,n,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Tr(e,t[s],r,n,i);return null}return r=Nr(r),e&&e[dr]?e.O(t,r,Ot(n)?!!n.capture:!!n,i):Pr(e,t,r,!1,n,i)}function Pr(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=Ot(i)?!!i.capture:!!i,a=Or(e);if(a||(e[Ir]=a=new Sr(e)),(r=a.add(t,r,n,o,s)).proxy)return r;if(n=function(){function e(r){return t.call(e.src,e.listener,r)}const t=xr;return e}(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)Ht||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(kr(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return r}function Rr(e,t,r,n,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Rr(e,t[s],r,n,i);return null}return r=Nr(r),e&&e[dr]?e.P(t,r,Ot(n)?!!n.capture:!!n,i):Pr(e,t,r,!0,n,i)}function _r(e,t,r,n,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_r(e,t[s],r,n,i);else n=Ot(n)?!!n.capture:!!n,r=Nr(r),e&&e[dr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(r=Cr(s=e.g[t],r,n,i))&&(vr(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Or(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Cr(t,r,n,i)),(r=-1<e?t[e]:null)&&Ar(r))}function Ar(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[dr])br(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(kr(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=Or(t))?(br(r,e),0==r.h&&(r.src=null,t[Ir]=null)):vr(e)}}}function kr(e){return e in Er?Er[e]:Er[e]="on"+e}function xr(e,t){if(e.fa)e=!0;else{t=new lr(t,this);var r=e.listener,n=e.la||e.src;e.ia&&Ar(e),e=r.call(n,t)}return e}function Or(e){return(e=e[Ir])instanceof Sr?e:null}var Dr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(e){return"function"===typeof e?e:(e[Dr]||(e[Dr]=function(t){return e.handleEvent(t)}),e[Dr])}function Mr(){jt.call(this),this.i=new Sr(this),this.S=this,this.J=null}function Lr(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,"string"===typeof t)t=new Wt(t,e);else if(t instanceof Wt)t.target=t.target||e;else{var i=t;wr(t=new Wt(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=Fr(o,n,!0,t)&&i}if(i=Fr(o=t.g=e,n,!0,t)&&i,i=Fr(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=Fr(o=t.g=r[s],n,!1,t)&&i}function Fr(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==r){var a=o.listener,c=o.la||o.src;o.ia&&br(e.i,o),i=!1!==a.call(c,n)&&i}}return i&&!n.defaultPrevented}Bt(Mr,jt),Mr.prototype[dr]=!0,Mr.prototype.removeEventListener=function(e,t,r,n){_r(this,e,t,r,n)},Mr.prototype.N=function(){if(Mr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)vr(r[n]);delete t.g[e],t.h--}}this.J=null},Mr.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},Mr.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};var zr=kt.JSON.stringify;function Br(){var e=Kr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ur),(e=>e.reset()));class Ur{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Vr(e){var t=1;e=e.split(":");const r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function qr(e){kt.setTimeout((()=>{throw e}),0)}let Wr,Hr=!1,Kr=new class{constructor(){this.h=this.g=null}add(e,t){const r=jr.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Gr=()=>{const e=kt.Promise.resolve(void 0);Wr=()=>{e.then(Jr)}};var Jr=()=>{for(var e;e=Br();){try{e.h.call(e.g)}catch(r){qr(r)}var t=jr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hr=!1};function Qr(e,t){Mr.call(this),this.h=e||1,this.g=t||kt,this.j=Ft(this.qb,this),this.l=Date.now()}function Yr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Xr(e,t,r){if("function"===typeof e)r&&(e=Ft(e,r));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ft(e.handleEvent,e)}return 2147483647<Number(t)?-1:kt.setTimeout(e,t||0)}function Zr(e){e.g=Xr((()=>{e.g=null,e.i&&(e.i=!1,Zr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Bt(Qr,Mr),(Pt=Qr.prototype).ga=!1,Pt.T=null,Pt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lr(this,"tick"),this.ga&&(Yr(this),this.start()))}},Pt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pt.N=function(){Qr.$.N.call(this),Yr(this),delete this.g};class $r extends jt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zr(this)}N(){super.N(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(e){jt.call(this),this.h=e,this.g={}}Bt(en,jt);var tn=[];function rn(e,t,r,n){Array.isArray(r)||(r&&(tn[0]=r.toString()),r=tn);for(var i=0;i<r.length;i++){var s=Tr(t,r[i],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function nn(e){mr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ar(e)}),e),e.g={}}function sn(){this.g=!0}function on(e,t,r,n){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r)for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return zr(r)}catch(a){return t}}(e,r)+(n?" "+n:"")}))}en.prototype.N=function(){en.$.N.call(this),nn(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sn.prototype.Ea=function(){this.g=!1},sn.prototype.info=function(){};var an={},cn=null;function un(){return cn=cn||new Mr}function ln(e){Wt.call(this,an.Ta,e)}function hn(e){const t=un();Lr(t,new ln(t))}function dn(e,t){Wt.call(this,an.STAT_EVENT,e),this.stat=t}function pn(e){const t=un();Lr(t,new dn(t,e))}function fn(e,t){Wt.call(this,an.Ua,e),this.size=t}function vn(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return kt.setTimeout((function(){e()}),t)}an.Ta="serverreachability",Bt(ln,Wt),an.STAT_EVENT="statevent",Bt(dn,Wt),an.Ua="timingevent",Bt(fn,Wt);var mn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yn(){}function wn(e){return e.h||(e.h=e.i())}function Sn(){}yn.prototype.h=null;var bn,Cn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function In(){Wt.call(this,"d")}function En(){Wt.call(this,"c")}function Tn(){}function Pn(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new en(this),this.P=_n,e=tr?125:void 0,this.V=new Qr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rn}function Rn(){this.i=null,this.g="",this.h=!1}Bt(In,Wt),Bt(En,Wt),Bt(Tn,yn),Tn.prototype.g=function(){return new XMLHttpRequest},Tn.prototype.i=function(){return{}},bn=new Tn;var _n=45e3,An={},kn={};function xn(e,t,r){e.L=1,e.A=Yn(Hn(t)),e.u=r,e.S=!0,On(e,null)}function On(e,t){e.G=Date.now(),Ln(e),e.B=Hn(e.A);var r=e.B,n=e.W;Array.isArray(n)||(n=[String(n)]),ui(r.i,"t",n),e.o=0,r=e.l.J,e.h=new Rn,e.g=ls(e.l,r?t:null,!e.u),0<e.O&&(e.M=new $r(Ft(e.Pa,e,e.g),e.O)),rn(e.U,e.g,"readystatechange",e.nb),t=e.I?gr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),hn(),function(e,t,r,n,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+r+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Dn(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Nn(e,t,r){let n,i=!0;for(;!e.J&&e.o<r.length;){if(n=Mn(e,r),n==kn){4==t&&(e.s=4,pn(14),i=!1),on(e.j,e.m,null,"[Incomplete Response]");break}if(n==An){e.s=4,pn(15),on(e.j,e.m,r,"[Invalid Chunk]"),i=!1;break}on(e.j,e.m,n,null),Un(e,n)}Dn(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=r.length||e.h.h||(e.s=1,pn(16),i=!1),e.i=e.i&&i,i?0<r.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),rs(t),t.M=!0,pn(11))):(on(e.j,e.m,r,"[Invalid Chunked Response]"),jn(e),Bn(e))}function Mn(e,t){var r=e.o,n=t.indexOf("\n",r);return-1==n?kn:(r=Number(t.substring(r,n)),isNaN(r)?An:(n+=1)+r>t.length?kn:(t=t.slice(n,n+r),e.o=n+r,t))}function Ln(e){e.Y=Date.now()+e.P,Fn(e,e.P)}function Fn(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=vn(Ft(e.lb,e),t)}function zn(e){e.C&&(kt.clearTimeout(e.C),e.C=null)}function Bn(e){0==e.l.H||e.J||ss(e.l,e)}function jn(e){zn(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Yr(e.V),nn(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Un(e,t){try{var r=e.l;if(0!=r.H&&(r.g==e||mi(r.i,e)))if(!e.K&&mi(r.i,e)&&3==r.H){try{var n=r.Ja.g.parse(t)}catch(u){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g){if(!(r.g.G+3e3<e.G))break e;is(r),Ji(r)}ts(r),pn(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&0==r.A&&!r.v&&(r.v=vn(Ft(r.ib,r),6e3));if(1>=vi(r.i)&&r.oa){try{r.oa()}catch(u){}r.oa=void 0}}else as(r,11)}else if((e.K||r.g==e)&&is(r),!Kt(t))for(i=r.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(r.V=u[0],u=u[1],2==r.H)if("c"==u[0]){r.K=u[1],r.pa=u[2];const t=u[3];null!=t&&(r.ra=t,r.l.info("VER="+r.ra));const i=u[4];null!=i&&(r.Ga=i,r.l.info("SVER="+r.Ga));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(n=1.5*l,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(gi(s,s.h),s.h=null))}if(n.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.Da=e,Qn(n.I,n.F,e))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-e.G,r.l.info("Handshake RTT: "+r.S+"ms"));var o=e;if((n=r).wa=us(n,n.J?n.pa:null,n.Y),o.K){yi(n.i,o);var a=o,c=n.L;c&&a.setTimeout(c),a.C&&(zn(a),Ln(a)),n.g=o}else es(n);0<r.j.length&&Yi(r)}else"stop"!=u[0]&&"close"!=u[0]||as(r,7);else 3==r.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?as(r,7):Gi(r):"noop"!=u[0]&&r.h&&r.h.Aa(u),r.A=0)}hn()}catch(u){}}function Vn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(xt(e)||"string"===typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}t=[],r=0;for(const n in e)t[r++]=n;return t}}}(e),n=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(xt(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}(Pt=Pn.prototype).setTimeout=function(e){this.P=e},Pt.nb=function(e){e=e.target;const t=this.M;t&&3==Ui(e)?t.l():this.Pa(e)},Pt.Pa=function(e){try{if(e==this.g)e:{const l=Ui(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||tr||this.g&&(this.h.h||this.g.ja()||Vi(this.g)))){this.J||4!=l||7==t||hn(),zn(this);var r=this.g.da();this.ca=r;t:if(Dn(this)){var n=Vi(this.g);e="";var i=n.length,s=4==Ui(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jn(this),Bn(this);var o="";break t}this.h.i=new kt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==i-1});n.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==r,function(e,t,r,n,i,s,o){e.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+r+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,l,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kt(a)){var u=a;break t}}u=null}if(!(r=u)){this.i=!1,this.s=3,pn(12),jn(this),Bn(this);break e}on(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Un(this,r)}this.S?(Nn(this,l,o),tr&&this.i&&3==l&&(rn(this.U,this.V,"tick",this.mb),this.V.start())):(on(this.j,this.m,o,null),Un(this,o)),4==l&&jn(this),this.i&&!this.J&&(4==l?ss(this.l,this):(this.i=!1,Ln(this)))}else(function(e){const t={};e=(e.g&&2<=Ui(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(Kt(e[n]))continue;var r=Vr(e[n]);const i=r[0];if("string"!==typeof(r=r[1]))continue;r=r.trim();const s=t[i]||[];t[i]=s,s.push(r)}!function(e,t){for(const r in e)t.call(void 0,e[r],r,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<o.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),jn(this),Bn(this)}}}catch(l){}},Pt.mb=function(){if(this.g){var e=Ui(this.g),t=this.g.ja();this.o<t.length&&(zn(this),Nn(this,e,t),this.i&&4!=e&&Ln(this))}},Pt.cancel=function(){this.J=!0,jn(this)},Pt.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(hn(),pn(17)),jn(this),this.s=2,Bn(this)):Fn(this,this.Y-e)};var qn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Wn){this.h=e.h,Kn(this,e.j),this.s=e.s,this.g=e.g,Gn(this,e.m),this.l=e.l;var t=e.i,r=new si;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),Jn(this,r),this.o=e.o}else e&&(t=String(e).match(qn))?(this.h=!1,Kn(this,t[1]||"",!0),this.s=Xn(t[2]||""),this.g=Xn(t[3]||"",!0),Gn(this,t[4]),this.l=Xn(t[5]||"",!0),Jn(this,t[6]||"",!0),this.o=Xn(t[7]||"")):(this.h=!1,this.i=new si(null,this.h))}function Hn(e){return new Wn(e)}function Kn(e,t,r){e.j=r?Xn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Gn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jn(e,t,r){t instanceof si?(e.i=t,function(e,t){t&&!e.j&&(oi(e),e.i=null,e.g.forEach((function(e,t){var r=t.toLowerCase();t!=r&&(ai(this,t),ui(this,r,e))}),e)),e.j=t}(e.i,e.h)):(r||(t=Zn(t,ni)),e.i=new si(t,e.h))}function Qn(e,t,r){e.i.set(t,r)}function Yn(e){return Qn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Xn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zn(e,t,r){return"string"===typeof e?(e=encodeURI(e).replace(t,$n),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function $n(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Wn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zn(t,ei,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zn(t,ei,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(Zn(r,"/"==r.charAt(0)?ri:ti,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",Zn(r,ii)),e.join("")};var ei=/[#\/\?@]/g,ti=/[#\?:]/g,ri=/[#\?]/g,ni=/[#\?@]/g,ii=/#/g;function si(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function oi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)})))}function ai(e,t){oi(e),t=li(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ci(e,t){return oi(e),t=li(e,t),e.g.has(t)}function ui(e,t,r){ai(e,t),0<r.length&&(e.i=null,e.g.set(li(e,t),Vt(r)),e.h+=r.length)}function li(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pt=si.prototype).add=function(e,t){oi(this),this.i=null,e=li(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},Pt.forEach=function(e,t){oi(this),this.g.forEach((function(r,n){r.forEach((function(r){e.call(t,r,n,this)}),this)}),this)},Pt.ta=function(){oi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){const i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},Pt.Z=function(e){oi(this);let t=[];if("string"===typeof e)ci(this,e)&&(t=t.concat(this.g.get(li(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},Pt.set=function(e,t){return oi(this),this.i=null,ci(this,e=li(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];const s=encodeURIComponent(String(n)),o=this.Z(n);for(n=0;n<o.length;n++){var i=s;""!==o[n]&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")};var hi=class{constructor(e,t){this.g=e,this.map=t}};function di(e){this.l=e||pi,kt.PerformanceNavigationTiming?e=0<(e=kt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(kt.g&&kt.g.Ka&&kt.g.Ka()&&kt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pi=10;function fi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function vi(e){return e.h?1:e.g?e.g.size:0}function mi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function gi(e,t){e.g?e.g.add(t):e.h=t}function yi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wi(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const r of e.g.values())t=t.concat(r.F);return t}return Vt(e.i)}di.prototype.cancel=function(){if(this.i=wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Si,bi=class{stringify(e){return kt.JSON.stringify(e,void 0)}parse(e){return kt.JSON.parse(e,void 0)}};function Ci(){this.g=new bi}function Ii(e,t,r){const n=r||"";try{Vn(e,(function(e,r){let i=e;Ot(e)&&(i=zr(e)),t.push(n+r+"="+encodeURIComponent(i))}))}catch(nA){throw t.push(n+"type="+encodeURIComponent("_badmap")),nA}}function Ei(e,t,r,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch(s){}}function Ti(e){this.l=e.ec||null,this.j=e.ob||!1}function Pi(e,t){Mr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bt(Ti,yn),Ti.prototype.g=function(){return new Pi(this.l,this.j)},Ti.prototype.i=(Si={},function(){return Si}),Bt(Pi,Mr);var Ri=0;function _i(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ai(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ki(e)}function ki(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pt=Pi.prototype).open=function(e,t){if(this.readyState!=Ri)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ki(this)},Pt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||kt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ai(this)),this.readyState=Ri},Pt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof kt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_i(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Pt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ai(this):ki(this),3==this.readyState&&_i(this)}},Pt.Za=function(e){this.g&&(this.response=this.responseText=e,Ai(this))},Pt.Ya=function(e){this.g&&(this.response=e,Ai(this))},Pt.ka=function(){this.g&&Ai(this)},Pt.setRequestHeader=function(e,t){this.v.append(e,t)},Pt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pt.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xi=kt.JSON.parse;function Oi(e){Mr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Di,this.L=this.M=!1}Bt(Oi,Mr);var Di="",Ni=/^https?$/i,Mi=["POST","PUT"];function Li(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fi(e),Bi(e)}function Fi(e){e.F||(e.F=!0,Lr(e,"complete"),Lr(e,"error"))}function zi(e){if(e.h&&"undefined"!=typeof At&&(!e.C[1]||4!=Ui(e)||2!=e.da()))if(e.v&&4==Ui(e))Xr(e.La,0,e);else if(Lr(e,"readystatechange"),4==Ui(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var n;if(n=0===a){var i=String(e.I).match(qn)[1]||null;!i&&kt.self&&kt.self.location&&(i=kt.self.location.protocol.slice(0,-1)),n=!Ni.test(i?i.toLowerCase():"")}r=n}if(r)Lr(e,"complete"),Lr(e,"success");else{e.m=6;try{var s=2<Ui(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Fi(e)}}finally{Bi(e)}}}function Bi(e,t){if(e.g){ji(e);const r=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Lr(e,"ready");try{r.onreadystatechange=n}catch(nA){}}}function ji(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(kt.clearTimeout(e.A),e.A=null)}function Ui(e){return e.g?e.g.readyState:0}function Vi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Di:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qs){return null}}function qi(e){let t="";return mr(e,(function(e,r){t+=r,t+=":",t+=e,t+="\r\n"})),t}function Wi(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=qi(r),"string"===typeof e?null!=r&&encodeURIComponent(String(r)):Qn(e,t,r))}function Hi(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function Ki(e){this.Ga=0,this.j=[],this.l=new sn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hi("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hi("baseRetryDelayMs",5e3,e),this.hb=Hi("retryDelaySeedMs",1e4,e),this.eb=Hi("forwardChannelMaxRetries",2,e),this.xa=Hi("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new di(e&&e.concurrentRequestLimit),this.Ja=new Ci,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Gi(e){if(Qi(e),3==e.H){var t=e.W++,r=Hn(e.I);if(Qn(r,"SID",e.K),Qn(r,"RID",t),Qn(r,"TYPE","terminate"),Zi(e,r),(t=new Pn(e,e.l,t)).L=2,t.A=Yn(Hn(r)),r=!1,kt.navigator&&kt.navigator.sendBeacon)try{r=kt.navigator.sendBeacon(t.A.toString(),"")}catch(n){}!r&&kt.Image&&((new Image).src=t.A,r=!0),r||(t.g=ls(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ln(t)}cs(e)}function Ji(e){e.g&&(rs(e),e.g.cancel(),e.g=null)}function Qi(e){Ji(e),e.u&&(kt.clearTimeout(e.u),e.u=null),is(e),e.i.cancel(),e.m&&("number"===typeof e.m&&kt.clearTimeout(e.m),e.m=null)}function Yi(e){if(!fi(e.i)&&!e.m){e.m=!0;var t=e.Na;Wr||Gr(),Hr||(Wr(),Hr=!0),Kr.add(t,e),e.C=0}}function Xi(e,t){var r;r=t?t.m:e.W++;const n=Hn(e.I);Qn(n,"SID",e.K),Qn(n,"RID",r),Qn(n,"AID",e.V),Zi(e,n),e.o&&e.s&&Wi(n,e.o,e.s),r=new Pn(e,e.l,r,e.C+1),null===e.o&&(r.I=e.s),t&&(e.j=t.F.concat(e.j)),t=$i(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),gi(e.i,r),xn(r,n,t)}function Zi(e,t){e.na&&mr(e.na,(function(e,r){Qn(t,r,e)})),e.h&&Vn({},(function(e,r){Qn(t,r,e)}))}function $i(e,t,r){r=Math.min(e.j.length,r);var n=e.h?Ft(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+r];-1==t?0<r?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].g;const a=i[o].map;if(r-=t,0>r)t=Math.max(0,i[o].g-100),s=!1;else try{Ii(a,e,"req"+r+"_")}catch(da){n&&n(a)}}if(s){n=e.join("&");break e}}}return e=e.j.splice(0,r),t.F=e,n}function es(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Wr||Gr(),Hr||(Wr(),Hr=!0),Kr.add(t,e),e.A=0}}function ts(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=vn(Ft(e.Ma,e),os(e,e.A)),e.A++,!0)}function rs(e){null!=e.B&&(kt.clearTimeout(e.B),e.B=null)}function ns(e){e.g=new Pn(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Hn(e.wa);Qn(t,"RID","rpc"),Qn(t,"SID",e.K),Qn(t,"AID",e.V),Qn(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Qn(t,"TO",e.qa),Qn(t,"TYPE","xmlhttp"),Zi(e,t),e.o&&e.s&&Wi(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var r=e.g;e=e.pa,r.L=1,r.A=Yn(Hn(t)),r.u=null,r.S=!0,On(r,e)}function is(e){null!=e.v&&(kt.clearTimeout(e.v),e.v=null)}function ss(e,t){var r=null;if(e.g==t){is(e),rs(e),e.g=null;var n=2}else{if(!mi(e.i,t))return;r=t.F,yi(e.i,t),n=1}if(0!=e.H)if(t.i)if(1==n){r=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Lr(n=un(),new fn(n,r)),Yi(e)}else es(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==n&&function(e,t){return!(vi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=vn(Ft(e.Na,e,t),os(e,e.C)),e.C++,!0))}(e,t)||2==n&&ts(e)))switch(r&&0<r.length&&(t=e.i,t.i=t.i.concat(r)),i){case 1:as(e,5);break;case 4:as(e,10);break;case 3:as(e,6);break;default:as(e,2)}}function os(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(r*=2),r*t}function as(e,t){if(e.l.info("Error code "+t),2==t){var r=null;e.h&&(r=null);var n=Ft(e.pb,e);r||(r=new Wn("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Kn(r,"https"),Yn(r)),function(e,t){const r=new sn;if(kt.Image){const n=new Image;n.onload=zt(Ei,r,n,"TestLoadImage: loaded",!0,t),n.onerror=zt(Ei,r,n,"TestLoadImage: error",!1,t),n.onabort=zt(Ei,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=zt(Ei,r,n,"TestLoadImage: timeout",!1,t),kt.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=e}else t(!1)}(r.toString(),n)}else pn(2);e.H=0,e.h&&e.h.za(t),cs(e),Qi(e)}function cs(e){if(e.H=0,e.ma=[],e.h){const t=wi(e.i);0==t.length&&0==e.j.length||(qt(e.ma,t),qt(e.ma,e.j),e.i.i.length=0,Vt(e.j),e.j.length=0),e.h.ya()}}function us(e,t,r){var n=r instanceof Wn?Hn(r):new Wn(r);if(""!=n.g)t&&(n.g=t+"."+n.g),Gn(n,n.m);else{var i=kt.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Wn(null);n&&Kn(s,n),t&&(s.g=t),i&&Gn(s,i),r&&(s.l=r),n=s}return r=e.F,t=e.Da,r&&t&&Qn(n,r,t),Qn(n,"VER",e.ra),Zi(e,n),n}function ls(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Oi(new Ti({ob:r})):new Oi(e.va)).Oa(e.J),t}function hs(){}function ds(){if($t&&!(10<=Number(ur)))throw Error("Environmental error: no available transport.")}function ps(e,t){Mr.call(this),this.g=new Ki(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kt(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ms(this)}function fs(e){In.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vs(){En.call(this),this.status=1}function ms(e){this.g=e}function gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ys(e,t,r){r||(r=0);var n=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^r&(i^s))+n[0]+3614090360&4294967295;o=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=(r=(i=(s=(t=r+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(r^i))+n[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(r^s&(t^r))+n[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=r+(t^i&(s^t))+n[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^r&(i^s))+n[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(r^i))+n[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(r^s&(t^r))+n[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=r+(t^i&(s^t))+n[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^r&(i^s))+n[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(r^i))+n[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(r^s&(t^r))+n[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=r+(t^i&(s^t))+n[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^r&(i^s))+n[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(r^i))+n[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(r^s&(t^r))+n[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=r+(t^i&(s^t))+n[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(r^i))+n[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(r^i&(t^r))+n[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^r&(s^t))+n[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=r+(s^t&(i^s))+n[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(r^i))+n[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(r^i&(t^r))+n[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^r&(s^t))+n[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=r+(s^t&(i^s))+n[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(r^i))+n[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(r^i&(t^r))+n[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^r&(s^t))+n[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=r+(s^t&(i^s))+n[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(r^i))+n[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(r^i&(t^r))+n[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^r&(s^t))+n[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=r+(s^t&(i^s))+n[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^i^s)+n[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^r^i)+n[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^r)+n[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=r+(i^s^t)+n[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^i^s)+n[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^r^i)+n[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^r)+n[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=r+(i^s^t)+n[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^i^s)+n[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^r^i)+n[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^r)+n[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=r+(i^s^t)+n[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^i^s)+n[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^r^i)+n[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^r)+n[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=r+(i^s^t)+n[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(r|~s))+n[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(r^(t|~i))+n[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~r))+n[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=r+(s^(i|~t))+n[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(r|~s))+n[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(r^(t|~i))+n[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~r))+n[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=r+(s^(i|~t))+n[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(r|~s))+n[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(r^(t|~i))+n[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~r))+n[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=r+(s^(i|~t))+n[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=r+((o=t+(i^(r|~s))+n[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(r^(t|~i))+n[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~r))+n[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ws(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(Pt=Oi.prototype).Oa=function(e){this.M=e},Pt.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bn.g(),this.C=this.u?wn(this.u):wn(bn),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Li(this,s)}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else{if("function"!==typeof n.keys||"function"!==typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const e of n.keys())r.set(e,n.get(e))}n=Array.from(r.keys()).find((e=>"content-type"==e.toLowerCase())),i=kt.FormData&&e instanceof kt.FormData,!(0<=Ut(Mi,t))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of r)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ji(this),0<this.B&&((this.L=function(e){return $t&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=Xr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Li(this,s)}},Pt.ua=function(){"undefined"!=typeof At&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},Pt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Lr(this,"complete"),Lr(this,"abort"),Bi(this))},Pt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bi(this,!0)),Oi.$.N.call(this)},Pt.La=function(){this.s||(this.G||this.v||this.l?zi(this):this.kb())},Pt.kb=function(){zi(this)},Pt.isActive=function(){return!!this.g},Pt.da=function(){try{return 2<Ui(this)?this.g.status:-1}catch(Si){return-1}},Pt.ja=function(){try{return this.g?this.g.responseText:""}catch(Si){return""}},Pt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xi(t)}},Pt.Ia=function(){return this.m},Pt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Pt=Ki.prototype).ra=8,Pt.H=1,Pt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Pn(this,this.l,e);let s=this.s;if(this.U&&(s?(s=gr(s),wr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,r=0;r<this.j.length;r++){var n=this.j[r];if(void 0===(n="__data__"in n.map&&"string"===typeof(n=n.map.__data__)?n.length:void 0))break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.j.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=$i(this,i,t),Qn(r=Hn(this.I),"RID",e),Qn(r,"CVER",22),this.F&&Qn(r,"X-HTTP-Session-Id",this.F),Zi(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(qi(s)))+"&"+t:this.o&&Wi(r,this.o,s)),gi(this.i,i),this.bb&&Qn(r,"TYPE","init"),this.P?(Qn(r,"$req",t),Qn(r,"SID","null"),i.aa=!0,xn(i,r,null)):xn(i,r,t),this.H=2}}else 3==this.H&&(e?Xi(this,e):0==this.j.length||fi(this.i)||Xi(this))},Pt.Ma=function(){if(this.u=null,ns(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=vn(Ft(this.jb,this),e)}},Pt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,pn(10),Ji(this),ns(this))},Pt.ib=function(){null!=this.v&&(this.v=null,Ji(this),ts(this),pn(19))},Pt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),pn(2)):(this.l.info("Failed to ping google.com"),pn(1))},Pt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pt=hs.prototype).Ba=function(){},Pt.Aa=function(){},Pt.za=function(){},Pt.ya=function(){},Pt.isActive=function(){return!0},Pt.Va=function(){},ds.prototype.g=function(e,t){return new ps(e,t)},Bt(ps,Mr),ps.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,r=this.h||void 0;pn(0),e.Y=t,e.na=r||{},e.G=e.aa,e.I=us(e,null,e.Y),Yi(e)},ps.prototype.close=function(){Gi(this.g)},ps.prototype.u=function(e){var t=this.g;if("string"===typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=zr(e),e=r);t.j.push(new hi(t.fb++,e)),3==t.H&&Yi(t)},ps.prototype.N=function(){this.g.h=null,delete this.j,Gi(this.g),delete this.g,ps.$.N.call(this)},Bt(fs,In),Bt(vs,En),Bt(ms,hs),ms.prototype.Ba=function(){Lr(this.g,"a")},ms.prototype.Aa=function(e){Lr(this.g,new fs(e))},ms.prototype.za=function(e){Lr(this.g,new vs)},ms.prototype.ya=function(){Lr(this.g,"b")},Bt(gs,(function(){this.blockSize=-1})),gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=r;)ys(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(n[i++]=e.charCodeAt(s++),i==this.blockSize){ys(this,n),i=0;break}}else for(;s<t;)if(n[i++]=e[s++],i==this.blockSize){ys(this,n),i=0;break}}this.h=i,this.i+=t},gs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var Ss={};function bs(e){return-128<=e&&128>e?function(e,t){var r=Ss;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}(e,(function(e){return new ws([0|e],0>e?-1:0)})):new ws([0|e],0>e?-1:0)}function Cs(e){if(isNaN(e)||!isFinite(e))return Es;if(0>e)return As(Cs(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=Is;return new ws(t,0)}var Is=4294967296,Es=bs(0),Ts=bs(1),Ps=bs(16777216);function Rs(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _s(e){return-1==e.h}function As(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new ws(r,~e.h).add(Ts)}function ks(e,t){return e.add(As(t))}function xs(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Os(e,t){this.g=e,this.h=t}function Ds(e,t){if(Rs(t))throw Error("division by zero");if(Rs(e))return new Os(Es,Es);if(_s(e))return t=Ds(As(e),t),new Os(As(t.g),As(t.h));if(_s(t))return t=Ds(e,As(t)),new Os(As(t.g),t.h);if(30<e.g.length){if(_s(e)||_s(t))throw Error("slowDivide_ only works with positive integers.");for(var r=Ts,n=t;0>=n.X(e);)r=Ns(r),n=Ns(n);var i=Ms(r,1),s=Ms(n,1);for(n=Ms(n,2),r=Ms(r,2);!Rs(n);){var o=s.add(n);0>=o.X(e)&&(i=i.add(r),s=o),n=Ms(n,1),r=Ms(r,1)}return t=ks(e,i.R(t)),new Os(i,t)}for(i=Es;0<=e.X(t);){for(r=Math.max(1,Math.floor(e.ea()/t.ea())),n=48>=(n=Math.ceil(Math.log(r)/Math.LN2))?1:Math.pow(2,n-48),o=(s=Cs(r)).R(t);_s(o)||0<o.X(e);)o=(s=Cs(r-=n)).R(t);Rs(s)&&(s=Ts),i=i.add(s),e=ks(e,o)}return new Os(i,e)}function Ns(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new ws(r,e.h)}function Ms(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,i=[],s=0;s<n;s++)i[s]=0<t?e.D(s+r)>>>t|e.D(s+r+1)<<32-t:e.D(s+r);return new ws(i,e.h)}(Pt=ws.prototype).ea=function(){if(_s(this))return-As(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:Is+n)*t,t*=Is}return e},Pt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Rs(this))return"0";if(_s(this))return"-"+As(this).toString(e);for(var t=Cs(Math.pow(e,6)),r=this,n="";;){var i=Ds(r,t).g,s=((0<(r=ks(r,i.R(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(Rs(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},Pt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Pt.X=function(e){return _s(e=ks(this,e))?-1:Rs(e)?0:1},Pt.abs=function(){return _s(this)?As(this):this},Pt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,i=0;i<=t;i++){var s=n+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);n=o>>>16,s&=65535,o&=65535,r[i]=o<<16|s}return new ws(r,-2147483648&r[r.length-1]?-1:0)},Pt.R=function(e){if(Rs(this)||Rs(e))return Es;if(_s(this))return _s(e)?As(this).R(As(e)):As(As(this).R(e));if(_s(e))return As(this.R(As(e)));if(0>this.X(Ps)&&0>e.X(Ps))return Cs(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<e.g.length;i++){var s=this.D(n)>>>16,o=65535&this.D(n),a=e.D(i)>>>16,c=65535&e.D(i);r[2*n+2*i]+=o*c,xs(r,2*n+2*i),r[2*n+2*i+1]+=s*c,xs(r,2*n+2*i+1),r[2*n+2*i+1]+=o*a,xs(r,2*n+2*i+1),r[2*n+2*i+2]+=s*a,xs(r,2*n+2*i+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new ws(r,0)},Pt.gb=function(e){return Ds(this,e).h},Pt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new ws(r,this.h&e.h)},Pt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new ws(r,this.h|e.h)},Pt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new ws(r,this.h^e.h)},ds.prototype.createWebChannel=ds.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,mn.NO_ERROR=0,mn.TIMEOUT=8,mn.HTTP_ERROR=6,gn.COMPLETE="complete",Sn.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",Mr.prototype.listen=Mr.prototype.O,Oi.prototype.listenOnce=Oi.prototype.P,Oi.prototype.getLastError=Oi.prototype.Sa,Oi.prototype.getLastErrorCode=Oi.prototype.Ia,Oi.prototype.getStatus=Oi.prototype.da,Oi.prototype.getResponseJson=Oi.prototype.Wa,Oi.prototype.getResponseText=Oi.prototype.ja,Oi.prototype.send=Oi.prototype.ha,Oi.prototype.setWithCredentials=Oi.prototype.Oa,gs.prototype.digest=gs.prototype.l,gs.prototype.reset=gs.prototype.reset,gs.prototype.update=gs.prototype.j,ws.prototype.add=ws.prototype.add,ws.prototype.multiply=ws.prototype.R,ws.prototype.modulo=ws.prototype.gb,ws.prototype.compare=ws.prototype.X,ws.prototype.toNumber=ws.prototype.ea,ws.prototype.toString=ws.prototype.toString,ws.prototype.getBits=ws.prototype.D,ws.fromNumber=Cs,ws.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return As(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Cs(Math.pow(r,8)),i=Es,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),r);8>o?(o=Cs(Math.pow(r,o)),i=i.R(o).add(Cs(a))):i=(i=i.R(n)).add(Cs(a))}return i};var Ls=_t.createWebChannelTransport=function(){return new ds},Fs=_t.getStatEventTarget=function(){return un()},zs=_t.ErrorCode=mn,Bs=_t.EventType=gn,js=_t.Event=an,Us=_t.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vs=(_t.FetchXmlHttpFactory=Ti,_t.WebChannel=Sn),qs=_t.XhrIo=Oi,Ws=_t.Md5=gs,Hs=_t.Integer=ws;const Ks="@firebase/firestore";class Gs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gs.UNAUTHENTICATED=new Gs(null),Gs.GOOGLE_CREDENTIALS=new Gs("google-credentials-uid"),Gs.FIRST_PARTY=new Gs("first-party-uid"),Gs.MOCK_USER=new Gs("mock-user");let Js="10.11.0";const Qs=new ae("@firebase/firestore");function Ys(){return Qs.logLevel}function Xs(e){if(Qs.logLevel<=re.DEBUG){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(eo);Qs.debug("Firestore (".concat(Js,"): ").concat(e),...i)}}function Zs(e){if(Qs.logLevel<=re.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(eo);Qs.error("Firestore (".concat(Js,"): ").concat(e),...i)}}function $s(e){if(Qs.logLevel<=re.WARN){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(eo);Qs.warn("Firestore (".concat(Js,"): ").concat(e),...i)}}function eo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Js,") INTERNAL ASSERTION FAILED: ")+e;throw Zs(t),new Error(t)}function ro(e,t){e||to()}function no(e,t){return e}const io={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class so extends j{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class oo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ao{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class co{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gs.UNAUTHENTICATED)))}shutdown(){}}class uo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lo{constructor(e){this.t=e,this.currentUser=Gs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let i=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new oo,e.enqueueRetryable((()=>n(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await n(this.currentUser)}))},o=e=>{Xs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Xs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Xs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ro("string"==typeof t.accessToken),new ao(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ro(null===e||"string"==typeof e),new Gs(e)}}class ho{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Gs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class po{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ho(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Gs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=e=>{null!=e.error&&Xs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const r=e.token!==this.R;return this.R=e.token,Xs("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>r(t)))};const n=e=>{Xs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?n(e):Xs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ro("string"==typeof e.token),this.R=e.token,new fo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}class go{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let r="";for(;r.length<20;){const n=mo(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%62))}return r}}function yo(e,t){return e<t?-1:e>t?1:0}function wo(e,t,r){return e.length===t.length&&e.every(((e,n)=>r(e,t[n])))}function So(e){return e+"\0"}class bo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new so(io.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new so(io.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new so(io.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new so(io.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bo.fromMillis(Date.now())}static fromDate(e){return bo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bo(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yo(this.nanoseconds,e.nanoseconds):yo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Co{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Co(e)}static min(){return new Co(new bo(0,0))}static max(){return new Co(new bo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Io{constructor(e,t,r){void 0===t?t=0:t>e.length&&to(),void 0===r?r=e.length-t:r>e.length-t&&to(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Io.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const r=e.get(n),i=t.get(n);if(r<i)return-1;if(r>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Eo extends Io{construct(e,t,r){return new Eo(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r){if(i.indexOf("//")>=0)throw new so(io.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Eo(e)}static emptyPath(){return new Eo([])}}const To=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Po extends Io{construct(e,t,r){return new Po(e,t,r)}static isValidIdentifier(e){return To.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Po.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Po(["__name__"])}static fromServerFormat(e){const t=[];let r="",n=0;const i=()=>{if(0===r.length)throw new so(io.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""};let s=!1;for(;n<e.length;){const t=e[n];if("\\"===t){if(n+1===e.length)throw new so(io.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new so(io.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?(s=!s,n++):"."!==t||s?(r+=t,n++):(i(),n++)}if(i(),s)throw new so(io.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Po(t)}static emptyPath(){return new Po([])}}class Ro{constructor(e){this.path=e}static fromPath(e){return new Ro(Eo.fromString(e))}static fromName(e){return new Ro(Eo.fromString(e).popFirst(5))}static empty(){return new Ro(Eo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Eo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Eo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ro(new Eo(e.slice()))}}class _o{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function Ao(e){return e.fields.find((e=>2===e.kind))}function ko(e){return e.fields.filter((e=>2!==e.kind))}_o.UNKNOWN_ID=-1;class xo{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oo(0,Mo.min())}}function Do(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===n?new bo(r+1,0):new bo(r,n));return new Mo(i,Ro.empty(),t)}function No(e){return new Mo(e.readTime,e.key,-1)}class Mo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mo(Co.min(),Ro.empty(),-1)}static max(){return new Mo(Co.max(),Ro.empty(),-1)}}function Lo(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:(r=Ro.comparator(e.documentKey,t.documentKey),0!==r?r:yo(e.largestBatchId,t.largestBatchId))}const Fo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bo(e){if(e.code!==io.FAILED_PRECONDITION||e.message!==Fo)throw e;Xs("LocalStore","Unexpectedly lost primary lease")}class jo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&to(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new jo(((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof jo?t:jo.resolve(t)}catch(e){return jo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):jo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):jo.reject(t)}static resolve(e){return new jo(((t,r)=>{t(e)}))}static reject(e){return new jo(((t,r)=>{r(e)}))}static waitFor(e){return new jo(((t,r)=>{let n=0,i=0,s=!1;e.forEach((e=>{++n,e.next((()=>{++i,s&&i===n&&t()}),(e=>r(e)))})),s=!0,i===n&&t()}))}static or(e){let t=jo.resolve(!1);for(const r of e)t=t.next((e=>e?jo.resolve(e):r()));return t}static forEach(e,t){const r=[];return e.forEach(((e,n)=>{r.push(t.call(this,e,n))})),this.waitFor(r)}static mapArray(e,t){return new jo(((r,n)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&r(s)}),(e=>n(e)))}}))}static doWhile(e,t){return new jo(((r,n)=>{const i=()=>{!0===e()?t().next((()=>{i()}),n):r()};i()}))}}class Uo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new oo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wo(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const r=Qo(t.target.error);this.V.reject(new Wo(e,r))}}static open(e,t,r,n){try{return new Uo(t,e.transaction(n,r))}catch(e){throw new Wo(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ko(t)}}class Vo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Vo.S(F())&&Zs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xs("SimpleDb","Removing database:",e),Go(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!B())return!1;if(Vo.C())return!0;const e=F(),t=Vo.S(e),r=0<t&&t<10,n=Vo.v(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(Xs("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,r)=>{const n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{const r=e.target.result;t(r)},n.onblocked=()=>{r(new Wo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{const n=t.target.error;"VersionError"===n.name?r(new so(io.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new so(io.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Wo(e,n))},n.onupgradeneeded=e=>{Xs("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,n.transaction,e.oldVersion,this.version).next((()=>{Xs("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Uo.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),jo.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,r="FirebaseError"!==t.name&&s<3;if(Xs("SimpleDb","Transaction failed with error:",t.message,"Retrying:",r),this.close(),!r)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class qo{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Go(this.k.delete())}}class Wo extends so{constructor(e,t){super(io.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ho(e){return"IndexedDbTransactionError"===e.name}class Ko{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Xs("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Xs("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Go(r)}add(e){return Xs("SimpleDb","ADD",this.store.name,e,e),Go(this.store.add(e))}get(e){return Go(this.store.get(e)).next((t=>(void 0===t&&(t=null),Xs("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Xs("SimpleDb","DELETE",this.store.name,e),Go(this.store.delete(e))}count(){return Xs("SimpleDb","COUNT",this.store.name),Go(this.store.count())}W(e,t){const r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){const e=n.getAll(r.range);return new jo(((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(r),t=[];return this.G(e,((e,r)=>{t.push(r)})).next((()=>t))}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new jo(((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Xs("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const n=this.cursor(r);return this.G(n,((e,t,r)=>r.delete()))}Y(e,t){let r;t?r=e:(r={},t=e);const n=this.cursor(r);return this.G(n,t)}Z(e){const t=this.cursor({});return new jo(((r,n)=>{t.onerror=e=>{const t=Qo(e.target.error);n(t)},t.onsuccess=t=>{const n=t.target.result;n?e(n.primaryKey,n.value).next((e=>{e?n.continue():r()})):r()}}))}G(e,t){const r=[];return new jo(((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void n();const s=new qo(i),o=t(i.primaryKey,i.value,s);if(o instanceof jo){const e=o.catch((e=>(s.done(),jo.reject(e))));r.push(e)}s.isDone?n():null===s.$?i.continue():i.continue(s.$)}})).next((()=>jo.waitFor(r)))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Go(e){return new jo(((t,r)=>{e.onsuccess=e=>{const r=e.target.result;t(r)},e.onerror=e=>{const t=Qo(e.target.error);r(t)}}))}let Jo=!1;function Qo(e){const t=Vo.S(F());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new so("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Jo||(Jo=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Yo{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Xs("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Xs("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Ho(e)?Xs("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Bo(e)}await this.ee(6e4)}))}}class Xo{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const r=new Set;let n=t,i=!0;return jo.doWhile((()=>!0===i&&n>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!r.has(t))return Xs("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,n).next((e=>{n-=e,r.add(t)}));i=!1})))).next((()=>t-n))}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next((r=>{const i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(n,r))).next((r=>(Xs("IndexBackfiller","Updating offset: ".concat(r)),this.localStore.indexManager.updateCollectionGroup(e,t,r)))).next((()=>i.size))}))))}ie(e,t){let r=e;return t.changes.forEach(((e,t)=>{const n=No(t);Lo(n,r)>0&&(r=n)})),new Mo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function $o(e){return null==e}function ea(e){return 0===e&&1/e==-1/0}function ta(e){return"number"==typeof e&&Number.isInteger(e)&&!ea(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ra(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=ia(t)),t=na(e.get(r),t);return ia(t)}function na(e,t){let r=t;const n=e.length;for(let i=0;i<n;i++){const t=e.charAt(i);switch(t){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=t}}return r}function ia(e){return e+"\x01\x01"}function sa(e){const t=e.length;if(ro(t>=2),2===t)return ro("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Eo.emptyPath();const r=t-2,n=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>r)&&to(),e.charAt(t+1)){case"\x01":const r=e.substring(s,t);let o;0===i.length?o=r:(i+=r,o=i,i=""),n.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:to()}s=t+2}return new Eo(n)}Zo._e=-1;const oa=["userId","batchId"];function aa(e,t){return[e,ra(t)]}function ca(e,t,r){return[e,ra(t),r]}const ua={},la=["prefixPath","collectionGroup","readTime","documentId"],ha=["prefixPath","collectionGroup","documentId"],da=["collectionGroup","readTime","prefixPath","documentId"],pa=["canonicalId","targetId"],fa=["targetId","path"],va=["path","targetId"],ma=["collectionId","parent"],ga=["indexId","uid"],ya=["uid","sequenceNumber"],wa=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sa=["indexId","uid","orderedDocumentKey"],ba=["userId","collectionPath","documentId"],Ca=["userId","collectionPath","largestBatchId"],Ia=["userId","collectionGroup","largestBatchId"],Ea=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ta=[...Ea,"documentOverlays"],Pa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ra=Pa,_a=[...Ra,"indexConfiguration","indexState","indexEntries"],Aa=_a;class ka extends zo{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function xa(e,t){const r=no(e);return Vo.M(r.ae,t)}function Oa(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Da(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function Na(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ma{constructor(e,t){this.comparator=e,this.root=t||Fa.EMPTY}insert(e,t){return new Ma(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(e){return new Ma(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push("".concat(t,":").concat(r)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new La(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new La(this.root,e,this.comparator,!1)}getReverseIterator(){return new La(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new La(this.root,e,this.comparator,!0)}}class La{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fa{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:Fa.RED,this.left=null!=n?n:Fa.EMPTY,this.right=null!=i?i:Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new Fa(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const i=r(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return Fa.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw to();if(this.right.isRed())throw to();const e=this.left.check();if(e!==this.right.check())throw to();return e+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1,Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw to()}get value(){throw to()}get color(){throw to()}get left(){throw to()}get right(){throw to()}copy(e,t,r,n,i){return this}insert(e,t,r){return new Fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class za{constructor(e){this.comparator=e,this.data=new Ma(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ba(this.data.getIterator())}getIteratorFrom(e){return new Ba(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof za))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new za(this.comparator);return t.data=e,t}}class Ba{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ja(e){return e.hasNext()?e.getNext():void 0}class Ua{constructor(e){this.fields=e,e.sort(Po.comparator)}static empty(){return new Ua([])}unionWith(e){let t=new za(Po.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ua(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Va extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Va("Invalid base64 string: "+e):e}}(e);return new qa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new qa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qa.EMPTY_BYTE_STRING=new qa("");const Wa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(e){if(ro(!!e),"string"==typeof e){let t=0;const r=Wa.exec(e);if(ro(!!r),r[1]){let e=r[1];e=(e+"000000000").substr(0,9),t=Number(e)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ka(e.seconds),nanos:Ka(e.nanos)}}function Ka(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ga(e){return"string"==typeof e?qa.fromBase64String(e):qa.fromUint8Array(e)}function Ja(e){var t,r;return"server_timestamp"===(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Qa(e){const t=e.mapValue.fields.__previous_value__;return Ja(t)?Qa(t):t}function Ya(e){const t=Ha(e.mapValue.fields.__local_write_time__.timestampValue);return new bo(t.seconds,t.nanos)}class Xa{constructor(e,t,r,n,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}const $a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ec={nullValue:"NULL_VALUE"};function tc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ja(e)?4:vc(e)?9007199254740991:10:to()}function rc(e,t){if(e===t)return!0;const r=tc(e);if(r!==tc(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ya(e).isEqual(Ya(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const r=Ha(e.timestampValue),n=Ha(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ga(e.bytesValue).isEqual(Ga(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ka(e.geoPointValue.latitude)===Ka(t.geoPointValue.latitude)&&Ka(e.geoPointValue.longitude)===Ka(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ka(e.integerValue)===Ka(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const r=Ka(e.doubleValue),n=Ka(t.doubleValue);return r===n?ea(r)===ea(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return wo(e.arrayValue.values||[],t.arrayValue.values||[],rc);case 10:return function(e,t){const r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(Oa(r)!==Oa(n))return!1;for(const i in r)if(r.hasOwnProperty(i)&&(void 0===n[i]||!rc(r[i],n[i])))return!1;return!0}(e,t);default:return to()}}function nc(e,t){return void 0!==(e.values||[]).find((e=>rc(e,t)))}function ic(e,t){if(e===t)return 0;const r=tc(e),n=tc(t);if(r!==n)return yo(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return yo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const r=Ka(e.integerValue||e.doubleValue),n=Ka(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return sc(e.timestampValue,t.timestampValue);case 4:return sc(Ya(e),Ya(t));case 5:return yo(e.stringValue,t.stringValue);case 6:return function(e,t){const r=Ga(e),n=Ga(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const r=e.split("/"),n=t.split("/");for(let i=0;i<r.length&&i<n.length;i++){const e=yo(r[i],n[i]);if(0!==e)return e}return yo(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const r=yo(Ka(e.latitude),Ka(t.latitude));return 0!==r?r:yo(Ka(e.longitude),Ka(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const r=e.values||[],n=t.values||[];for(let i=0;i<r.length&&i<n.length;++i){const e=ic(r[i],n[i]);if(e)return e}return yo(r.length,n.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$a.mapValue&&t===$a.mapValue)return 0;if(e===$a.mapValue)return 1;if(t===$a.mapValue)return-1;const r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let o=0;o<n.length&&o<s.length;++o){const e=yo(n[o],s[o]);if(0!==e)return e;const t=ic(r[n[o]],i[s[o]]);if(0!==t)return t}return yo(n.length,s.length)}(e.mapValue,t.mapValue);default:throw to()}}function sc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yo(e,t);const r=Ha(e),n=Ha(t),i=yo(r.seconds,n.seconds);return 0!==i?i:yo(r.nanos,n.nanos)}function oc(e){return ac(e)}function ac(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ha(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ga(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ro.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",r=!0;for(const n of e.values||[])r?r=!1:t+=",",t+=ac(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let r="{",n=!0;for(const i of t)n?n=!1:r+=",",r+="".concat(i,":").concat(ac(e.fields[i]));return r+"}"}(e.mapValue):to()}function cc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function uc(e){return!!e&&"integerValue"in e}function lc(e){return!!e&&"arrayValue"in e}function hc(e){return!!e&&"nullValue"in e}function dc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pc(e){return!!e&&"mapValue"in e}function fc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Da(e.mapValue.fields,((e,r)=>t.mapValue.fields[e]=fc(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=fc(e.arrayValue.values[r]);return t}return Object.assign({},e)}function vc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function mc(e){return"nullValue"in e?ec:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cc(Za.empty(),Ro.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:to()}function gc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cc(Za.empty(),Ro.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?$a:to()}function yc(e,t){const r=ic(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function wc(e,t){const r=ic(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Sc{constructor(e){this.value=e}static empty(){return new Sc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=Po.emptyPath(),r={},n=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=fc(e):n.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){const t=this.field(e.popLast());pc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];pc(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){Da(t,((t,r)=>e[t]=r));for(const n of r)delete e[n]}clone(){return new Sc(fc(this.value))}}function bc(e){const t=[];return Da(e.fields,((e,r)=>{const n=new Po([e]);if(pc(r)){const e=bc(r.mapValue).fields;if(0===e.length)t.push(n);else for(const r of e)t.push(n.child(r))}else t.push(n)})),new Ua(t)}class Cc{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Cc(e,0,Co.min(),Co.min(),Co.min(),Sc.empty(),0)}static newFoundDocument(e,t,r,n){return new Cc(e,1,t,Co.min(),r,n,0)}static newNoDocument(e,t){return new Cc(e,2,t,Co.min(),Co.min(),Sc.empty(),0)}static newUnknownDocument(e,t){return new Cc(e,3,t,Co.min(),Co.min(),Sc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Co.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ic{constructor(e,t){this.position=e,this.inclusive=t}}function Ec(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(n=s.field.isKeyField()?Ro.comparator(Ro.fromName(o.referenceValue),r.key):ic(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function Tc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!rc(e.position[r],t.position[r]))return!1;return!0}class Pc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Rc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _c{}class Ac extends _c{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Bc(e,t,r):"array-contains"===t?new qc(e,r):"in"===t?new Wc(e,r):"not-in"===t?new Hc(e,r):"array-contains-any"===t?new Kc(e,r):new Ac(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new jc(e,r):new Uc(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ic(t,this.value)):null!==t&&tc(this.value)===tc(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return to()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kc extends _c{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new kc(e,t)}matches(e){return xc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function xc(e){return"and"===e.op}function Oc(e){return"or"===e.op}function Dc(e){return Nc(e)&&xc(e)}function Nc(e){for(const t of e.filters)if(t instanceof kc)return!1;return!0}function Mc(e){if(e instanceof Ac)return e.field.canonicalString()+e.op.toString()+oc(e.value);if(Dc(e))return e.filters.map((e=>Mc(e))).join(",");{const t=e.filters.map((e=>Mc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Lc(e,t){return e instanceof Ac?function(e,t){return t instanceof Ac&&e.op===t.op&&e.field.isEqual(t.field)&&rc(e.value,t.value)}(e,t):e instanceof kc?function(e,t){return t instanceof kc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,r,n)=>e&&Lc(r,t.filters[n])),!0)}(e,t):void to()}function Fc(e,t){const r=e.filters.concat(t);return kc.create(r,e.op)}function zc(e){return e instanceof Ac?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(oc(e.value))}(e):e instanceof kc?function(e){return e.op.toString()+" {"+e.getFilters().map(zc).join(" ,")+"}"}(e):"Filter"}class Bc extends Ac{constructor(e,t,r){super(e,t,r),this.key=Ro.fromName(r.referenceValue)}matches(e){const t=Ro.comparator(e.key,this.key);return this.matchesComparison(t)}}class jc extends Ac{constructor(e,t){super(e,"in",t),this.keys=Vc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Uc extends Ac{constructor(e,t){super(e,"not-in",t),this.keys=Vc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vc(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map((e=>Ro.fromName(e.referenceValue)))}class qc extends Ac{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&nc(t.arrayValue,this.value)}}class Wc extends Ac{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&nc(this.value.arrayValue,t)}}class Hc extends Ac{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!nc(this.value.arrayValue,t)}}class Kc extends Ac{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>nc(this.value.arrayValue,e)))}}class Gc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Jc(e){return new Gc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Qc(e){const t=no(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Mc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),$o(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>oc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>oc(e))).join(",")),t.ce=e}return t.ce}function Yc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Rc(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!Lc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tc(e.startAt,t.startAt)&&Tc(e.endAt,t.endAt)}function Xc(e){return Ro.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zc(e,t){return e.filters.filter((e=>e instanceof Ac&&e.field.isEqual(t)))}function $c(e,t,r){let n=ec,i=!0;for(const s of Zc(e,t)){let e=ec,t=!0;switch(s.op){case"<":case"<=":e=mc(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=ec}yc({value:n,inclusive:i},{value:e,inclusive:t})<0&&(n=e,i=t)}if(null!==r)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=r.position[s];yc({value:n,inclusive:i},{value:e,inclusive:r.inclusive})<0&&(n=e,i=r.inclusive);break}return{value:n,inclusive:i}}function eu(e,t,r){let n=$a,i=!0;for(const s of Zc(e,t)){let e=$a,t=!0;switch(s.op){case">=":case">":e=gc(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=$a}wc({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=r.position[s];wc({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}return{value:n,inclusive:i}}class tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ru(e,t,r,n,i,s,o,a){return new tu(e,t,r,n,i,s,o,a)}function nu(e){return new tu(e)}function iu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function su(e){return null!==e.collectionGroup}function ou(e){const t=no(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",n=function(e){let t=new za(Po.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);n.forEach((n=>{e.has(n.canonicalString())||n.isKeyField()||t.le.push(new Pc(n,r))})),e.has(Po.keyField().canonicalString())||t.le.push(new Pc(Po.keyField(),r))}return t.le}function au(e){const t=no(e);return t.he||(t.he=cu(t,ou(e))),t.he}function cu(e,t){if("F"===e.limitType)return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Pc(e.field,t)}));const r=e.endAt?new Ic(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Ic(e.startAt.position,e.startAt.inclusive):null;return Jc(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function uu(e,t){const r=e.filters.concat([t]);return new tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function lu(e,t,r){return new tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function hu(e,t){return Yc(au(e),au(t))&&e.limitType===t.limitType}function du(e){return"".concat(Qc(au(e)),"|lt:").concat(e.limitType)}function pu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>zc(e))).join(", "),"]")),$o(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>oc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>oc(e))).join(",")),"Target(".concat(t,")")}(au(e)),"; limitType=").concat(e.limitType,")")}function fu(e,t){return t.isFoundDocument()&&function(e,t){const r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Ro.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(const r of ou(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(const r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,r){const n=Ec(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,ou(e),t))&&!(e.endAt&&!function(e,t,r){const n=Ec(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,ou(e),t))}(e,t)}function vu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mu(e){return(t,r)=>{let n=!1;for(const i of ou(e)){const e=gu(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function gu(e,t,r){const n=e.field.isKeyField()?Ro.comparator(t.key,r.key):function(e,t,r){const n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?ic(n,i):to()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return to()}}class yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[n,i]of r)if(this.equalsFn(n,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,r)=>{for(const[n,i]of r)e(n,i)}))}isEmpty(){return Na(this.inner)}size(){return this.innerSize}}const wu=new Ma(Ro.comparator);function Su(){return wu}const bu=new Ma(Ro.comparator);function Cu(){let e=bu;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r)e=e.insert(i.key,i);return e}function Iu(e){let t=bu;return e.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Eu(){return Pu()}function Tu(){return Pu()}function Pu(){return new yu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ru=new Ma(Ro.comparator),_u=new za(Ro.comparator);function Au(){let e=_u;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r)e=e.add(i);return e}const ku=new za(yo);function xu(){return ku}function Ou(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ea(t)?"-0":t}}function Du(e){return{integerValue:""+e}}function Nu(e,t){return ta(t)?Du(t):Ou(e,t)}class Mu{constructor(){this._=void 0}}function Lu(e,t,r){return e instanceof Bu?function(e,t){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ja(t)&&(t=Qa(t)),t&&(r.fields.__previous_value__=t),{mapValue:r}}(r,t):e instanceof ju?Uu(e,t):e instanceof Vu?qu(e,t):function(e,t){const r=zu(e,t),n=Hu(r)+Hu(e.Ie);return uc(r)&&uc(e.Ie)?Du(n):Ou(e.serializer,n)}(e,t)}function Fu(e,t,r){return e instanceof ju?Uu(e,t):e instanceof Vu?qu(e,t):r}function zu(e,t){return e instanceof Wu?function(e){return uc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Bu extends Mu{}class ju extends Mu{constructor(e){super(),this.elements=e}}function Uu(e,t){const r=Ku(t);for(const n of e.elements)r.some((e=>rc(e,n)))||r.push(n);return{arrayValue:{values:r}}}class Vu extends Mu{constructor(e){super(),this.elements=e}}function qu(e,t){let r=Ku(t);for(const n of e.elements)r=r.filter((e=>!rc(e,n)));return{arrayValue:{values:r}}}class Wu extends Mu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Hu(e){return Ka(e.integerValue||e.doubleValue)}function Ku(e){return lc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Gu{constructor(e,t){this.field=e,this.transform=t}}class Ju{constructor(e,t){this.version=e,this.transformResults=t}}class Qu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qu}static exists(e){return new Qu(void 0,e)}static updateTime(e){return new Qu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xu{}function Zu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cl(e.key,Qu.none()):new nl(e.key,e.data,Qu.none());{const r=e.data,n=Sc.empty();let i=new za(Po.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new il(e.key,n,new Ua(i.toArray()),Qu.none())}}function $u(e,t,r){e instanceof nl?function(e,t,r){const n=e.value.clone(),i=ol(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):e instanceof il?function(e,t,r){if(!Yu(e.precondition,t))return void t.convertToUnknownDocument(r.version);const n=ol(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(sl(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(e,t,r):function(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}(0,t,r)}function el(e,t,r,n){return e instanceof nl?function(e,t,r,n){if(!Yu(e.precondition,t))return r;const i=e.value.clone(),s=al(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof il?function(e,t,r,n){if(!Yu(e.precondition,t))return r;const i=al(e.fieldTransforms,n,t),s=t.data;return s.setAll(sl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,r,n):function(e,t,r){return Yu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}(e,t,r)}function tl(e,t){let r=null;for(const n of e.fieldTransforms){const e=t.data.field(n.field),i=zu(n.transform,e||null);null!=i&&(null===r&&(r=Sc.empty()),r.set(n.field,i))}return r||null}function rl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wo(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ju&&t instanceof ju||e instanceof Vu&&t instanceof Vu?wo(e.elements,t.elements,rc):e instanceof Wu&&t instanceof Wu?rc(e.Ie,t.Ie):e instanceof Bu&&t instanceof Bu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nl extends Xu{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class il extends Xu{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sl(e){const t=new Map;return e.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}})),t}function ol(e,t,r){const n=new Map;ro(e.length===r.length);for(let i=0;i<r.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);n.set(s.field,Fu(o,a,r[i]))}return n}function al(e,t,r){const n=new Map;for(const i of e){const e=i.transform,s=r.data.field(i.field);n.set(i.field,Lu(e,s,t))}return n}class cl extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ul extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ll{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const t=this.mutations[n];t.key.isEqual(e.key)&&$u(t,e,r[n])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=el(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=el(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tu();return this.mutations.forEach((n=>{const i=e.get(n.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(n.key)?null:o;const a=Zu(s,o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(Co.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Au())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,((e,t)=>rl(e,t)))&&wo(this.baseMutations,e.baseMutations,((e,t)=>rl(e,t)))}}class hl{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){ro(e.mutations.length===r.length);let n=Ru;const i=e.mutations;for(let s=0;s<i.length;s++)n=n.insert(i[s].key,r[s].version);return new hl(e,t,r,n)}}class dl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class pl{constructor(e,t){this.count=e,this.unchangedNames=t}}var fl,vl;function ml(e){switch(e){default:return to();case io.CANCELLED:case io.UNKNOWN:case io.DEADLINE_EXCEEDED:case io.RESOURCE_EXHAUSTED:case io.INTERNAL:case io.UNAVAILABLE:case io.UNAUTHENTICATED:return!1;case io.INVALID_ARGUMENT:case io.NOT_FOUND:case io.ALREADY_EXISTS:case io.PERMISSION_DENIED:case io.FAILED_PRECONDITION:case io.ABORTED:case io.OUT_OF_RANGE:case io.UNIMPLEMENTED:case io.DATA_LOSS:return!0}}function gl(e){if(void 0===e)return Zs("GRPC error has no .code"),io.UNKNOWN;switch(e){case fl.OK:return io.OK;case fl.CANCELLED:return io.CANCELLED;case fl.UNKNOWN:return io.UNKNOWN;case fl.DEADLINE_EXCEEDED:return io.DEADLINE_EXCEEDED;case fl.RESOURCE_EXHAUSTED:return io.RESOURCE_EXHAUSTED;case fl.INTERNAL:return io.INTERNAL;case fl.UNAVAILABLE:return io.UNAVAILABLE;case fl.UNAUTHENTICATED:return io.UNAUTHENTICATED;case fl.INVALID_ARGUMENT:return io.INVALID_ARGUMENT;case fl.NOT_FOUND:return io.NOT_FOUND;case fl.ALREADY_EXISTS:return io.ALREADY_EXISTS;case fl.PERMISSION_DENIED:return io.PERMISSION_DENIED;case fl.FAILED_PRECONDITION:return io.FAILED_PRECONDITION;case fl.ABORTED:return io.ABORTED;case fl.OUT_OF_RANGE:return io.OUT_OF_RANGE;case fl.UNIMPLEMENTED:return io.UNIMPLEMENTED;case fl.DATA_LOSS:return io.DATA_LOSS;default:return to()}}(vl=fl||(fl={}))[vl.OK=0]="OK",vl[vl.CANCELLED=1]="CANCELLED",vl[vl.UNKNOWN=2]="UNKNOWN",vl[vl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vl[vl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vl[vl.NOT_FOUND=5]="NOT_FOUND",vl[vl.ALREADY_EXISTS=6]="ALREADY_EXISTS",vl[vl.PERMISSION_DENIED=7]="PERMISSION_DENIED",vl[vl.UNAUTHENTICATED=16]="UNAUTHENTICATED",vl[vl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vl[vl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vl[vl.ABORTED=10]="ABORTED",vl[vl.OUT_OF_RANGE=11]="OUT_OF_RANGE",vl[vl.UNIMPLEMENTED=12]="UNIMPLEMENTED",vl[vl.INTERNAL=13]="INTERNAL",vl[vl.UNAVAILABLE=14]="UNAVAILABLE",vl[vl.DATA_LOSS=15]="DATA_LOSS";let yl=null;function wl(){return new TextEncoder}const Sl=new Hs([4294967295,4294967295],0);function bl(e){const t=wl().encode(e),r=new Ws;return r.update(t),new Uint8Array(r.digest())}function Cl(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Hs([r,n],0),new Hs([i,s],0)]}class Il{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new El("Invalid padding: ".concat(t));if(r<0)throw new El("Invalid hash count: ".concat(r));if(e.length>0&&0===this.hashCount)throw new El("Invalid hash count: ".concat(r));if(0===e.length&&0!==t)throw new El("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Hs.fromNumber(this.Te)}de(e,t,r){let n=e.add(t.multiply(Hs.fromNumber(r)));return 1===n.compare(Sl)&&(n=new Hs([n.getBits(0),n.getBits(1)],0)),n.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=bl(e),[r,n]=Cl(t);for(let i=0;i<this.hashCount;i++){const e=this.de(r,n,i);if(!this.Ae(e))return!1}return!0}static create(e,t,r){const n=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Il(i,n,t);return r.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=bl(e),[r,n]=Cl(t);for(let i=0;i<this.hashCount;i++){const e=this.de(r,n,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tl{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const n=new Map;return n.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tl(Co.min(),n,new Ma(yo),Su(),Au())}}class Pl{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pl(r,t,Au(),Au(),Au())}}class Rl{constructor(e,t,r,n){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=n}}class _l{constructor(e,t){this.targetId=e,this.fe=t}}class Al{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qa.EMPTY_BYTE_STRING,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class kl{constructor(){this.ge=0,this.pe=Dl(),this.ye=qa.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Au(),t=Au(),r=Au();return this.pe.forEach(((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:to()}})),new Pl(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=Dl()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ro(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class xl{constructor(e){this.Be=e,this.ke=new Map,this.qe=Su(),this.Qe=Ol(),this.Ke=new Ma(yo)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:to()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,r)=>{this.je(r)&&t(r)}))}Je(e){const t=e.targetId,r=e.fe.count,n=this.Ye(t);if(n){const i=n.target;if(Xc(i))if(0===r){const e=new Ro(i.path);this.We(t,e,Cc.newNoDocument(e,Co.min()))}else ro(1===r);else{const n=this.Ze(t);if(n!==r){const r=this.Xe(e),i=r?this.et(r,e,n):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==yl||yl.tt(function(e,t,r,n,i){var s,o,a,c,u,l;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(l=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null==n?void 0:n.mightContain(e))&&void 0!==t&&t}}),h}(n,e.fe,this.Be.nt(),r,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:i=0}=t;let s,o;try{s=Ga(r).toUint8Array()}catch(e){if(e instanceof Va)return $s("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Il(s,n,i)}catch(e){return $s(e instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let n=0;return r.forEach((r=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(r.path.canonicalString());e.mightContain(s)||(this.We(t,r,null),n++)})),n}it(e){const t=new Map;this.ke.forEach(((r,n)=>{const i=this.Ye(n);if(i){if(r.current&&Xc(i.target)){const t=new Ro(i.target.path);null!==this.qe.get(t)||this.st(n,t)||this.We(n,t,Cc.newNoDocument(t,e))}r.De&&(t.set(n,r.ve()),r.Fe())}}));let r=Au();this.Qe.forEach(((e,t)=>{let n=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)})),n&&(r=r.add(e))})),this.qe.forEach(((t,r)=>r.setReadTime(e)));const n=new Tl(e,t,this.Ke,this.qe,r);return this.qe=Su(),this.Qe=Ol(),this.Ke=new Ma(yo),n}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const n=this.ze(e);this.st(e,t)?n.Me(t,1):n.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new kl,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new za(yo),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Xs("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new kl),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Ol(){return new Ma(Ro.comparator)}function Dl(){return new Ma(Ro.comparator)}const Nl={asc:"ASCENDING",desc:"DESCENDING"},Ml={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ll={and:"AND",or:"OR"};class Fl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zl(e,t){return e.useProto3Json||$o(t)?t:{value:t}}function Bl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ul(e,t){return Bl(e,t.toTimestamp())}function Vl(e){return ro(!!e),Co.fromTimestamp(function(e){const t=Ha(e);return new bo(t.seconds,t.nanos)}(e))}function ql(e,t){return Wl(e,t).canonicalString()}function Wl(e,t){const r=function(e){return new Eo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?r:r.child(t)}function Hl(e){const t=Eo.fromString(e);return ro(ph(t)),t}function Kl(e,t){return ql(e.databaseId,t.path)}function Gl(e,t){const r=Hl(t);if(r.get(1)!==e.databaseId.projectId)throw new so(io.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new so(io.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new Ro(Xl(r))}function Jl(e,t){return ql(e.databaseId,t)}function Ql(e){const t=Hl(e);return 4===t.length?Eo.emptyPath():Xl(t)}function Yl(e){return new Eo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xl(e){return ro(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Zl(e,t,r){return{name:Kl(e,t),fields:r.value.mapValue.fields}}function $l(e,t,r){const n=Gl(e,t.name),i=Vl(t.updateTime),s=t.createTime?Vl(t.createTime):Co.min(),o=new Sc({mapValue:{fields:t.fields}}),a=Cc.newFoundDocument(n,i,s,o);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function eh(e,t){let r;if(t instanceof nl)r={update:Zl(e,t.key,t.value)};else if(t instanceof cl)r={delete:Kl(e,t.key)};else if(t instanceof il)r={update:Zl(e,t.key,t.data),updateMask:dh(t.fieldMask)};else{if(!(t instanceof ul))return to();r={verify:Kl(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const r=t.transform;if(r instanceof Bu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof ju)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof Vu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof Wu)return{fieldPath:t.field.canonicalString(),increment:r.Ie};throw to()}(0,e)))),t.precondition.isNone||(r.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ul(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:to()}(e,t.precondition)),r}function th(e,t){const r=t.currentDocument?function(e){return void 0!==e.updateTime?Qu.updateTime(Vl(e.updateTime)):void 0!==e.exists?Qu.exists(e.exists):Qu.none()}(t.currentDocument):Qu.none(),n=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let r=null;if("setToServerValue"in t)ro("REQUEST_TIME"===t.setToServerValue),r=new Bu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];r=new ju(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];r=new Vu(e)}else"increment"in t?r=new Wu(e,t.increment):to();const n=Po.fromServerFormat(t.fieldPath);return new Gu(n,r)}(e,t))):[];if(t.update){t.update.name;const i=Gl(e,t.update.name),s=new Sc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ua(t.map((e=>Po.fromServerFormat(e))))}(t.updateMask);return new il(i,s,e,r,n)}return new nl(i,s,r,n)}if(t.delete){const n=Gl(e,t.delete);return new cl(n,r)}if(t.verify){const n=Gl(e,t.verify);return new ul(n,r)}return to()}function rh(e,t){return{documents:[Jl(e,t.path)]}}function nh(e,t){const r={structuredQuery:{}},n=t.path;let i;null!==t.collectionGroup?(i=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Jl(e,i);const s=function(e){if(0!==e.length)return hh(kc.create(e,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:uh(e.field),direction:oh(e.dir)}}(e)))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);const a=zl(e,t.limit);return null!==a&&(r.structuredQuery.limit=a),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:r,parent:i}}function ih(e){let t=Ql(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){ro(1===n);const e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=function(e){const t=sh(e);return t instanceof kc&&Dc(t)?t.getFilters():[t]}(r.where));let o=[];r.orderBy&&(o=function(e){return e.map((e=>function(e){return new Pc(lh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(r.orderBy));let a=null;r.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,$o(t)?null:t}(r.limit));let c=null;r.startAt&&(c=function(e){const t=!!e.before,r=e.values||[];return new Ic(r,t)}(r.startAt));let u=null;return r.endAt&&(u=function(e){const t=!e.before,r=e.values||[];return new Ic(r,t)}(r.endAt)),ru(t,i,o,s,a,"F",c,u)}function sh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lh(e.unaryFilter.field);return Ac.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=lh(e.unaryFilter.field);return Ac.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=lh(e.unaryFilter.field);return Ac.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lh(e.unaryFilter.field);return Ac.create(i,"!=",{nullValue:"NULL_VALUE"});default:return to()}}(e):void 0!==e.fieldFilter?function(e){return Ac.create(lh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return to()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return kc.create(e.compositeFilter.filters.map((e=>sh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return to()}}(e.compositeFilter.op))}(e):to()}function oh(e){return Nl[e]}function ah(e){return Ml[e]}function ch(e){return Ll[e]}function uh(e){return{fieldPath:e.canonicalString()}}function lh(e){return Po.fromServerFormat(e.fieldPath)}function hh(e){return e instanceof Ac?function(e){if("=="===e.op){if(dc(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NAN"}};if(hc(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dc(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NOT_NAN"}};if(hc(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(e.field),op:ah(e.op),value:e.value}}}(e):e instanceof kc?function(e){const t=e.getFilters().map((e=>hh(e)));return 1===t.length?t[0]:{compositeFilter:{op:ch(e.op),filters:t}}}(e):to()}function dh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ph(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class fh{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qa.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new fh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vh{constructor(e){this.ct=e}}function mh(e,t){const r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:gh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(e,t){return{name:Kl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bl(e,t.version.toTimestamp()),createTime:Bl(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:yh(t.version)};else{if(!t.isUnknownDocument())return to();n.unknownDocument={path:r.path.toArray(),version:yh(t.version)}}return n}function gh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function yh(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wh(e){const t=new bo(e.seconds,e.nanoseconds);return Co.fromTimestamp(t)}function Sh(e,t){const r=(t.baseMutations||[]).map((t=>th(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const r=t.mutations[s+1];e.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const n=t.mutations.map((t=>th(e.ct,t))),i=bo.fromMillis(t.localWriteTimeMs);return new ll(t.batchId,i,r,n)}function bh(e){const t=wh(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?wh(e.lastLimboFreeSnapshotVersion):Co.min();let n;return n=function(e){return void 0!==e.documents}(e.query)?function(e){return ro(1===e.documents.length),au(nu(Ql(e.documents[0])))}(e.query):function(e){return au(ih(e))}(e.query),new fh(n,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,r,qa.fromBase64String(e.resumeToken))}function Ch(e,t){const r=yh(t.snapshotVersion),n=yh(t.lastLimboFreeSnapshotVersion);let i;i=Xc(t.target)?rh(e.ct,t.target):nh(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Qc(t.target),readTime:r,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function Ih(e){const t=ih({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lu(t,t.limit,"L"):t}function Eh(e,t){return new dl(t.largestBatchId,th(e.ct,t.overlayMutation))}function Th(e,t){const r=t.path.lastSegment();return[e,ra(t.path.popLast()),r]}function Ph(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:yh(n.readTime),documentKey:ra(n.documentKey.path),largestBatchId:n.largestBatchId}}class Rh{getBundleMetadata(e,t){return _h(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:wh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return _h(e).put(function(e){return{bundleId:e.id,createTime:yh(Vl(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ah(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Ih(e.bundledQuery),readTime:wh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Ah(e).put(function(e){return{name:e.name,readTime:yh(Vl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function _h(e){return xa(e,"bundles")}function Ah(e){return xa(e,"namedQueries")}class kh{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new kh(e,r)}getOverlay(e,t){return xh(e).get(Th(this.userId,t)).next((e=>e?Eh(this.serializer,e):null))}getOverlays(e,t){const r=Eu();return jo.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&r.set(t,e)})))).next((()=>r))}saveOverlays(e,t,r){const n=[];return r.forEach(((r,i)=>{const s=new dl(t,i);n.push(this.ht(e,s))})),jo.waitFor(n)}removeOverlaysForBatchId(e,t,r){const n=new Set;t.forEach((e=>n.add(ra(e.getCollectionPath()))));const i=[];return n.forEach((t=>{const n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(xh(e).H("collectionPathOverlayIndex",n))})),jo.waitFor(i)}getOverlaysForCollection(e,t,r){const n=Eu(),i=ra(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return xh(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Eh(this.serializer,t);n.set(e.getKey(),e)}return n}))}getOverlaysForCollectionGroup(e,t,r,n){const i=Eu();let s;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xh(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,r)=>{const o=Eh(this.serializer,t);i.size()<n||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):r.done()})).next((()=>i))}ht(e,t){return xh(e).put(function(e,t,r){const[n,i,s]=Th(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:eh(e.ct,r.mutation)}}(this.serializer,this.userId,t))}}function xh(e){return xa(e,"documentOverlays")}class Oh{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ka(e.integerValue));else if("doubleValue"in e){const r=Ka(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),ea(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Ha(r)),t.At("".concat(r.seconds||"")),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ga(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?vc(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):to()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const n of Object.keys(r))this.Rt(n,t),this.It(r[n],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const n of r)this.It(n,t)}gt(e,t){this.Et(t,37),Ro.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Dh(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Nh(e){const t=64-function(e){let t=0;for(let r=0;r<8;++r){const n=Dh(255&e[r]);if(t+=n,8!==n)break}return t}(e);return Math.ceil(t/8)}Oh.bt=new Oh;class Mh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),r=Nh(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let n=t.length-r;n<t.length;++n)this.buffer[this.position++]=255&t[n]}qt(e){const t=this.Bt(e),r=Nh(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let n=t.length-r;n<t.length;++n)this.buffer[this.position++]=~(255&t[n])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let n=1;n<t.length;++n)t[n]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class Lh{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Fh{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class zh{constructor(){this.Gt=new Mh,this.zt=new Lh(this.Gt),this.jt=new Fh(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Bh{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bh(this.indexId,this.documentKey,this.arrayValue,r)}}function jh(e,t){let r=e.indexId-t.indexId;return 0!==r?r:(r=Uh(e.arrayValue,t.arrayValue),0!==r?r:(r=Uh(e.directionalValue,t.directionalValue),0!==r?r:Ro.comparator(e.documentKey,t.documentKey)))}function Uh(e,t){for(let r=0;r<e.length&&r<t.length;++r){const n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}class Vh{constructor(e){this.Yt=new za(((e,t)=>Po.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(ro(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ao(e);if(void 0!==t&&!this.nn(t))return!1;const r=ko(e);let n=new Set,i=0,s=0;for(;i<r.length&&this.nn(r[i]);++i)n=n.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!n.has(e.field.canonicalString())){const t=r[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<r.length;++i){const e=r[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new za(Po.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new xo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xo(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xo(r.field,"asc"===r.dir?0:1)));return new _o(_o.UNKNOWN_ID,this.collectionId,t,Oo.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qh(e){var t,r;if(ro(e instanceof Ac||e instanceof kc),e instanceof Ac){if(e instanceof Wc){const n=(null===(r=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map((t=>Ac.create(e.field,"==",t))))||[];return kc.create(n,"or")}return e}const n=e.filters.map((e=>qh(e)));return kc.create(n,e.op)}function Wh(e){if(0===e.getFilters().length)return[];const t=Jh(qh(e));return ro(Gh(t)),Hh(t)||Kh(t)?[t]:t.getFilters()}function Hh(e){return e instanceof Ac}function Kh(e){return e instanceof kc&&Dc(e)}function Gh(e){return Hh(e)||Kh(e)||function(e){if(e instanceof kc&&Oc(e)){for(const t of e.getFilters())if(!Hh(t)&&!Kh(t))return!1;return!0}return!1}(e)}function Jh(e){if(ro(e instanceof Ac||e instanceof kc),e instanceof Ac)return e;if(1===e.filters.length)return Jh(e.filters[0]);const t=e.filters.map((e=>Jh(e)));let r=kc.create(t,e.op);return r=Xh(r),Gh(r)?r:(ro(r instanceof kc),ro(xc(r)),ro(r.filters.length>1),r.filters.reduce(((e,t)=>Qh(e,t))))}function Qh(e,t){let r;return ro(e instanceof Ac||e instanceof kc),ro(t instanceof Ac||t instanceof kc),r=e instanceof Ac?t instanceof Ac?function(e,t){return kc.create([e,t],"and")}(e,t):Yh(e,t):t instanceof Ac?Yh(t,e):function(e,t){if(ro(e.filters.length>0&&t.filters.length>0),xc(e)&&xc(t))return Fc(e,t.getFilters());const r=Oc(e)?e:t,n=Oc(e)?t:e,i=r.filters.map((e=>Qh(e,n)));return kc.create(i,"or")}(e,t),Xh(r)}function Yh(e,t){if(xc(t))return Fc(t,e.getFilters());{const r=t.filters.map((t=>Qh(e,t)));return kc.create(r,"or")}}function Xh(e){if(ro(e instanceof Ac||e instanceof kc),e instanceof Ac)return e;const t=e.getFilters();if(1===t.length)return Xh(t[0]);if(Nc(e))return e;const r=t.map((e=>Xh(e))),n=[];return r.forEach((t=>{t instanceof Ac?n.push(t):t instanceof kc&&(t.op===e.op?n.push(...t.filters):n.push(t))})),1===n.length?n[0]:kc.create(n,e.op)}class Zh{constructor(){this._n=new $h}addToCollectionParentIndex(e,t){return this._n.add(t),jo.resolve()}getCollectionParents(e,t){return jo.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return jo.resolve()}deleteFieldIndex(e,t){return jo.resolve()}deleteAllFieldIndexes(e){return jo.resolve()}createTargetIndexes(e,t){return jo.resolve()}getDocumentsMatchingTarget(e,t){return jo.resolve(null)}getIndexType(e,t){return jo.resolve(0)}getFieldIndexes(e,t){return jo.resolve([])}getNextCollectionGroupToUpdate(e){return jo.resolve(null)}getMinOffset(e,t){return jo.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return jo.resolve(Mo.min())}updateCollectionGroup(e,t,r){return jo.resolve()}updateIndexEntries(e,t){return jo.resolve()}}class $h{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new za(Eo.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new za(Eo.comparator)).toArray()}}const ed=new Uint8Array(0);class td{constructor(e,t){this.databaseId=t,this.an=new $h,this.un=new yu((e=>Qc(e)),((e,t)=>Yc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:r,parent:ra(n)};return rd(e).put(i)}return jo.resolve()}getCollectionParents(e,t){const r=[],n=IDBKeyRange.bound([t,""],[So(t),""],!1,!0);return rd(e).W(n).next((e=>{for(const n of e){if(n.collectionId!==t)break;r.push(sa(n.parent))}return r}))}addFieldIndex(e,t){const r=id(e),n=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete n.indexId;const i=r.add(n);if(t.indexState){const r=sd(e);return i.next((e=>{r.put(Ph(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const r=id(e),n=sd(e),i=nd(e);return r.delete(t.indexId).next((()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=id(e),r=nd(e),n=sd(e);return t.H().next((()=>r.H())).next((()=>n.H()))}createTargetIndexes(e,t){return jo.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((r=>{if(0===r||1===r){const r=new Vh(t).on();if(null!=r)return this.addFieldIndex(e,r)}}))))}getDocumentsMatchingTarget(e,t){const r=nd(e);let n=!0;const i=new Map;return jo.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{n&&(n=!!e),i.set(t,e)})))).next((()=>{if(n){let e=Au();const n=[];return jo.forEach(i,((i,s)=>{Xs("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Qc(t)));const o=function(e,t){const r=Ao(t);if(void 0===r)return null;for(const n of Zc(e,r.fieldPath))switch(n.op){case"array-contains-any":return n.value.arrayValue.values||[];case"array-contains":return[n.value]}return null}(s,i),a=function(e,t){const r=new Map;for(const n of ko(t))for(const t of Zc(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}(s,i),c=function(e,t){const r=[];let n=!0;for(const i of ko(t)){const t=0===i.kind?$c(e,i.fieldPath,e.startAt):eu(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new Ic(r,n)}(s,i),u=function(e,t){const r=[];let n=!0;for(const i of ko(t)){const t=0===i.kind?eu(e,i.fieldPath,e.endAt):$c(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new Ic(r,n)}(s,i),l=this.hn(i,s,c),h=this.hn(i,s,u),d=this.Pn(i,s,a),p=this.In(i.indexId,o,l,c.inclusive,h,u.inclusive,d);return jo.forEach(p,(i=>r.j(i,t.limit).next((t=>{t.forEach((t=>{const r=Ro.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))}))}))))})).next((()=>n))}return jo.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Wh(kc.create(e.filters,"and")).map((t=>Jc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,r,n,i,s,o){const a=(null!=t?t.length:1)*Math.max(r.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.Tn(t[l/c]):ed,h=this.En(e,a,r[l%c],n),d=this.dn(e,a,i[l%c],s),p=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,p))}return u}En(e,t,r,n){const i=new Bh(e,Ro.empty(),t,r);return n?i:i.Jt()}dn(e,t,r,n){const i=new Bh(e,Ro.empty(),t,r);return n?i.Jt():i}ln(e,t){const r=new Vh(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next((e=>{let t=null;for(const n of e)r.tn(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t}))}getIndexType(e,t){let r=2;const n=this.cn(t);return jo.forEach(n,(t=>this.ln(e,t).next((e=>{e?0!==r&&e.fields.length<function(e){let t=new za(Po.comparator),r=!1;for(const n of e.filters)for(const e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(r?1:0)}(t)&&(r=1):r=0})))).next((()=>function(e){return null!==e.limit}(t)&&n.length>1&&2===r?1:r))}An(e,t){const r=new zh;for(const n of ko(e)){const e=t.data.field(n.fieldPath);if(null==e)return null;const i=r.Ht(n.kind);Oh.bt.Pt(e,i)}return r.Wt()}Tn(e){const t=new zh;return Oh.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new zh;return Oh.bt.Pt(cc(this.databaseId,t),r.Ht(function(e){const t=ko(e);return 0===t.length?0:t[t.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let n=[];n.push(new zh);let i=0;for(const s of ko(e)){const e=r[i++];for(const r of n)if(this.Vn(t,s.fieldPath)&&lc(e))n=this.mn(n,s,e);else{const t=r.Ht(s.kind);Oh.bt.Pt(e,t)}}return this.fn(n)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const n=[...e],i=[];for(const s of r.arrayValue.values||[])for(const e of n){const r=new zh;r.seed(e.Wt()),Oh.bt.Pt(s,r.Ht(t.kind)),i.push(r)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Ac&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const r=id(e),n=sd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((e=>{const t=[];return jo.forEach(e,(e=>n.get([e.indexId,this.uid]).next((r=>{t.push(function(e,t){const r=t?new Oo(t.sequenceNumber,new Mo(wh(t.readTime),new Ro(sa(t.documentKey)),t.largestBatchId)):Oo.empty(),n=e.fields.map((e=>{let[t,r]=e;return new xo(Po.fromServerFormat(t),r)}));return new _o(e.indexId,e.collectionGroup,n,r)}(e,r))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:yo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,r){const n=id(e),i=sd(e);return this.gn(e).next((e=>n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>jo.forEach(t,(t=>i.put(Ph(t.indexId,this.uid,e,r))))))))}updateIndexEntries(e,t){const r=new Map;return jo.forEach(t,((t,n)=>{const i=r.get(t.collectionGroup);return(i?jo.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(r.set(t.collectionGroup,i),jo.forEach(i,(r=>this.pn(e,t,r).next((t=>{const i=this.yn(n,r);return t.isEqual(i)?jo.resolve():this.wn(e,n,r,t,i)})))))))}))}Sn(e,t,r,n){return nd(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,n){return nd(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const n=nd(e);let i=new za(jh);return n.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},((e,n)=>{i=i.add(new Bh(r.indexId,t,n.arrayValue,n.directionalValue))})).next((()=>i))}yn(e,t){let r=new za(jh);const n=this.An(t,e);if(null==n)return r;const i=Ao(t);if(null!=i){const s=e.data.field(i.fieldPath);if(lc(s))for(const i of s.arrayValue.values||[])r=r.add(new Bh(t.indexId,e.key,this.Tn(i),n))}else r=r.add(new Bh(t.indexId,e.key,ed,n));return r}wn(e,t,r,n,i){Xs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,r,n,i){const s=e.getIterator(),o=t.getIterator();let a=ja(s),c=ja(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const n=r(a,c);n<0?t=!0:n>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(n(c),c=ja(o)):t?(i(a),a=ja(s)):(a=ja(s),c=ja(o))}}(n,i,jh,(n=>{s.push(this.Sn(e,t,r,n))}),(n=>{s.push(this.bn(e,t,r,n))})),jo.waitFor(s)}gn(e){let t=1;return sd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,r,n)=>{n.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((e,t)=>jh(e,t))).filter(((e,t,r)=>!t||0!==jh(e,r[t-1])));const n=[];n.push(e);for(const s of r){const r=jh(s,e),i=jh(s,t);if(0===r)n[0]=e.Jt();else if(r>0&&i<0)n.push(s),n.push(s.Jt());else if(i>0)break}n.push(t);const i=[];for(let s=0;s<n.length;s+=2){if(this.Dn(n[s],n[s+1]))return[];const e=[n[s].indexId,this.uid,n[s].arrayValue,n[s].directionalValue,ed,[]],t=[n[s+1].indexId,this.uid,n[s+1].arrayValue,n[s+1].directionalValue,ed,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return jh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(od)}getMinOffset(e,t){return jo.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||to())))).next(od)}}function rd(e){return xa(e,"collectionParents")}function nd(e){return xa(e,"indexEntries")}function id(e){return xa(e,"indexConfiguration")}function sd(e){return xa(e,"indexState")}function od(e){ro(0!==e.length);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){const i=e[n].indexState.offset;Lo(i,t)<0&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new Mo(t.readTime,t.documentKey,r)}const ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cd{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cd(e,cd.DEFAULT_COLLECTION_PERCENTILE,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ud(e,t,r){const n=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let a=0;const c=n.Y({range:o},((e,t,r)=>(a++,r.delete())));s.push(c.next((()=>{ro(1===a)})));const u=[];for(const l of r.mutations){const e=ca(t,l.key.path,r.batchId);s.push(i.delete(e)),u.push(l.key)}return jo.waitFor(s).next((()=>u))}function ld(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw to();t=e.noDocument}return JSON.stringify(t).length}cd.DEFAULT_COLLECTION_PERCENTILE=10,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cd.DEFAULT=new cd(41943040,cd.DEFAULT_COLLECTION_PERCENTILE,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cd.DISABLED=new cd(-1,0,0);class hd{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.Cn={}}static lt(e,t,r,n){ro(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new hd(i,t,r,n)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).Y({index:"userMutationsIndex",range:r},((e,r,n)=>{t=!1,n.done()})).next((()=>t))}addMutationBatch(e,t,r,n){const i=fd(e),s=pd(e);return s.add({}).next((o=>{ro("number"==typeof o);const a=new ll(o,t,r,n),c=function(e,t,r){const n=r.baseMutations.map((t=>eh(e.ct,t))),i=r.mutations.map((t=>eh(e.ct,t)));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new za(((e,t)=>yo(e.canonicalString(),t.canonicalString())));for(const e of n){const t=ca(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,ua))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),jo.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return pd(e).get(t).next((e=>e?(ro(e.userId===this.userId),Sh(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?jo.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const r=e.keys();return this.Cn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return pd(e).Y({index:"userMutationsIndex",range:n},((e,t,n)=>{t.userId===this.userId&&(ro(t.batchId>=r),i=Sh(this.serializer,t)),n.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pd(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,n)=>{r=t.batchId,n.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).W("userMutationsIndex",t).next((e=>e.map((e=>Sh(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=aa(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return fd(e).Y({range:n},((r,n,s)=>{const[o,a,c]=r,u=sa(a);if(o===this.userId&&t.path.isEqual(u))return pd(e).get(c).next((e=>{if(!e)throw to();ro(e.userId===this.userId),i.push(Sh(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new za(yo);const n=[];return t.forEach((t=>{const i=aa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=fd(e).Y({range:s},((e,n,i)=>{const[s,o,a]=e,c=sa(o);s===this.userId&&t.path.isEqual(c)?r=r.add(a):i.done()}));n.push(o)})),jo.waitFor(n).next((()=>this.Fn(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1,i=aa(this.userId,r),s=IDBKeyRange.lowerBound(i);let o=new za(yo);return fd(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,u=sa(a);s===this.userId&&r.isPrefixOf(u)?u.length===n&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const r=[],n=[];return t.forEach((t=>{n.push(pd(e).get(t).next((e=>{if(null===e)throw to();ro(e.userId===this.userId),r.push(Sh(this.serializer,e))})))})),jo.waitFor(n).next((()=>r))}removeMutationBatch(e,t){return ud(e.ae,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),jo.forEach(r,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return jo.resolve();const r=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),n=[];return fd(e).Y({range:r},((e,t,r)=>{if(e[0]===this.userId){const t=sa(e[1]);n.push(t)}else r.done()})).next((()=>{ro(0===n.length)}))}))}containsKey(e,t){return dd(e,this.userId,t)}xn(e){return vd(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function dd(e,t,r){const n=aa(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return fd(e).Y({range:s,J:!0},((e,r,n)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),n.done()})).next((()=>o))}function pd(e){return xa(e,"mutations")}function fd(e){return xa(e,"documentMutations")}function vd(e){return xa(e,"mutationQueues")}class md{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new md(0)}static Ln(){return new md(-1)}}class gd{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const r=new md(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Co.fromTimestamp(new bo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.Bn(e).next((n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.kn(e,n))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>yd(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(ro(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,r){let n=0;const i=[];return yd(e).Y(((s,o)=>{const a=bh(o);a.sequenceNumber<=t&&null===r.get(a.targetId)&&(n++,i.push(this.removeTargetData(e,a)))})).next((()=>jo.waitFor(i))).next((()=>n))}forEachTarget(e,t){return yd(e).Y(((e,r)=>{const n=bh(r);t(n)}))}Bn(e){return wd(e).get("targetGlobalKey").next((e=>(ro(null!==e),e)))}kn(e,t){return wd(e).put("targetGlobalKey",t)}qn(e,t){return yd(e).put(Ch(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const r=Qc(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yd(e).Y({range:n,index:"queryTargetsIndex"},((e,r,n)=>{const s=bh(r);Yc(t,s.target)&&(i=s,n.done())})).next((()=>i))}addMatchingKeys(e,t,r){const n=[],i=Sd(e);return t.forEach((t=>{const s=ra(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))})),jo.waitFor(n)}removeMatchingKeys(e,t,r){const n=Sd(e);return jo.forEach(t,(t=>{const i=ra(t.path);return jo.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])}))}removeMatchingKeysForTargetId(e,t){const r=Sd(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),n=Sd(e);let i=Au();return n.Y({range:r,J:!0},((e,t,r)=>{const n=sa(e[1]),s=new Ro(n);i=i.add(s)})).next((()=>i))}containsKey(e,t){const r=ra(t.path),n=IDBKeyRange.bound([r],[So(r)],!1,!0);let i=0;return Sd(e).Y({index:"documentTargetsIndex",J:!0,range:n},((e,t,r)=>{let[n,s]=e;0!==n&&(i++,r.done())})).next((()=>i>0))}_t(e,t){return yd(e).get(t).next((e=>e?bh(e):null))}}function yd(e){return xa(e,"targets")}function wd(e){return xa(e,"targetGlobal")}function Sd(e){return xa(e,"targetDocuments")}function bd(e,t){let[r,n]=e,[i,s]=t;const o=yo(r,i);return 0===o?yo(n,s):o}class Cd{constructor(e){this.Kn=e,this.buffer=new za(bd),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();bd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Id{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Xs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ho(e)?Xs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Bo(e)}await this.zn(3e5)}))}}class Ed{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return jo.resolve(Zo._e);const r=new Cd(t);return this.jn.forEachTarget(e,(e=>r.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>r.Wn(e))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xs("LruGarbageCollector","Garbage collection skipped; disabled"),jo.resolve(ad)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Xs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ad):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,n,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Xs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n)))).next((n=>(r=n,o=Date.now(),this.removeTargets(e,r,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,r)))).next((e=>(c=Date.now(),Ys()<=re.DEBUG&&Xs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(n," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),jo.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e}))))}}function Td(e,t){return new Ed(e,t)}class Pd{constructor(e,t){this.db=e,this.garbageCollector=Td(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,r)=>t(r)))}addReference(e,t,r){return Rd(e,r)}removeReference(e,t,r){return Rd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Rd(e,t)}er(e,t){return function(e,t){let r=!1;return vd(e).Z((n=>dd(e,n,t).next((e=>(e&&(r=!0),jo.resolve(!e)))))).next((()=>r))}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Co.min()),Sd(e).delete(function(e){return[0,ra(e.path)]}(s)))))}));n.push(t)}})).next((()=>jo.waitFor(n))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Rd(e,t)}Xn(e,t){const r=Sd(e);let n,i=Zo._e;return r.Y({index:"documentTargetsIndex"},((e,r)=>{let[s,o]=e,{path:a,sequenceNumber:c}=r;0===s?(i!==Zo._e&&t(new Ro(sa(n)),i),i=c,n=a):i=Zo._e})).next((()=>{i!==Zo._e&&t(new Ro(sa(n)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rd(e,t){return Sd(e).put(function(e,t){return{targetId:0,path:ra(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class _d{constructor(){this.changes=new yu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?jo.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ad{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Dd(e).put(r)}removeEntry(e,t,r){return Dd(e).delete(function(e,t){const r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],gh(t),r[r.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.tr(e,r))))}getEntry(e,t){let r=Cc.newInvalidDocument(t);return Dd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nd(t))},((e,n)=>{r=this.nr(t,n)})).next((()=>r))}rr(e,t){let r={size:0,document:Cc.newInvalidDocument(t)};return Dd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nd(t))},((e,n)=>{r={document:this.nr(t,n),size:ld(n)}})).next((()=>r))}getEntries(e,t){let r=Su();return this.ir(e,t,((e,t)=>{const n=this.nr(e,t);r=r.insert(e,n)})).next((()=>r))}sr(e,t){let r=Su(),n=new Ma(Ro.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);r=r.insert(e,i),n=n.insert(e,ld(t))})).next((()=>({documents:r,_r:n})))}ir(e,t,r){if(t.isEmpty())return jo.resolve();let n=new za(Ld);t.forEach((e=>n=n.add(e)));const i=IDBKeyRange.bound(Nd(n.first()),Nd(n.last())),s=n.getIterator();let o=s.getNext();return Dd(e).Y({index:"documentKeyIndex",range:i},((e,t,n)=>{const i=Ro.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ld(o,i)<0;)r(o,null),o=s.getNext();o&&o.isEqual(i)&&(r(o,t),o=s.hasNext()?s.getNext():null),o?n.U(Nd(o)):n.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,r,n,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),gh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dd(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let r=Su();for(const i of e){const e=this.nr(Ro.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(fu(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r}))}getAllFromCollectionGroup(e,t,r,n){let i=Su();const s=Md(t,r),o=Md(t,Mo.max());return Dd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,r)=>{const s=this.nr(Ro.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===n&&r.done()})).next((()=>i))}newChangeBuffer(e){return new xd(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Od(e).get("remoteDocumentGlobalKey").next((e=>(ro(!!e),e)))}tr(e,t){return Od(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let r;if(t.document)r=$l(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ro.fromSegments(t.noDocument.path),n=wh(t.noDocument.readTime);r=Cc.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return to();{const e=Ro.fromSegments(t.unknownDocument.path),n=wh(t.unknownDocument.version);r=Cc.newUnknownDocument(e,n)}}return t.readTime&&r.setReadTime(function(e){const t=new bo(e[0],e[1]);return Co.fromTimestamp(t)}(t.readTime)),r}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Co.min()))return e}return Cc.newInvalidDocument(e)}}function kd(e){return new Ad(e)}class xd extends _d{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new yu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let r=0,n=new za(((e,t)=>yo(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=mh(this.ar.serializer,s);n=n.add(i.path.popLast());const c=ld(a);r+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(r-=o.size,this.trackRemovals){const r=mh(this.ar.serializer,s.convertToNoDocument(Co.min()));t.push(this.ar.addEntry(e,i,r))}})),n.forEach((r=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,r))})),t.push(this.ar.updateMetadata(e,r)),jo.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:r}=e;return r.forEach(((e,r)=>{this.ur.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}function Od(e){return xa(e,"remoteDocumentGlobal")}function Dd(e){return xa(e,"remoteDocumentsV14")}function Nd(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Md(e,t){const r=t.documentKey.path.toArray();return[e,gh(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ld(e,t){const r=e.path.toArray(),n=t.path.toArray();let i=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(i=yo(r[s],n[s]),i)return i;return i=yo(r.length,n.length),i||(i=yo(r[r.length-2],n[n.length-2]),i||yo(r[r.length-1],n[n.length-1]))}class Fd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zd{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((n=>(r=n,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==r&&el(r.mutation,e,Ua.empty(),bo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Au()).next((()=>t))))}getLocalViewOfDocuments(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Au();const n=Eu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,r).next((e=>{let t=Cu();return e.forEach(((e,r)=>{t=t.insert(e,r.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const r=Eu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Au())))}populateOverlays(e,t,r){const n=[];return r.forEach((e=>{t.has(e)||n.push(e)})),this.documentOverlayCache.getOverlays(e,n).next((e=>{e.forEach(((e,r)=>{t.set(e,r)}))}))}computeViews(e,t,r,n){let i=Su();const s=Pu(),o=Pu();return t.forEach(((e,t)=>{const o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof il)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),el(o.mutation,t,o.mutation.getFieldMask(),bo.now())):s.set(t.key,Ua.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var r;return o.set(e,new Fd(t,null!==(r=s.get(e))&&void 0!==r?r:null))})),o)))}recalculateAndSaveOverlays(e,t){const r=Pu();let n=new Ma(((e,t)=>e-t)),i=Au();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=r.get(e)||Ua.empty();o=i.applyToLocalView(s,o),r.set(e,o);const a=(n.get(i.batchId)||Au()).add(e);n=n.insert(i.batchId,a)}))})).next((()=>{const s=[],o=n.getReverseIterator();for(;o.hasNext();){const n=o.getNext(),a=n.key,c=n.value,u=Tu();c.forEach((e=>{if(!i.has(e)){const n=Zu(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return jo.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,r,n){return function(e){return Ro.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):su(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next((i=>{const s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):jo.resolve(Eu());let o=-1,a=i;return s.next((t=>jo.forEach(t,((t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?jo.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Au()))).next((e=>({batchId:o,changes:Iu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ro(t)).next((e=>{let t=Cu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){const i=t.collectionGroup;let s=Cu();return this.indexManager.getCollectionParents(e,i).next((o=>jo.forEach(o,(o=>{const a=function(e,t){return new tu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,r,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n)))).next((e=>{i.forEach(((t,r)=>{const n=r.getKey();null===e.get(n)&&(e=e.insert(n,Cc.newInvalidDocument(n)))}));let r=Cu();return e.forEach(((e,n)=>{const s=i.get(e);void 0!==s&&el(s.mutation,n,Ua.empty(),bo.now()),fu(t,n)&&(r=r.insert(e,n))})),r}))}}class Bd{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return jo.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vl(e.createTime)}}(t)),jo.resolve()}getNamedQuery(e,t){return jo.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Ih(e.bundledQuery),readTime:Vl(e.readTime)}}(t)),jo.resolve()}}class jd{constructor(){this.overlays=new Ma(Ro.comparator),this.hr=new Map}getOverlay(e,t){return jo.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Eu();return jo.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&r.set(t,e)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((r,n)=>{this.ht(e,t,n)})),jo.resolve()}removeOverlaysForBatchId(e,t,r){const n=this.hr.get(r);return void 0!==n&&(n.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(r)),jo.resolve()}getOverlaysForCollection(e,t,r){const n=Eu(),i=t.length+1,s=new Ro(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return jo.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new Ma(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=Eu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Eu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=n)););return jo.resolve(o)}ht(e,t,r){const n=this.overlays.get(r.key);if(null!==n){const e=this.hr.get(n.largestBatchId).delete(r.key);this.hr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new dl(t,r));let i=this.hr.get(t);void 0===i&&(i=Au(),this.hr.set(t,i)),this.hr.set(t,i.add(r.key))}}class Ud{constructor(){this.Pr=new za(Vd.Ir),this.Tr=new za(Vd.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Vd(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Vd(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Ro(new Eo([])),r=new Vd(t,e),n=new Vd(t,e+1),i=[];return this.Tr.forEachInRange([r,n],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ro(new Eo([])),r=new Vd(t,e),n=new Vd(t,e+1);let i=Au();return this.Tr.forEachInRange([r,n],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Vd(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vd{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ro.comparator(e.key,t.key)||yo(e.pr,t.pr)}static Er(e,t){return yo(e.pr,t.pr)||Ro.comparator(e.key,t.key)}}class qd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new za(Vd.Ir)}checkEmpty(e){return jo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ll(i,t,r,n);this.mutationQueue.push(s);for(const o of n)this.wr=this.wr.add(new Vd(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return jo.resolve(s)}lookupMutationBatch(e,t){return jo.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=this.br(r),i=n<0?0:n;return jo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return jo.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return jo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vd(t,0),n=new Vd(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,n],(e=>{const t=this.Sr(e.pr);i.push(t)})),jo.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new za(yo);return t.forEach((e=>{const t=new Vd(e,0),n=new Vd(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,n],(e=>{r=r.add(e.pr)}))})),jo.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1;let i=r;Ro.isDocumentKey(i)||(i=i.child(""));const s=new Vd(new Ro(i),0);let o=new za(yo);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.pr)),!0)}),s),jo.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const r=this.Sr(e);null!==r&&t.push(r)})),t}removeMutationBatch(e,t){ro(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return jo.forEach(t.mutations,(n=>{const i=new Vd(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)})).next((()=>{this.wr=r}))}Mn(e){}containsKey(e,t){const r=new Vd(t,0),n=this.wr.firstAfterOrEqual(r);return jo.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,jo.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wd{constructor(e){this.vr=e,this.docs=new Ma(Ro.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return jo.resolve(r?r.document.mutableCopy():Cc.newInvalidDocument(t))}getEntries(e,t){let r=Su();return t.forEach((e=>{const t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cc.newInvalidDocument(e))})),jo.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=Su();const s=t.path,o=new Ro(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Lo(No(o),r)<=0||(n.has(o.key)||fu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return jo.resolve(i)}getAllFromCollectionGroup(e,t,r,n){to()}Fr(e,t){return jo.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Hd(this)}getSize(e){return jo.resolve(this.size)}}class Hd extends _d{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((r,n)=>{n.isValidDocument()?t.push(this.ar.addEntry(e,n)):this.ar.removeEntry(r)})),jo.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Kd{constructor(e){this.persistence=e,this.Mr=new yu((e=>Qc(e)),Yc),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ud,this.targetCount=0,this.Lr=md.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,r)=>t(r))),jo.resolve()}getLastRemoteSnapshotVersion(e){return jo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return jo.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),jo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),jo.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new md(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,jo.resolve()}updateTargetData(e,t){return this.qn(t),jo.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,jo.resolve()}removeTargets(e,t,r){let n=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)})),jo.waitFor(i).next((()=>n))}getTargetCount(e){return jo.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return jo.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),jo.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const n=this.persistence.referenceDelegate,i=[];return n&&t.forEach((t=>{i.push(n.markPotentiallyOrphaned(e,t))})),jo.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),jo.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return jo.resolve(r)}containsKey(e,t){return jo.resolve(this.Nr.containsKey(t))}}class Gd{constructor(e,t){this.Br={},this.overlays={},this.kr=new Zo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Kd(this),this.indexManager=new Zh,this.remoteDocumentCache=function(e){return new Wd(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new vh(t),this.$r=new Bd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new qd(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Xs("MemoryPersistence","Starting transaction:",e);const n=new Jd(this.kr.next());return this.referenceDelegate.Ur(),r(n).next((e=>this.referenceDelegate.Wr(n).next((()=>e)))).toPromise().then((e=>(n.raiseOnCommittedEvent(),e)))}Gr(e,t){return jo.or(Object.values(this.Br).map((r=>()=>r.containsKey(e,t))))}}class Jd extends zo{constructor(e){super(),this.currentSequenceNumber=e}}class Qd{constructor(e){this.persistence=e,this.zr=new Ud,this.jr=null}static Hr(e){return new Qd(e)}get Jr(){if(this.jr)return this.jr;throw to()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),jo.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),jo.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),jo.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>r.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jo.forEach(this.Jr,(r=>{const n=Ro.fromPath(r);return this.Yr(e,n).next((e=>{e||t.removeEntry(n,Co.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return jo.or([()=>jo.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Yd{constructor(e){this.serializer=e}N(e,t,r,n){const i=new Uo("createOrUpgrade",t);r<1&&n>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0}),e.createObjectStore("documentMutations")}(e),Xd(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=jo.resolve();return r<3&&n>=3&&(0!==r&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Xd(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Co.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",r)}(i)))),r<4&&n>=4&&(0!==r&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((r=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0});const n=t.store("mutations"),i=r.map((e=>n.put(e)));return jo.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),r<5&&n>=5&&(s=s.next((()=>this.Xr(i)))),r<6&&n>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),r<7&&n>=7&&(s=s.next((()=>this.ti(i)))),r<8&&n>=8&&(s=s.next((()=>this.ni(e,i)))),r<9&&n>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),r<10&&n>=10&&(s=s.next((()=>this.ri(i)))),r<11&&n>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),r<12&&n>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ba});t.createIndex("collectionPathOverlayIndex",Ca,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ia,{unique:!1})}(e)}))),r<13&&n>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:la});t.createIndex("documentKeyIndex",ha),t.createIndex("collectionGroupIndex",da)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),r<14&&n>=14&&(s=s.next((()=>this.si(e,i)))),r<15&&n>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ga}).createIndex("sequenceNumberIndex",ya,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:wa}).createIndex("documentKeyIndex",Sa,{unique:!1})}(e)))),r<16&&n>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,r)=>{t+=ld(r)})).next((()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)}))}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next((t=>jo.forEach(t,(t=>{const n=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",n).next((r=>jo.forEach(r,(r=>{ro(r.userId===t.userId);const n=Sh(this.serializer,r);return ud(e,t.userId,n).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const n=[];return r.Y(((r,i)=>{const s=new Eo(r),o=function(e){return[0,ra(e)]}(s);n.push(t.get(o).next((r=>r?jo.resolve():(r=>t.put({targetId:0,path:ra(r),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>jo.waitFor(n)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:ma});const r=t.store("collectionParents"),n=new $h,i=e=>{if(n.add(e)){const t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:ra(n)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const r=new Eo(e);return i(r.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[r,n,s]=e;const o=sa(n);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,r)=>{const n=bh(r),i=Ch(this.serializer,n);return t.put(i)}))}ii(e,t){const r=t.store("remoteDocuments"),n=[];return r.Y(((e,r)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Ro(Eo.fromString(e.document.name).popFirst(5)):e.noDocument?Ro.fromSegments(e.noDocument.path):e.unknownDocument?Ro.fromSegments(e.unknownDocument.path):to()}(r).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(o))})).next((()=>jo.waitFor(n)))}si(e,t){const r=t.store("mutations"),n=kd(this.serializer),i=new Gd(Qd.Hr,this.serializer.ct);return r.W().next((e=>{const r=new Map;return e.forEach((e=>{var t;let n=null!==(t=r.get(e.userId))&&void 0!==t?t:Au();Sh(this.serializer,e).keys().forEach((e=>n=n.add(e))),r.set(e.userId,n)})),jo.forEach(r,((e,r)=>{const s=new Gs(r),o=kh.lt(this.serializer,s),a=i.getIndexManager(s),c=hd.lt(s,this.serializer,a,i.referenceDelegate);return new zd(n,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new ka(t,Zo._e),e).next()}))}))}}function Xd(e){e.createObjectStore("targetDocuments",{keyPath:fa}).createIndex("documentTargetsIndex",va,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pa,{unique:!0}),e.createObjectStore("targetGlobal")}const Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $d{constructor(e,t,r,n,i,s,o,a,c,u){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=u,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!$d.D())throw new so(io.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pd(this,n),this.Ti=t+"main",this.serializer=new vh(a),this.Ei=new Vo(this.Ti,this.ui,new Yd(this.serializer)),this.Qr=new gd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kd(this.serializer),this.$r=new Rh,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Zs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new so(io.FAILED_PRECONDITION,Zd);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Zo(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>tp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Ho(e))return Xs("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return ep(e).get("owner").next((e=>jo.resolve(this.Si(e))))}bi(e){return tp(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=xa(e,"clientMetadata");return t.W().next((e=>{const r=this.vi(e,18e5),n=e.filter((e=>-1===r.indexOf(e)));return jo.forEach(n,(e=>t.delete(e.clientId))).next((()=>n))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?jo.resolve(!0):ep(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new so(io.FAILED_PRECONDITION,Zd);return!1}}return!(!this.networkEnabled||!this.inForeground)||tp(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Xs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ka(e,Zo._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>tp(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return hd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new td(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return kh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Xs("IndexedDbPersistence","Starting transaction:",e);const n="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Aa:15===e?_a:14===e?Ra:13===e?Pa:12===e?Ta:11===e?Ea:void to()}(this.ui);let s;return this.Ei.runTransaction(e,n,i,(n=>(s=new ka(n,this.kr?this.kr.next():Zo._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Zs("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new so(io.FAILED_PRECONDITION,Fo);return r(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>r(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return ep(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new so(io.FAILED_PRECONDITION,Zd)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ep(e).put("owner",t)}static D(){return Vo.D()}yi(e){const t=ep(e);return t.get("owner").next((e=>this.Si(e)?(Xs("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):jo.resolve()))}Ci(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Zs("Detected an update time that is in the future: ".concat(e," > ").concat(r)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;z()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Xs("IndexedDbPersistence","Client '".concat(e,"' ").concat(r?"is":"is not"," zombied in LocalStorage")),r}catch(e){return Zs("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(nA){Zs("Failed to set zombie client id.",nA)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(nA){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function ep(e){return xa(e,"owner")}function tp(e){return xa(e,"clientMetadata")}function rp(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}class np{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=n}static Ki(e,t){let r=Au(),n=Au();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new np(e,t.fromCache,r,n)}}class ip{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sp{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=z()?8:Vo.v(F())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,n){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,n,r).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const r=new ip;return this.Ji(e,t,r).next((n=>{if(i.result=n,this.Ui)return this.Yi(e,t,r,n.size)}))})).next((()=>i.result))}Yi(e,t,r,n){return r.documentReadCount<this.Wi?(Ys()<=re.DEBUG&&Xs("QueryEngine","SDK will not create cache indexes for query:",pu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),jo.resolve()):(Ys()<=re.DEBUG&&Xs("QueryEngine","Query:",pu(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.Gi*n?(Ys()<=re.DEBUG&&Xs("QueryEngine","The SDK decides to create cache indexes for query:",pu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,au(t))):jo.resolve())}ji(e,t){if(iu(t))return jo.resolve(null);let r=au(t);return this.indexManager.getIndexType(e,r).next((n=>0===n?null:(null!==t.limit&&1===n&&(t=lu(t,null,"F"),r=au(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((n=>{const i=Au(...n);return this.zi.getDocuments(e,i).next((n=>this.indexManager.getMinOffset(e,r).next((r=>{const s=this.Zi(t,n);return this.Xi(t,s,i,r.readTime)?this.ji(e,lu(t,null,"F")):this.es(e,s,t,r)}))))})))))}Hi(e,t,r,n){return iu(t)||n.isEqual(Co.min())?jo.resolve(null):this.zi.getDocuments(e,r).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n)?jo.resolve(null):(Ys()<=re.DEBUG&&Xs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),pu(t)),this.es(e,s,t,Do(n,-1)).next((e=>e)))}))}Zi(e,t){let r=new za(mu(e));return t.forEach(((t,n)=>{fu(e,n)&&(r=r.add(n))})),r}Xi(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Ji(e,t,r){return Ys()<=re.DEBUG&&Xs("QueryEngine","Using full collection scan to execute query:",pu(t)),this.zi.getDocumentsMatchingQuery(e,t,Mo.min(),r)}es(e,t,r,n){return this.zi.getDocumentsMatchingQuery(e,r,n).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class op{constructor(e,t,r,n){this.persistence=e,this.ts=t,this.serializer=n,this.ns=new Ma(yo),this.rs=new yu((e=>Qc(e)),Yc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function ap(e,t,r,n){return new op(e,t,r,n)}async function cp(e,t){const r=no(e);return await r.persistence.runTransaction("Handle user change","readonly",(e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next((i=>(n=i,r._s(t),r.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Au();for(const e of n){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return r.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function up(e){const t=no(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function lp(e,t,r){let n=Au(),i=Au();return r.forEach((e=>n=n.add(e))),t.getEntries(e,n).next((e=>{let n=Su();return r.forEach(((r,s)=>{const o=e.get(r);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(Co.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):Xs("LocalStore","Ignoring outdated watch update for ",r,". Current version:",o.version," Watch version:",s.version)})),{cs:n,ls:i}}))}function hp(e,t){const r=no(e);return r.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function dp(e,t){const r=no(e);return r.persistence.runTransaction("Allocate target","readwrite",(e=>{let n;return r.Qr.getTargetData(e,t).next((i=>i?(n=i,jo.resolve(n)):r.Qr.allocateTargetId(e).next((i=>(n=new fh(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.Qr.addTargetData(e,n).next((()=>n)))))))})).then((e=>{const n=r.ns.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.ns=r.ns.insert(e.targetId,e),r.rs.set(t,e.targetId)),e}))}async function pp(e,t,r){const n=no(e),i=n.ns.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,(e=>n.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ho(e))throw e;Xs("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}n.ns=n.ns.remove(t),n.rs.delete(i.target)}function fp(e,t,r){const n=no(e);let i=Co.min(),s=Au();return n.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,r){const n=no(e),i=n.rs.get(r);return void 0!==i?jo.resolve(n.ns.get(i)):n.Qr.getTargetData(t,r)}(n,e,au(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>n.ts.getDocumentsMatchingQuery(e,t,r?i:Co.min(),r?s:Au()))).next((e=>(vp(n,vu(t),e),{documents:e,hs:s})))))}function vp(e,t,r){let n=e.ss.get(t)||Co.min();r.forEach(((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)})),e.ss.set(t,n)}class mp{constructor(){this.activeTargetIds=xu()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gp{constructor(){this.no=new mp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new mp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yp{io(e){}shutdown(){}}class wp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Xs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Xs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sp=null;function bp(){return null===Sp?Sp=268435456+Math.round(2147483648*Math.random()):Sp++,"0x"+Sp.toString(16)}const Cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ip{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ep="WebChannelConnection";class Tp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(r,"/databases/").concat(n),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(n)}get wo(){return!1}So(e,t,r,n,i){const s=bp(),o=this.bo(e,t.toUriEncodedString());Xs("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,r);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,n,i),this.Co(e,o,a,r).then((t=>(Xs("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw $s("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",r),t}))}vo(e,t,r,n,i,s){return this.So(e,t,r,n,i)}Do(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Js,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,r)=>e[r]=t)),r&&r.headers.forEach(((t,r)=>e[r]=t))}bo(e,t){const r=Cp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(r)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,n){const i=bp();return new Promise(((s,o)=>{const a=new qs;a.setWithCredentials(!0),a.listenOnce(Bs.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case zs.NO_ERROR:const t=a.getResponseJson();Xs(Ep,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case zs.TIMEOUT:Xs(Ep,"RPC '".concat(e,"' ").concat(i," timed out")),o(new so(io.DEADLINE_EXCEEDED,"Request time out"));break;case zs.HTTP_ERROR:const r=a.getStatus();if(Xs(Ep,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",a.getResponseText()),r>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(io).indexOf(t)>=0?t:io.UNKNOWN}(t.status);o(new so(e,t.message))}else o(new so(io.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new so(io.UNAVAILABLE,"Connection failed."));break;default:to()}}finally{Xs(Ep,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(n);Xs(Ep,"RPC '".concat(e,"' ").concat(i," sending request:"),n),a.send(t,"POST",c,r,15)}))}Fo(e,t,r){const n=bp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ls(),o=Fs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;const u=i.join("");Xs(Ep,"Creating RPC '".concat(e,"' stream ").concat(n,": ").concat(u),a);const l=s.createWebChannel(u,a);let h=!1,d=!1;const p=new Ip({lo:t=>{d?Xs(Ep,"Not sending because RPC '".concat(e,"' stream ").concat(n," is closed:"),t):(h||(Xs(Ep,"Opening RPC '".concat(e,"' stream ").concat(n," transport.")),l.open(),h=!0),Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," sending:"),t),l.send(t))},ho:()=>l.close()}),f=(e,t,r)=>{e.listen(t,(e=>{try{r(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(l,Vs.EventType.OPEN,(()=>{d||Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," transport opened."))})),f(l,Vs.EventType.CLOSE,(()=>{d||(d=!0,Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," transport closed")),p.Vo())})),f(l,Vs.EventType.ERROR,(t=>{d||(d=!0,$s(Ep,"RPC '".concat(e,"' stream ").concat(n," transport errored:"),t),p.Vo(new so(io.UNAVAILABLE,"The operation could not be completed")))})),f(l,Vs.EventType.MESSAGE,(t=>{var r;if(!d){const i=t.data[0];ro(!!i);const s=i,o=s.error||(null===(r=s[0])||void 0===r?void 0:r.error);if(o){Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," received error:"),o);const t=o.status;let r=function(e){const t=fl[e];if(void 0!==t)return gl(t)}(t),i=o.message;void 0===r&&(r=io.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,p.Vo(new so(r,i)),l.close()}else Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," received:"),i),p.mo(i)}})),f(o,js.STAT_EVENT,(t=>{t.stat===Us.PROXY?Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," detected buffering proxy")):t.stat===Us.NOPROXY&&Xs(Ep,"RPC '".concat(e,"' stream ").concat(n," detected no buffering proxy"))})),setTimeout((()=>{p.Ro()}),0),p}}function Pp(){return"undefined"!=typeof window?window:null}function Rp(){return"undefined"!=typeof document?document:null}function _p(e){return new Fl(e,!0)}class Ap{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=r,this.xo=n,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),n=Math.max(0,t-r);n>0&&Xs("ExponentialBackoff","Backing off for ".concat(n," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,n,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class kp{constructor(e,t,r,n,i,s,o,a){this.oi=e,this.$o=r,this.Uo=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ap(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===io.RESOURCE_EXHAUSTED?(Zs(t.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===io.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[r,n]=e;this.Wo===t&&this.o_(r,n)}),(t=>{e((()=>{const e=new so(io.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{r((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{r((()=>this.__(e)))})),this.stream.onMessage((e=>{r((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Xs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Xs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xp extends kp{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:to()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ro(void 0===t||"string"==typeof t),qa.fromBase64String(t||"")):(ro(void 0===t||t instanceof Buffer||t instanceof Uint8Array),qa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?io.UNKNOWN:gl(e.code);return new so(t,e.message||"")}(o);r=new Al(n,i,s,a||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=Gl(e,n.document.name),s=Vl(n.document.updateTime),o=n.document.createTime?Vl(n.document.createTime):Co.min(),a=new Sc({mapValue:{fields:n.document.fields}}),c=Cc.newFoundDocument(i,s,o,a),u=n.targetIds||[],l=n.removedTargetIds||[];r=new Rl(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=Gl(e,n.document),s=n.readTime?Vl(n.readTime):Co.min(),o=Cc.newNoDocument(i,s),a=n.removedTargetIds||[];r=new Rl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=Gl(e,n.document),s=n.removedTargetIds||[];r=new Rl([],s,i,null)}else{if(!("filter"in t))return to();{t.filter;const e=t.filter;e.targetId;const{count:n=0,unchangedNames:i}=e,s=new pl(n,i),o=e.targetId;r=new _l(o,s)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return Co.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?Vl(t.readTime):Co.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=Yl(this.serializer),t.addTarget=function(e,t){let r;const n=t.target;if(r=Xc(n)?{documents:rh(e,n)}:{query:nh(e,n).ut},r.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=jl(e,t.resumeToken);const n=zl(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(Co.min())>0){r.readTime=Bl(e,t.snapshotVersion.toTimestamp());const n=zl(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);const r=function(e,t){const r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return to()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=Yl(this.serializer),t.removeTarget=e,this.t_(t)}}class Op extends kp{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(ro(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(ro(void 0!==t),e.map((e=>function(e,t){let r=e.updateTime?Vl(e.updateTime):Vl(t);return r.isEqual(Co.min())&&(r=Vl(t)),new Ju(r,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),r=Vl(e.commitTime);return this.listener.T_(r,t)}return ro(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Yl(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>eh(this.serializer,e)))};this.t_(t)}}class Dp extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.A_=!1}R_(){if(this.A_)throw new so(io.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,n){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Wl(t,r),n,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===io.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new so(io.UNKNOWN,e.toString())}))}vo(e,t,r,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Wl(t,r),n,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===io.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new so(io.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Np{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Zs(t),this.g_=!1):Xs("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Mp{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{r.enqueueAndForget((async()=>{Wp(this)&&(Xs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=no(e);t.v_.add(4),await Fp(t),t.x_.set("Unknown"),t.v_.delete(4),await Lp(t)}(this))}))})),this.x_=new Np(r,n)}}async function Lp(e){if(Wp(e))for(const t of e.F_)await t(!0)}async function Fp(e){for(const t of e.F_)await t(!1)}function zp(e,t){const r=no(e);r.C_.has(t.targetId)||(r.C_.set(t.targetId,t),qp(r)?Vp(r):uf(r).Jo()&&jp(r,t))}function Bp(e,t){const r=no(e),n=uf(r);r.C_.delete(t),n.Jo()&&Up(r,t),0===r.C_.size&&(n.Jo()?n.Xo():Wp(r)&&r.x_.set("Unknown"))}function jp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Co.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}uf(e).c_(t)}function Up(e,t){e.O_.Oe(t),uf(e).l_(t)}function Vp(e){e.O_=new xl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),uf(e).start(),e.x_.p_()}function qp(e){return Wp(e)&&!uf(e).Ho()&&e.C_.size>0}function Wp(e){return 0===no(e).v_.size}function Hp(e){e.O_=void 0}async function Kp(e){e.C_.forEach(((t,r)=>{jp(e,t)}))}async function Gp(e,t){Hp(e),qp(e)?(e.x_.S_(t),Vp(e)):e.x_.set("Unknown")}async function Jp(e,t,r){if(e.x_.set("Online"),t instanceof Al&&2===t.state&&t.cause)try{await async function(e,t){const r=t.cause;for(const n of t.targetIds)e.C_.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.C_.delete(n),e.O_.removeTarget(n))}(e,t)}catch(r){Xs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Qp(e,r)}else if(t instanceof Rl?e.O_.$e(t):t instanceof _l?e.O_.Je(t):e.O_.Ge(t),!r.isEqual(Co.min()))try{const t=await up(e.localStore);r.compareTo(t)>=0&&await function(e,t){const r=e.O_.it(t);return r.targetChanges.forEach(((r,n)=>{if(r.resumeToken.approximateByteSize()>0){const i=e.C_.get(n);i&&e.C_.set(n,i.withResumeToken(r.resumeToken,t))}})),r.targetMismatches.forEach(((t,r)=>{const n=e.C_.get(t);if(!n)return;e.C_.set(t,n.withResumeToken(qa.EMPTY_BYTE_STRING,n.snapshotVersion)),Up(e,t);const i=new fh(n.target,t,r,n.sequenceNumber);jp(e,i)})),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){Xs("RemoteStore","Failed to raise snapshot:",t),await Qp(e,t)}}async function Qp(e,t,r){if(!Ho(t))throw t;e.v_.add(1),await Fp(e),e.x_.set("Offline"),r||(r=()=>up(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Xs("RemoteStore","Retrying IndexedDB access"),await r(),e.v_.delete(1),await Lp(e)}))}function Yp(e,t){return t().catch((r=>Qp(e,r,t)))}async function Xp(e){const t=no(e),r=lf(t);let n=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Zp(t);)try{const e=await hp(t.localStore,n);if(null===e){0===t.D_.length&&r.Xo();break}n=e.batchId,$p(t,e)}catch(e){await Qp(t,e)}ef(t)&&tf(t)}function Zp(e){return Wp(e)&&e.D_.length<10}function $p(e,t){e.D_.push(t);const r=lf(e);r.Jo()&&r.P_&&r.I_(t.mutations)}function ef(e){return Wp(e)&&!lf(e).Ho()&&e.D_.length>0}function tf(e){lf(e).start()}async function rf(e){lf(e).d_()}async function nf(e){const t=lf(e);for(const r of e.D_)t.I_(r.mutations)}async function sf(e,t,r){const n=e.D_.shift(),i=hl.from(n,t,r);await Yp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Xp(e)}async function of(e,t){t&&lf(e).P_&&await async function(e,t){if(function(e){return ml(e)&&e!==io.ABORTED}(t.code)){const r=e.D_.shift();lf(e).Zo(),await Yp(e,(()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t))),await Xp(e)}}(e,t),ef(e)&&tf(e)}async function af(e,t){const r=no(e);r.asyncQueue.verifyOperationInProgress(),Xs("RemoteStore","RemoteStore received new credentials");const n=Wp(r);r.v_.add(3),await Fp(r),n&&r.x_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.v_.delete(3),await Lp(r)}async function cf(e,t){const r=no(e);t?(r.v_.delete(2),await Lp(r)):t||(r.v_.add(2),await Fp(r),r.x_.set("Unknown"))}function uf(e){return e.N_||(e.N_=function(e,t,r){const n=no(e);return n.R_(),new xp(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{Po:Kp.bind(null,e),To:Gp.bind(null,e),u_:Jp.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),qp(e)?Vp(e):e.x_.set("Unknown")):(await e.N_.stop(),Hp(e))}))),e.N_}function lf(e){return e.L_||(e.L_=function(e,t,r){const n=no(e);return n.R_(),new Op(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{Po:rf.bind(null,e),To:of.bind(null,e),E_:nf.bind(null,e),T_:sf.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Xp(e)):(await e.L_.stop(),e.D_.length>0&&(Xs("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class hf{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){const s=Date.now()+r,o=new hf(e,t,s,n,i);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new so(io.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(e,t){if(Zs("AsyncQueue","".concat(t,": ").concat(e)),Ho(e))return new so(io.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class pf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ro.comparator(t.key,r.key):(e,t)=>Ro.comparator(e.key,t.key),this.keyedMap=Cu(),this.sortedSet=new Ma(this.comparator)}static emptySet(e){return new pf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new pf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ff{constructor(){this.B_=new Ma(Ro.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):to():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class vf{constructor(e,t,r,n,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,n,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new vf(e,t,pf.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==r[n].type||!t[n].doc.isEqual(r[n].doc))return!1;return!0}}class mf{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class gf{constructor(){this.queries=new yu((e=>du(e)),hu),this.onlineState="Unknown",this.W_=new Set}}async function yf(e,t){const r=no(e);let n=3;const i=t.query;let s=r.queries.get(i);s?!s.K_()&&t.U_()&&(n=2):(s=new mf,n=t.U_()?0:1);try{switch(n){case 0:s.q_=await r.onListen(i,!0);break;case 1:s.q_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(e){const r=df(e,"Initialization of query '".concat(pu(t.query),"' failed"));return void t.onError(r)}r.queries.set(i,s),s.Q_.push(t),t.G_(r.onlineState),s.q_&&t.z_(s.q_)&&Cf(r)}async function wf(e,t){const r=no(e),n=t.query;let i=3;const s=r.queries.get(n);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Sf(e,t){const r=no(e);let n=!1;for(const i of t){const e=i.query,t=r.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(n=!0);t.q_=i}}n&&Cf(r)}function bf(e,t,r){const n=no(e),i=n.queries.get(t);if(i)for(const s of i.Q_)s.onError(r);n.queries.delete(t)}function Cf(e){e.W_.forEach((e=>{e.next()}))}var If,Ef;(Ef=If||(If={})).j_="default",Ef.Cache="cache";class Tf{constructor(e,t,r){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const r of e.docChanges)3!==r.type&&t.push(r);e=new vf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const r="Offline"!==t;return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=vf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==If.Cache}}class Pf{constructor(e){this.key=e}}class Rf{constructor(e){this.key=e}}class _f{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Au(),this.mutatedKeys=Au(),this.ha=mu(e),this.Pa=new pf(this.ha)}get Ia(){return this.ua}Ta(e,t){const r=t?t.Ea:new ff,n=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1;const a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,c="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal(((e,t)=>{const u=n.get(e),l=fu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let p=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(r.track({type:3,doc:l}),p=!0):this.da(u,l)||(r.track({type:2,doc:l}),p=!0,(a&&this.ha(l,a)>0||c&&this.ha(l,c)<0)&&(o=!0)):!u&&l?(r.track({type:0,doc:l}),p=!0):u&&!l&&(r.track({type:1,doc:u}),p=!0,(a||c)&&(o=!0)),p&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{Pa:s,Ea:r,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return to()}};return r(e)-r(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(r),n=null!=n&&n;const o=t&&!n?this.Ra():[],a=0===this.la.size&&this.current&&!n?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new vf(this.query,e.Pa,i,s,e.mutatedKeys,0===a,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new ff,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Au(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Rf(e))})),this.la.forEach((r=>{e.has(r)||t.push(new Pf(r))})),t}fa(e){this.ua=e.hs,this.la=Au();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return vf.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Af{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kf{constructor(e){this.key=e,this.pa=!1}}class xf{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new yu((e=>du(e)),hu),this.Sa=new Map,this.ba=new Set,this.Da=new Ma(Ro.comparator),this.Ca=new Map,this.va=new Ud,this.Fa={},this.Ma=new Map,this.xa=md.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Of(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=$f(e);let i;const s=n.wa.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await Nf(n,t,r,!0),i}async function Df(e,t){const r=$f(e);await Nf(r,t,!0,!1)}async function Nf(e,t,r,n){const i=await dp(e.localStore,au(t)),s=i.targetId,o=r?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return n&&(a=await Mf(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&r&&zp(e.remoteStore,i),a}async function Mf(e,t,r,n,i){e.Na=(t,r,n)=>async function(e,t,r,n){let i=t.view.Ta(r);i.Xi&&(i=await fp(e.localStore,t.query,!1).then((e=>{let{documents:r}=e;return t.view.Ta(r,i)})));const s=n&&n.targetChanges.get(t.targetId),o=n&&null!=n.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Gf(e,t.targetId,a.Va),a.snapshot}(e,t,r,n);const s=await fp(e.localStore,t,!0),o=new _f(t,s.hs),a=o.Ta(s.documents),c=Pl.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);Gf(e,r,u.Va);const l=new Af(t,r,o);return e.wa.set(t,l),e.Sa.has(r)?e.Sa.get(r).push(t):e.Sa.set(r,[t]),u.snapshot}async function Lf(e,t,r){const n=no(e),i=n.wa.get(t),s=n.Sa.get(i.targetId);if(s.length>1)return n.Sa.set(i.targetId,s.filter((e=>!hu(e,t)))),void n.wa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await pp(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Bp(n.remoteStore,i.targetId),Hf(n,i.targetId)})).catch(Bo)):(Hf(n,i.targetId),await pp(n.localStore,i.targetId,!0))}async function Ff(e,t){const r=no(e),n=r.wa.get(t),i=r.Sa.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Bp(r.remoteStore,n.targetId))}async function zf(e,t){const r=no(e);try{const e=await function(e,t){const r=no(e),n=t.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(r.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>r.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(qa.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(a,u),function(e,t,r){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}(c,u,s)&&o.push(r.Qr.updateTargetData(e,u))}));let a=Su(),c=Au();if(t.documentUpdates.forEach((n=>{t.resolvedLimboDocuments.has(n)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))})),o.push(lp(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!n.isEqual(Co.min())){const t=r.Qr.getLastRemoteSnapshotVersion(e).next((t=>r.Qr.setTargetsMetadata(e,e.currentSequenceNumber,n)));o.push(t)}return jo.waitFor(o).next((()=>s.apply(e))).next((()=>r.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(r.ns=i,e)))}(r.localStore,t);t.targetChanges.forEach(((e,t)=>{const n=r.Ca.get(t);n&&(ro(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.pa=!0:e.modifiedDocuments.size>0?ro(n.pa):e.removedDocuments.size>0&&(ro(n.pa),n.pa=!1))})),await Yf(r,e,t)}catch(e){await Bo(e)}}function Bf(e,t,r){const n=no(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){const e=[];n.wa.forEach(((r,n)=>{const i=n.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const r=no(e);r.onlineState=t;let n=!1;r.queries.forEach(((e,r)=>{for(const i of r.Q_)i.G_(t)&&(n=!0)})),n&&Cf(r)}(n.eventManager,t),e.length&&n.ya.u_(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function jf(e,t,r){const n=no(e);n.sharedClientState.updateQueryState(t,"rejected",r);const i=n.Ca.get(t),s=i&&i.key;if(s){let e=new Ma(Ro.comparator);e=e.insert(s,Cc.newNoDocument(s,Co.min()));const r=Au().add(s),i=new Tl(Co.min(),new Map,new Ma(yo),e,r);await zf(n,i),n.Da=n.Da.remove(s),n.Ca.delete(t),Qf(n)}else await pp(n.localStore,t,!1).then((()=>Hf(n,t,r))).catch(Bo)}async function Uf(e,t){const r=no(e),n=t.batch.batchId;try{const e=await function(e,t){const r=no(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const n=t.batch.keys(),i=r.os.newChangeBuffer({trackRemovals:!0});return function(e,t,r,n){const i=r.batch,s=i.keys();let o=jo.resolve();return s.forEach((e=>{o=o.next((()=>n.getEntry(t,e))).next((t=>{const s=r.docVersions.get(e);ro(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(r,e,t,i).next((()=>i.apply(e))).next((()=>r.mutationQueue.performConsistencyCheck(e))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Au();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t)))).next((()=>r.localDocuments.getDocuments(e,n)))}))}(r.localStore,t);Wf(r,n,null),qf(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Yf(r,e)}catch(e){await Bo(e)}}async function Vf(e,t,r){const n=no(e);try{const e=await function(e,t){const r=no(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next((t=>(ro(null!==t),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)))).next((()=>r.mutationQueue.performConsistencyCheck(e))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n))).next((()=>r.localDocuments.getDocuments(e,n)))}))}(n.localStore,t);Wf(n,t,r),qf(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Yf(n,e)}catch(r){await Bo(r)}}function qf(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function Wf(e,t,r){const n=no(e);let i=n.Fa[n.currentUser.toKey()];if(i){const e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.Fa[n.currentUser.toKey()]=i}}function Hf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Sa.get(t))e.wa.delete(n),r&&e.ya.La(n,r);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||Kf(e,t)}))}function Kf(e,t){e.ba.delete(t.path.canonicalString());const r=e.Da.get(t);null!==r&&(Bp(e.remoteStore,r),e.Da=e.Da.remove(t),e.Ca.delete(r),Qf(e))}function Gf(e,t,r){for(const n of r)n instanceof Pf?(e.va.addReference(n.key,t),Jf(e,n)):n instanceof Rf?(Xs("SyncEngine","Document no longer in limbo: "+n.key),e.va.removeReference(n.key,t),e.va.containsKey(n.key)||Kf(e,n.key)):to()}function Jf(e,t){const r=t.key,n=r.path.canonicalString();e.Da.get(r)||e.ba.has(n)||(Xs("SyncEngine","New document in limbo: "+r),e.ba.add(n),Qf(e))}function Qf(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const r=new Ro(Eo.fromString(t)),n=e.xa.next();e.Ca.set(n,new kf(r)),e.Da=e.Da.insert(r,n),zp(e.remoteStore,new fh(au(nu(r.path)),n,"TargetPurposeLimboResolution",Zo._e))}}async function Yf(e,t,r){const n=no(e),i=[],s=[],o=[];n.wa.isEmpty()||(n.wa.forEach(((e,a)=>{o.push(n.Na(a,t,r).then((e=>{if((e||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=np.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),n.ya.u_(i),await async function(e,t){const r=no(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>jo.forEach(t,(t=>jo.forEach(t.qi,(n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n))).next((()=>jo.forEach(t.Qi,(n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))))))}catch(e){if(!Ho(e))throw e;Xs("LocalStore","Failed to update sequence numbers: "+e)}for(const n of t){const e=n.targetId;if(!n.fromCache){const t=r.ns.get(e),n=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(n);r.ns=r.ns.insert(e,i)}}}(n.localStore,s))}async function Xf(e,t){const r=no(e);if(!r.currentUser.isEqual(t)){Xs("SyncEngine","User change. New user:",t.toKey());const e=await cp(r.localStore,t);r.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new so(io.CANCELLED,t))}))})),e.Ma.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Yf(r,e.us)}}function Zf(e,t){const r=no(e),n=r.Ca.get(t);if(n&&n.pa)return Au().add(n.key);{let e=Au();const n=r.Sa.get(t);if(!n)return e;for(const t of n){const n=r.wa.get(t);e=e.unionWith(n.view.Ia)}return e}}function $f(e){const t=no(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jf.bind(null,t),t.ya.u_=Sf.bind(null,t.eventManager),t.ya.La=bf.bind(null,t.eventManager),t}function ev(e){const t=no(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Uf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vf.bind(null,t),t}class tv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ap(this.persistence,new sp,e.initialUser,this.serializer)}createPersistence(e){return new Gd(Qd.Hr,this.serializer)}createSharedClientState(e){return new gp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rv extends tv{constructor(e,t,r){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await ev(this.ka.syncEngine),await Xp(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return ap(this.persistence,new sp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Id(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Xo(t,this.persistence);return new Yo(e.asyncQueue,r)}createPersistence(e){const t=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cd.withCacheSize(this.cacheSizeBytes):cd.DEFAULT;return new $d(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Pp(),Rp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gp}}class nv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xf.bind(null,this.syncEngine),await cf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gf}createDatastore(e){const t=_p(e.databaseInfo.databaseId),r=function(e){return new Tp(e)}(e.databaseInfo);return function(e,t,r,n){return new Dp(e,t,r,n)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(e,t,r,n,i){return new Mp(e,t,r,n,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Bf(this.syncEngine,e,0)),wp.D()?new wp:new yp)}createSyncEngine(e,t){return function(e,t,r,n,i,s,o){const a=new xf(e,t,r,n,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=no(e);Xs("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Fp(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class sv{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=Gs.UNAUTHENTICATED,this.clientId=go.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,(async e=>{Xs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(r,(e=>(Xs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new so(io.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=df(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ov(e,t){e.asyncQueue.verifyOperationInProgress(),Xs("FirestoreClient","Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener((async e=>{n.isEqual(e)||(await cp(t.localStore,e),n=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function av(e,t){e.asyncQueue.verifyOperationInProgress();const r=await uv(e);Xs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener((e=>af(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,r)=>af(t.remoteStore,r))),e._onlineComponents=t}function cv(e){return"FirebaseError"===e.name?e.code===io.FAILED_PRECONDITION||e.code===io.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function uv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Xs("FirestoreClient","Using user provided OfflineComponentProvider");try{await ov(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!cv(r))throw r;$s("Error using user provided cache. Falling back to memory cache: "+r),await ov(e,new tv)}}else Xs("FirestoreClient","Using default OfflineComponentProvider"),await ov(e,new tv);return e._offlineComponents}async function lv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Xs("FirestoreClient","Using user provided OnlineComponentProvider"),await av(e,e._uninitializedComponentsProvider._online)):(Xs("FirestoreClient","Using default OnlineComponentProvider"),await av(e,new nv))),e._onlineComponents}function hv(e){return lv(e).then((e=>e.syncEngine))}async function dv(e){const t=await lv(e),r=t.eventManager;return r.onListen=Of.bind(null,t.syncEngine),r.onUnlisten=Lf.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Df.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Ff.bind(null,t.syncEngine),r}function pv(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new oo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,r,n,i){const s=new iv({next:r=>{t.enqueueAndForget((()=>wf(e,o))),r.fromCache&&"server"===n.source?i.reject(new so(io.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),o=new Tf(r,s,{includeMetadataChanges:!0,ta:!0});return yf(e,o)}(await dv(e),e.asyncQueue,t,r,n))),n.promise}function fv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const vv=new Map;function mv(e,t,r){if(!r)throw new so(io.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gv(e){if(!Ro.isDocumentKey(e))throw new so(io.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yv(e){if(Ro.isDocumentKey(e))throw new so(io.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":to()}function Sv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new so(io.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=wv(e);throw new so(io.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(r))}}return e}function bv(e,t){if(t<=0)throw new so(io.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Cv{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new so(io.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new so(io.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new so(io.INVALID_ARGUMENT,"".concat(e," and ").concat(r," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fv(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new so(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new so(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new so(io.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iv{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new so(io.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new so(io.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new co;switch(e.type){case"firstParty":return new po(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new so(io.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vv.get(e);t&&(Xs("ComponentProvider","Removing Datastore"),vv.delete(e),t.terminate())}(this),Promise.resolve()}}function Ev(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Sv(e,Iv))._getSettings(),o="".concat(t,":").concat(r);if("firestore.googleapis.com"!==s.host&&s.host!==o&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=Gs.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[A(JSON.stringify({alg:"none",type:"JWT"})),A(JSON.stringify(s)),""].join(".")}(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new so(io.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new Gs(s)}e._authCredentials=new uo(new ao(t,r))}}class Tv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Tv(this.firestore,e,this._query)}}class Pv{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pv(this.firestore,e,this._key)}}class Rv extends Tv{constructor(e,t,r){super(e,t,nu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pv(this.firestore,null,new Ro(e))}withConverter(e){return new Rv(this.firestore,e,this._path)}}function _v(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(e=Y(e),mv("collection","path",t),e instanceof Iv){const r=Eo.fromString(t,...n);return yv(r),new Rv(e,null,r)}{if(!(e instanceof Pv||e instanceof Rv))throw new so(io.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Eo.fromString(t,...n));return yv(r),new Rv(e.firestore,null,r)}}function Av(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(e=Y(e),1===arguments.length&&(t=go.newId()),mv("doc","path",t),e instanceof Iv){const r=Eo.fromString(t,...n);return gv(r),new Pv(e,null,new Ro(r))}{if(!(e instanceof Pv||e instanceof Rv))throw new so(io.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Eo.fromString(t,...n));return gv(r),new Pv(e.firestore,e instanceof Rv?e.converter:null,new Ro(r))}}class kv{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Ap(this,"async_queue_retry"),this.cu=()=>{const e=Rp();e&&Xs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Rp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=Rp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new oo;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(nA){if(!Ho(nA))throw nA;Xs("AsyncQueue","Operation failed with retryable error: "+nA)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Zs("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,r){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const n=hf.createAndSchedule(this,e,t,r,(e=>this.Iu(e)));return this.su.push(n),n}lu(){this.ou&&to()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function xv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const n of t)if(n in r&&"function"==typeof r[n])return!0;return!1}(e,["next","error","complete"])}class Ov extends Iv{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new kv,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nv(this),this._firestoreClient.terminate()}}function Dv(e){return e._firestoreClient||Nv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nv(e){var t,r,n;const i=e._freezeSettings(),s=function(e,t,r,n){return new Xa(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,fv(n.experimentalLongPollingOptions),n.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new sv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(r=i.localCache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=i.localCache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Mv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mv(qa.fromBase64String(e))}catch(e){throw new so(io.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Mv(qa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lv{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let n=0;n<t.length;++n)if(0===t[n].length)throw new so(io.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Po(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fv{constructor(e){this._methodName=e}}class zv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new so(io.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new so(io.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yo(this._lat,e._lat)||yo(this._long,e._long)}}const Bv=/^__.*__$/;class jv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new il(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}}class Uv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw to()}}class qv{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new qv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.mu({path:r,gu:!1});return n.pu(e),n}yu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.mu({path:r,gu:!1});return n.Ru(),n}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return im(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Vv(this.Vu)&&Bv.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Wv{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_p(e)}Cu(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qv({Vu:e,methodName:t,Du:r,path:Po.emptyPath(),gu:!1,bu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hv(e){const t=e._freezeSettings(),r=_p(e._databaseId);return new Wv(e._databaseId,!!t.ignoreUndefinedProperties,r)}function Kv(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,r,i);em("Data must be an object, but it was:",o,n);const a=Zv(n,o);let c,u;if(s.merge)c=new Ua(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const n of s.mergeFields){const i=tm(t,n,r);if(!o.contains(i))throw new so(io.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));sm(e,i)||e.push(i)}c=new Ua(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new jv(new Sc(a),c,u)}class Gv extends Fv{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gv}}function Jv(e,t,r,n){const i=e.Cu(1,t,r);em("Data must be an object, but it was:",i,n);const s=[],o=Sc.empty();Da(n,((e,n)=>{const a=nm(t,e,r);n=Y(n);const c=i.yu(a);if(n instanceof Gv)s.push(a);else{const e=Xv(n,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ua(s);return new Uv(o,a,i.fieldTransforms)}function Qv(e,t,r,n,i,s){const o=e.Cu(1,t,r),a=[tm(t,n,r)],c=[i];if(s.length%2!=0)throw new so(io.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(tm(t,s[d])),c.push(s[d+1]);const u=[],l=Sc.empty();for(let d=a.length-1;d>=0;--d)if(!sm(u,a[d])){const e=a[d];let t=c[d];t=Y(t);const r=o.yu(e);if(t instanceof Gv)u.push(e);else{const n=Xv(t,r);null!=n&&(u.push(e),l.set(e,n))}}const h=new Ua(u);return new Uv(l,h,o.fieldTransforms)}function Yv(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Xv(r,e.Cu(n?4:3,t))}function Xv(e,t){if($v(e=Y(e)))return em("Unsupported field value:",t,e),Zv(e,t);if(e instanceof Fv)return function(e,t){if(!Vv(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const r=[];let n=0;for(const i of e){let e=Xv(i,t.wu(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=bo.fromDate(e);return{timestampValue:Bl(t.serializer,r)}}if(e instanceof bo){const r=new bo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bl(t.serializer,r)}}if(e instanceof zv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mv)return{bytesValue:jl(t.serializer,e._byteString)};if(e instanceof Pv){const r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.Su("Document reference is for database ".concat(n.projectId,"/").concat(n.database," but should be for database ").concat(r.projectId,"/").concat(r.database));return{referenceValue:ql(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(wv(e)))}(e,t)}function Zv(e,t){const r={};return Na(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Da(e,((e,n)=>{const i=Xv(n,t.fu(e));null!=i&&(r[e]=i)})),{mapValue:{fields:r}}}function $v(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof bo||e instanceof zv||e instanceof Mv||e instanceof Pv||e instanceof Fv)}function em(e,t,r){if(!$v(r)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(r)){const n=wv(r);throw"an object"===n?t.Su(e+" a custom object"):t.Su(e+" "+n)}}function tm(e,t,r){if((t=Y(t))instanceof Lv)return t._internalPath;if("string"==typeof t)return nm(e,t);throw im("Field path arguments must be of type string or ",e,!1,void 0,r)}const rm=new RegExp("[~\\*/\\[\\]]");function nm(e,t,r){if(t.search(rm)>=0)throw im("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,r);try{return new Lv(...t.split("."))._internalPath}catch(Bt){throw im("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,r)}}function im(e,t,r,n,i){const s=n&&!n.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");r&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(n)),o&&(c+=" in document ".concat(i)),c+=")"),new so(io.INVALID_ARGUMENT,a+e+c)}function sm(e,t){return e.some((e=>e.isEqual(t)))}class om{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new am(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class am extends om{data(){return super.data()}}function cm(e,t){return"string"==typeof t?nm(e,t):t instanceof Lv?t._internalPath:t._delegate._internalPath}function um(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new so(io.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class hm extends lm{}function dm(e,t){let r=[];for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];t instanceof lm&&r.push(t),r=r.concat(i),function(e){const t=e.filter((e=>e instanceof vm)).length,r=e.filter((e=>e instanceof pm)).length;if(t>1||t>0&&r>0)throw new so(io.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)e=o._apply(e);return e}class pm extends hm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pm(e,t,r)}_apply(e){const t=this._parse(e);return Tm(e._query,t),new Tv(e.firestore,e.converter,uu(e._query,t))}_parse(e){const t=Hv(e.firestore),r=function(e,t,r,n,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new so(io.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Em(o,s);const t=[];for(const r of o)t.push(Im(n,e,r));a={arrayValue:{values:t}}}else a=Im(n,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Em(o,s),a=Yv(r,t,o,"in"===s||"not-in"===s);return Ac.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return r}}function fm(e,t,r){const n=t,i=cm("where",e);return pm._create(i,n,r)}class vm extends lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vm(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:kc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;const n=t.getFlattenedFilters();for(const i of n)Tm(r,i),r=uu(r,i)}(e._query,t),new Tv(e.firestore,e.converter,uu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mm extends hm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mm(e,t)}_apply(e){const t=function(e,t,r){if(null!==e.startAt)throw new so(io.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new so(io.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(t,r)}(e._query,this._field,this._direction);return new Tv(e.firestore,e.converter,function(e,t){const r=e.explicitOrderBy.concat([t]);return new tu(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function gm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=cm("orderBy",e);return mm._create(r,t)}class ym extends hm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ym(e,t,r)}_apply(e){return new Tv(e.firestore,e.converter,lu(e._query,this._limit,this._limitType))}}function wm(e){return bv("limit",e),ym._create("limit",e,"F")}class Sm extends hm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Sm(e,t,r)}_apply(e){const t=Cm(e,this.type,this._docOrFields,this._inclusive);return new Tv(e.firestore,e.converter,function(e,t){return new tu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function bm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Sm._create("startAfter",t,!1)}function Cm(e,t,r,n){if(r[0]=Y(r[0]),r[0]instanceof om)return function(e,t,r,n,i){if(!n)throw new so(io.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(r,"()."));const s=[];for(const o of ou(e))if(o.field.isKeyField())s.push(cc(t,n.key));else{const e=n.data.field(o.field);if(Ja(e))throw new so(io.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new so(io.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Ic(s,i)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const i=Hv(e.firestore);return function(e,t,r,n,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new so(io.INVALID_ARGUMENT,"Too many arguments provided to ".concat(n,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new so(io.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(n,"(), but got a ").concat(typeof s));if(!su(e)&&-1!==s.indexOf("/"))throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(n,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const r=e.path.child(Eo.fromString(s));if(!Ro.isDocumentKey(r))throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(n,"() must result in a valid document path, but '").concat(r,"' is not because it contains an odd number of segments."));const i=new Ro(r);a.push(cc(t,i))}else{const e=Yv(r,n,s);a.push(e)}}return new Ic(a,s)}(e._query,e.firestore._databaseId,i,t,r,n)}}function Im(e,t,r){if("string"==typeof(r=Y(r))){if(""===r)throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!su(t)&&-1!==r.indexOf("/"))throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(r,"' contains a '/' character."));const n=t.path.child(Eo.fromString(r));if(!Ro.isDocumentKey(n))throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(n,"' is not because it has an odd number of segments (").concat(n.length,")."));return cc(e,new Ro(n))}if(r instanceof Pv)return cc(e,r._key);throw new so(io.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wv(r),"."))}function Em(e,t){if(!Array.isArray(e)||0===e.length)throw new so(io.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Tm(e,t){const r=function(e,t){for(const r of e)for(const e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new so(io.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new so(io.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(r.toString(),"' filters."))}class Pm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ka(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw to()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const r={};return Da(e,((e,n)=>{r[e]=this.convertValue(n,t)})),r}convertGeoPoint(e){return new zv(Ka(e.latitude),Ka(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Qa(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ya(e));default:return null}}convertTimestamp(e){const t=Ha(e);return new bo(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Eo.fromString(e);ro(ph(r));const n=new Za(r.get(1),r.get(3)),i=new Ro(r.popFirst(5));return n.isEqual(t)||Zs("Document ".concat(i," contains a document reference within a different database (").concat(n.projectId,"/").concat(n.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Rm(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class _m{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Am extends om{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const r=this._document.data.field(cm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class km extends Am{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xm{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new _m(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new km(this._firestore,this._userDataWriter,r.key,r,new _m(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new so(io.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((r=>{const n=new km(e._firestore,e._userDataWriter,r.doc.key,r.doc,new _m(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}}))}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const n=new km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _m(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(r=r.add(t.doc),s=r.indexOf(t.doc.key)),{type:Om(t.type),doc:n,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Om(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return to()}}class Dm extends Pm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pv(this.firestore,null,t)}}function Nm(e){e=Sv(e,Tv);const t=Sv(e.firestore,Ov),r=Dv(t),n=new Dm(t);return um(e._query),pv(r,e._query).then((r=>new xm(t,n,e,r)))}function Mm(e,t,r){e=Sv(e,Pv);const n=Sv(e.firestore,Ov),i=Hv(n);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=Y(t))||t instanceof Lv?Qv(i,"updateDoc",e._key,t,r,a):Jv(i,"updateDoc",e._key,t),Fm(n,[s.toMutation(e._key,Qu.exists(!0))])}function Lm(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i,s,o;e=Y(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof r[c]||xv(r[c])||(a=r[c],c++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(xv(r[c])){const e=r[c];r[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),r[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),r[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let l,h,d;if(e instanceof Pv)h=Sv(e.firestore,Ov),d=nu(e._key.path),l={next:t=>{r[c]&&r[c](zm(h,e,t))},error:r[c+1],complete:r[c+2]};else{const t=Sv(e,Tv);h=Sv(t.firestore,Ov),d=t._query;const n=new Dm(h);l={next:e=>{r[c]&&r[c](new xm(h,n,t,e))},error:r[c+1],complete:r[c+2]},um(e._query)}return function(e,t,r,n){const i=new iv(n),s=new Tf(t,i,r);return e.asyncQueue.enqueueAndForget((async()=>yf(await dv(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>wf(await dv(e),s)))}}(Dv(h),d,u,l)}function Fm(e,t){return function(e,t){const r=new oo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,r){const n=ev(e);try{const e=await function(e,t){const r=no(e),n=bo.now(),i=t.reduce(((e,t)=>e.add(t.key)),Au());let s,o;return r.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Su(),c=Au();return r.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>r.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=tl(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new il(e.key,t,bc(t.value.mapValue),Qu.exists(!0)))}return r.mutationQueue.addMutationBatch(e,n,o,t)})).next((t=>{o=t;const n=t.applyToLocalDocumentSet(s,c);return r.documentOverlayCache.saveOverlays(e,t.batchId,n)}))})).then((()=>({batchId:o.batchId,changes:Iu(s)})))}(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),function(e,t,r){let n=e.Fa[e.currentUser.toKey()];n||(n=new Ma(yo)),n=n.insert(t,r),e.Fa[e.currentUser.toKey()]=n}(n,e.batchId,r),await Yf(n,e.changes),await Xp(n.remoteStore)}catch(e){const t=df(e,"Failed to persist write");r.reject(t)}}(await hv(e),t,r))),r.promise}(Dv(e),t)}function zm(e,t,r){const n=r.docs.get(t._key),i=new Dm(e);return new Am(e,i,t._key,n,new _m(r.hasPendingWrites,r.fromCache),t.converter)}class Bm{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=function(e){return new jm(null==e?void 0:e.forceOwnership)}(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class jm{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new nv,this._offlineComponentProvider=new rv(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Js=e}(lt),st(new X("firestore",((e,r)=>{let{instanceIdentifier:n,options:i}=r;const s=e.getProvider("app").getImmediate(),o=new Ov(new lo(e.getProvider("auth-internal")),new vo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new so(io.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(e.options.projectId,t)}(s,n),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),pt(Ks,"4.6.0",e),pt(Ks,"4.6.0","esm2017")}();function Um(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Vm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qm=Vm,Wm=new U("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Hm=new ae("@firebase/auth");function Km(e){if(Hm.logLevel<=re.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Hm.error("Auth (".concat(lt,"): ").concat(e),...r)}}function Gm(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Zm(e,...r)}function Jm(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Zm(e,...r)}function Qm(e,t,r){const n=Object.assign(Object.assign({},qm()),{[t]:r});return new U("auth","Firebase",n).create(t,{appName:e.name})}function Ym(e){return Qm(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(e,t,r){if(!(t instanceof r))throw r.name!==t.constructor.name&&Gm(e,"argument-error"),Qm(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Zm(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("string"!==typeof e){const t=r[0],n=[...r.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(t,...n)}return Wm.create(e,...r)}function $m(e,t){if(!e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];throw Zm(t,...n)}}function eg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Km(t),new Error(t)}function tg(e,t){e||eg(t)}function rg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ng(){return"http:"===ig()||"https:"===ig()}function ig(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function sg(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ng()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class og{constructor(e,t){this.shortDelay=e,this.longDelay=t,tg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return sg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ag(e,t){tg(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?"".concat(r).concat(t.startsWith("/")?t.slice(1):t):r}class cg{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void eg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void eg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void eg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ug={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lg=new og(3e4,6e4);function hg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function dg(e,t,r,n){return pg(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};n&&("GET"===t?s=n:i={body:JSON.stringify(n)});const o=H(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),cg.fetch()(vg(e,e.config.apiHost,r,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function pg(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},ug),t);try{const t=new gg(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw yg(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[r,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw yg(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===r)throw yg(e,"email-already-in-use",s);if("USER_DISABLED"===r)throw yg(e,"user-disabled",s);const a=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qm(e,a,o);Gm(e,a)}}catch(nA){if(nA instanceof j)throw nA;Gm(e,"network-request-failed",{message:String(nA)})}}async function fg(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await dg(e,t,r,n,i);return"mfaPendingCredential"in s&&Gm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function vg(e,t,r,n){const i="".concat(t).concat(r,"?").concat(n);return e.config.emulator?ag(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function mg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gg{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Jm(this.auth,"network-request-failed"))),lg.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function yg(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Jm(e,t,n);return i.customData._tokenResponse=r,i}function wg(e){return void 0!==e&&void 0!==e.enterprise}class Sg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mg(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function bg(e,t){return dg(e,"GET","/v2/recaptchaConfig",hg(e,t))}async function Cg(e,t){return dg(e,"POST","/v1/accounts:lookup",t)}function Ig(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(nA){}}function Eg(e){return 1e3*Number(e)}function Tg(e){const[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return Km("JWT malformed, contained fewer than 3 sections"),null;try{const e=k(r);return e?JSON.parse(e):(Km("Failed to decode base64 JWT payload"),null)}catch(nA){return Km("Caught error parsing JWT payload as JSON",null===nA||void 0===nA?void 0:nA.toString()),null}}function Pg(e){const t=Tg(e);return $m(t,"internal-error"),$m("undefined"!==typeof t.exp,"internal-error"),$m("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Rg(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(nA){throw nA instanceof j&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(nA)&&e.auth.currentUser===e&&await e.auth.signOut(),nA}}class _g{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(nA){return void((null===nA||void 0===nA?void 0:nA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ag{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ig(this.lastLoginAt),this.creationTime=Ig(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kg(e){var t;const r=e.auth,n=await e.getIdToken(),i=await Rg(e,Cg(r,{idToken:n}));$m(null===i||void 0===i?void 0:i.users.length,r,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?xg(s.providerUserInfo):[],a=(c=e.providerData,u=o,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const l=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!l&&h,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ag(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function xg(e){return e.map((e=>{var{providerId:t}=e,r=Um(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}))}class Og{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$m(e.idToken,"internal-error"),$m("undefined"!==typeof e.idToken,"internal-error"),$m("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Pg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$m(0!==e.length,"internal-error");const t=Pg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?($m(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:i}=await async function(e,t){const r=await pg(e,{},(async()=>{const r=H({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,s=vg(e,n,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",cg.fetch()(s,{method:"POST",headers:o,body:r})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new Og;return r&&($m("string"===typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&($m("string"===typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&($m("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Og,this.toJSON())}_performRefresh(){return eg("not implemented")}}function Dg(e,t){$m("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ng{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _g(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ag(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Rg(this,this.stsTokenManager.getToken(this.auth,e));return $m(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Y(e),n=await r.getIdToken(t),i=Tg(n);$m(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Ig(Eg(i.auth_time)),issuedAtTime:Ig(Eg(i.iat)),expirationTime:Ig(Eg(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Y(e);await kg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&($m(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ng(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$m(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(at(this.auth.app))return Promise.reject(Ym(this.auth));const e=await this.getIdToken();return await Rg(this,async function(e,t){return dg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,o,a,c,u;const l=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(n=t.email)&&void 0!==n?n:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,v=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,g=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:S,providerData:b,stsTokenManager:C}=t;$m(y&&C,e,"internal-error");const I=Og.fromJSON(this.name,C);$m("string"===typeof y,e,"internal-error"),Dg(l,e.name),Dg(h,e.name),$m("boolean"===typeof w,e,"internal-error"),$m("boolean"===typeof S,e,"internal-error"),Dg(d,e.name),Dg(p,e.name),Dg(f,e.name),Dg(v,e.name),Dg(m,e.name),Dg(g,e.name);const E=new Ng({uid:y,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:S,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((e=>Object.assign({},e)))),v&&(E._redirectEventId=v),E}static async _fromIdTokenResponse(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new Og;n.updateFromServerResponse(t);const i=new Ng({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await kg(i),i}static async _fromGetAccountInfoResponse(e,t,r){const n=t.users[0];$m(void 0!==n.localId,"internal-error");const i=void 0!==n.providerUserInfo?xg(n.providerUserInfo):[],s=!(n.email&&n.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Og;o.updateFromIdToken(r);const a=new Ng({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new Ag(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Mg=new Map;function Lg(e){tg(e instanceof Function,"Expected a class definition");let t=Mg.get(e);return t?(tg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mg.set(e,t),t)}class Fg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fg.type="NONE";const zg=Fg;function Bg(e,t,r){return"firebase".concat(":",e,":").concat(t,":").concat(r)}class jg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=Bg(this.userKey,n.apiKey,i),this.fullPersistenceKey=Bg("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ng._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new jg(Lg(zg),e,r);const n=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=n[0]||Lg(zg);const s=Bg(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const r=Ng._fromJSON(e,t);u!==i&&(o=r),i=u;break}}catch(c){}const a=n.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new jg(i,e,r)):new jg(i,e,r)}}function Ug(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gg(t))return"Blackberry";if(Jg(t))return"Webos";if(qg(t))return"Safari";if((t.includes("chrome/")||Wg(t))&&!t.includes("edge/"))return"Chrome";if(Kg(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null===r||void 0===r?void 0:r.length))return r[1]}return"Other"}function Vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/firefox\//i.test(e)}function qg(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:F()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/crios\//i.test(e)}function Hg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iemobile/i.test(e)}function Kg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/android/i.test(e)}function Gg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/blackberry/i.test(e)}function Jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/webos/i.test(e)}function Qg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yg(){return function(){const e=F();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Xg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F();return Qg(e)||Kg(e)||Jg(e)||Gg(e)||/windows phone/i.test(e)||Hg(e)}function Zg(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ug(F());break;case"Worker":t="".concat(Ug(F()),"-").concat(e);break;default:t=e}const n=r.length?r.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(lt,"/").concat(n)}class $g{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise(((r,n)=>{try{r(e(t))}catch(nA){n(nA)}}));r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(nA){t.reverse();for(const n of t)try{n()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===nA||void 0===nA?void 0:nA.message})}}}class ey{constructor(e){var t,r,n,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(r=a.meetsMaxPasswordLength)||void 0===r||r),a.isValid&&(a.isValid=null===(n=a.containsLowercaseLetter)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ty{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new $g(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lg(t)),this._initializationPromise=this.queue((async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await jg.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(nA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Cg(this,{idToken:e}),r=await Ng._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(at(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===n||void 0===n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(e);r&&r!==s||!(null===o||void 0===o?void 0:o.user)||(n=o.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(nA){n=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(nA)))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $m(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(nA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kg(e)}catch(nA){if((null===nA||void 0===nA?void 0:nA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(at(this.app))return Promise.reject(Ym(this));const t=e?Y(e):null;return t&&$m(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&$m(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return at(this.app)?Promise.reject(Ym(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return at(this.app)?Promise.reject(Ym(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Lg(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return dg(e,"GET","/v2/passwordPolicy",hg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ey(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new U("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged((()=>{r(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return dg(e,"POST","/v2/accounts:revokeToken",hg(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lg(e)||this._popupRedirectResolver;$m(t,this,"argument-error"),this.redirectPersistenceManager=await jg.create(this,[Lg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($m(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,r,n);return()=>{s=!0,i()}}{const r=e.addObserver(t);return()=>{s=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $m(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Hm.logLevel<=re.WARN){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Hm.warn("Auth (".concat(lt,"): ").concat(e),...r)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ry(e){return Y(e)}class ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const r=new J(e,t);return r.subscribe.bind(r)}((e=>this.observer=e))}get next(){return $m(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let iy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sy(e){return iy.loadJS(e)}function oy(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ay{constructor(e){this.type="recaptcha-enterprise",this.auth=ry(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(t,r,n){const i=window.grecaptcha;wg(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{r(e)})).catch((()=>{r("NO_RECAPTCHA")}))})):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,n)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,r)=>{bg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((n=>{if(void 0!==n.recaptchaKey){const r=new Sg(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{r(e)}))}))})(this.auth).then((i=>{if(!t&&wg(window.grecaptcha))r(i,e,n);else{if("undefined"===typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));let t=iy.recaptchaEnterpriseScript;0!==t.length&&(t+=i),sy(t).then((()=>{r(i,e,n)})).catch((e=>{n(e)}))}})).catch((e=>{n(e)}))}))}}async function cy(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ay(e);let s;try{s=await i.verify(r)}catch(a){s=await i.verify(r,!0)}const o=Object.assign({},t);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function uy(e,t,r,n){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await cy(e,t,r,"getOobCode"===r);return n(e,i)}return n(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await cy(e,t,r,"getOobCode"===r);return n(e,i)}return Promise.reject(i)}))}function ly(e,t,r){const n=ry(e);$m(n._canInitEmulator,n,"emulator-config-failed"),$m(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!!(null===r||void 0===r?void 0:r.disableWarnings),s=hy(t),{host:o,port:a}=function(e){const t=hy(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const e=i[1];return{host:e,port:dy(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:dy(t)}}}(t),c=null===a?"":":".concat(a);n.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hy(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function dy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class py{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return eg("not implemented")}_getIdTokenResponse(e){return eg("not implemented")}_linkToIdToken(e,t){return eg("not implemented")}_getReauthenticationResolver(e){return eg("not implemented")}}async function fy(e,t){return dg(e,"POST","/v1/accounts:signUp",t)}async function vy(e,t){return fg(e,"POST","/v1/accounts:signInWithPassword",hg(e,t))}async function my(e,t){return dg(e,"POST","/v1/accounts:sendOobCode",hg(e,t))}async function gy(e,t){return my(e,t)}class yy extends py{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new yy(e,t,"password")}static _fromEmailAndCode(e,t){return new yy(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return uy(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vy);case"emailLink":return async function(e,t){return fg(e,"POST","/v1/accounts:signInWithEmailLink",hg(e,t))}(e,{email:this._email,oobCode:this._password});default:Gm(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return uy(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fy);case"emailLink":return async function(e,t){return fg(e,"POST","/v1/accounts:signInWithEmailLink",hg(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Gm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wy(e,t){return fg(e,"POST","/v1/accounts:signInWithIdp",hg(e,t))}class Sy extends py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sy(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=Um(t,["providerId","signInMethod"]);if(!r||!n)return null;const s=new Sy(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return wy(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wy(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}const by={USER_NOT_FOUND:"user-not-found"};class Cy extends py{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cy({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cy({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return fg(e,"POST","/v1/accounts:signInWithPhoneNumber",hg(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const r=await fg(e,"POST","/v1/accounts:signInWithPhoneNumber",hg(e,t));if(r.temporaryProof)throw yg(e,"account-exists-with-different-credential",r);return r}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return fg(e,"POST","/v1/accounts:signInWithPhoneNumber",hg(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),by)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new Cy({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class Iy{constructor(e){var t,r,n,i,s,o;const a=K(G(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(r=a.oobCode)&&void 0!==r?r:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=a.mode)&&void 0!==n?n:null);$m(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=K(G(e)).link,r=t?K(G(t)).deep_link_id:null,n=K(G(e)).deep_link_id;return(n?K(G(n)).link:null)||n||r||t||e}(e);try{return new Iy(t)}catch(r){return null}}}class Ey{constructor(){this.providerId=Ey.PROVIDER_ID}static credential(e,t){return yy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Iy.parseLink(t);return $m(r,"argument-error"),yy._fromEmailAndCode(e,r.code,r.tenantId)}}Ey.PROVIDER_ID="password",Ey.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ey.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ty{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Py extends Ty{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ry extends Py{constructor(){super("facebook.com")}static credential(e){return Sy._fromParams({providerId:Ry.PROVIDER_ID,signInMethod:Ry.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ry.credentialFromTaggedObject(e)}static credentialFromError(e){return Ry.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ry.credential(t.oauthAccessToken)}catch(r){return null}}}Ry.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ry.PROVIDER_ID="facebook.com";class _y extends Py{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sy._fromParams({providerId:_y.PROVIDER_ID,signInMethod:_y.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _y.credentialFromTaggedObject(e)}static credentialFromError(e){return _y.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return _y.credential(r,n)}catch(i){return null}}}_y.GOOGLE_SIGN_IN_METHOD="google.com",_y.PROVIDER_ID="google.com";class Ay extends Py{constructor(){super("github.com")}static credential(e){return Sy._fromParams({providerId:Ay.PROVIDER_ID,signInMethod:Ay.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ay.credentialFromTaggedObject(e)}static credentialFromError(e){return Ay.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ay.credential(t.oauthAccessToken)}catch(r){return null}}}Ay.GITHUB_SIGN_IN_METHOD="github.com",Ay.PROVIDER_ID="github.com";class ky extends Py{constructor(){super("twitter.com")}static credential(e,t){return Sy._fromParams({providerId:ky.PROVIDER_ID,signInMethod:ky.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ky.credentialFromTaggedObject(e)}static credentialFromError(e){return ky.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return ky.credential(r,n)}catch(i){return null}}}async function xy(e,t){return fg(e,"POST","/v1/accounts:signUp",hg(e,t))}ky.TWITTER_SIGN_IN_METHOD="twitter.com",ky.PROVIDER_ID="twitter.com";class Oy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ng._fromIdTokenResponse(e,r,n),s=Dy(r);return new Oy({user:i,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=Dy(r);return new Oy({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function Dy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ny extends j{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Ny.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new Ny(e,t,r,n)}}function My(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch((r=>{if(r.code==="auth/".concat("multi-factor-auth-required"))throw Ny._fromErrorAndOperation(e,r,t,n);throw r}))}async function Ly(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await Rg(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Oy._forOperation(e,"link",n)}async function Fy(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:n}=e;if(at(n.app))return Promise.reject(Ym(n));const i="reauthenticate";try{const s=await Rg(e,My(n,i,t,e),r);$m(s.idToken,n,"internal-error");const o=Tg(s.idToken);$m(o,n,"internal-error");const{sub:a}=o;return $m(e.uid===a,n,"user-mismatch"),Oy._forOperation(e,i,s)}catch(nA){throw(null===nA||void 0===nA?void 0:nA.code)==="auth/".concat("user-not-found")&&Gm(n,"user-mismatch"),nA}}async function zy(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(at(e.app))return Promise.reject(Ym(e));const n="signIn",i=await My(e,n,t),s=await Oy._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function By(e,t){return zy(ry(e),t)}function jy(e,t,r){var n;$m((null===(n=r.url)||void 0===n?void 0:n.length)>0,e,"invalid-continue-uri"),$m("undefined"===typeof r.dynamicLinkDomain||r.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=r.url,t.dynamicLinkDomain=r.dynamicLinkDomain,t.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&($m(r.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=r.iOS.bundleId),r.android&&($m(r.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=r.android.installApp,t.androidMinimumVersionCode=r.android.minimumVersion,t.androidPackageName=r.android.packageName)}async function Uy(e){const t=ry(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Vy(e,t){const r=Y(e),n={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&jy(r.auth,n,t);const{email:i}=await async function(e,t){return my(e,t)}(r.auth,n);i!==e.email&&await e.reload()}new WeakMap;const qy="__sak";class Wy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qy,"1"),this.storage.removeItem(qy),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Hy extends Wy{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=F();return qg(e)||Qg(e)}()&&function(){try{return!(!window||window===window.top)}catch(nA){return!1}}(),this.fallbackToPolling=Xg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,r)=>{this.notifyListeners(e,r)}));const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const n=this.storage.getItem(r);if(e.newValue!==n)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const n=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},i=this.storage.getItem(r);Yg()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hy.type="LOCAL";const Ky=Hy;class Gy extends Wy{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Gy.type="SESSION";const Jy=Gy;class Qy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const r=new Qy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:i}=t.data,s=this.handlersMap[n];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Yy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="";for(let n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}Qy.receivers=[];class Xy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const n="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Yy("",20);n.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),r);s={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),n.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[n.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Zy(){return window}function $y(){return"undefined"!==typeof Zy().WorkerGlobalScope&&"function"===typeof Zy().importScripts}const ew="firebaseLocalStorageDb",tw="firebaseLocalStorage",rw="fbase_key";class nw{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function iw(e,t){return e.transaction([tw],t?"readwrite":"readonly").objectStore(tw)}function sw(){const e=indexedDB.open(ew,1);return new Promise(((t,r)=>{e.addEventListener("error",(()=>{r(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(tw,{keyPath:rw})}catch(nA){r(nA)}})),e.addEventListener("success",(async()=>{const r=e.result;r.objectStoreNames.contains(tw)?t(r):(r.close(),await function(){const e=indexedDB.deleteDatabase(ew);return new nw(e).toPromise()}(),t(await sw()))}))}))}async function ow(e,t,r){const n=iw(e,!0).put({[rw]:t,value:r});return new nw(n).toPromise()}function aw(e,t){const r=iw(e,!0).delete(t);return new nw(r).toPromise()}class cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await sw()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(nA){if(t++>3)throw nA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $y()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qy._getInstance($y()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Xy(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sw();return await ow(e,qy,"1"),await aw(e,qy),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((r=>ow(r,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const r=iw(e,!1).get(t),n=await new nw(r).toPromise();return void 0===n?null:n.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>aw(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=iw(e,!1).getAll();return new nw(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;if(0!==e.length)for(const{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}cw.type="LOCAL";const uw=cw;oy("rcb"),new og(3e4,6e4);const lw="recaptcha";async function hw(e,t,r){var n;const i=await r.verify();try{let s;if($m("string"===typeof i,e,"argument-error"),$m(r.type===lw,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){$m("enroll"===t.type,e,"internal-error");const r=await function(e,t){return dg(e,"POST","/v2/accounts/mfaEnrollment:start",hg(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return r.phoneSessionInfo.sessionInfo}{$m("signin"===t.type,e,"internal-error");const r=(null===(n=s.multiFactorHint)||void 0===n?void 0:n.uid)||s.multiFactorUid;$m(r,e,"missing-multi-factor-info");const o=await function(e,t){return dg(e,"POST","/v2/accounts/mfaSignIn:start",hg(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return dg(e,"POST","/v1/accounts:sendVerificationCode",hg(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{r._reset()}}class dw{constructor(e){this.providerId=dw.PROVIDER_ID,this.auth=ry(e)}verifyPhoneNumber(e,t){return hw(this.auth,e,Y(t))}static credential(e,t){return Cy._fromVerification(e,t)}static credentialFromResult(e){const t=e;return dw.credentialFromTaggedObject(t)}static credentialFromError(e){return dw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:r,temporaryProof:n}=t;return r&&n?Cy._fromTokenResponse(r,n):null}}function pw(e,t){return t?Lg(t):($m(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dw.PROVIDER_ID="phone",dw.PHONE_SIGN_IN_METHOD="phone";class fw extends py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vw(e){return zy(e.auth,new fw(e),e.bypassAuthState)}function mw(e){const{auth:t,user:r}=e;return $m(r,t,"internal-error"),Fy(r,new fw(e),e.bypassAuthState)}async function gw(e){const{auth:t,user:r}=e;return $m(r,t,"internal-error"),Ly(r,new fw(e),e.bypassAuthState)}class yw{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nA){this.reject(nA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(nA){this.reject(nA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vw;case"linkViaPopup":case"linkViaRedirect":return gw;case"reauthViaPopup":case"reauthViaRedirect":return mw;default:Gm(this.auth,"internal-error")}}resolve(e){tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ww=new og(2e3,1e4);class Sw extends yw{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,Sw.currentPopupAction&&Sw.currentPopupAction.cancel(),Sw.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $m(e,this.auth,"internal-error"),e}async onExecution(){tg(1===this.filter.length,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Jm(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Jm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sw.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Jm(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ww.get())};e()}}Sw.currentPopupAction=null;const bw="pendingRedirect",Cw=new Map;class Iw extends yw{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Cw.get(this.auth._key());if(!e){try{const t=await async function(e,t){const r=Pw(t),n=Tw(e);if(!await n._isAvailable())return!1;const i="true"===await n._get(r);return await n._remove(r),i}(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(nA){e=()=>Promise.reject(nA)}Cw.set(this.auth._key(),e)}return this.bypassAuthState||Cw.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ew(e,t){Cw.set(e._key(),t)}function Tw(e){return Lg(e._redirectPersistence)}function Pw(e){return Bg(bw,e.config.apiKey,e.name)}async function Rw(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(at(e.app))return Promise.reject(Ym(e));const n=ry(e),i=pw(n,t),s=new Iw(n,i,r),o=await s.execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}class _w{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kw(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!kw(e)){const n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Jm(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aw(e))}saveEventToCache(e){this.cachedEventUids.add(Aw(e)),this.lastProcessedEventTime=Date.now()}}function Aw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function kw(e){let{type:t,error:r}=e;return"unknown"===t&&(null===r||void 0===r?void 0:r.code)==="auth/".concat("no-auth-event")}const xw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ow=/^https?/;async function Dw(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return dg(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(Nw(n))return}catch(r){}Gm(e,"unauthorized-domain")}function Nw(e){const t=rg(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!Ow.test(r))return!1;if(xw.test(e))return n===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const Mw=new og(3e4,6e4);function Lw(){const e=Zy().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}function Fw(e){return new Promise(((t,r)=>{var n,i,s;function o(){Lw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lw(),r(Jm(e,"network-request-failed"))},timeout:Mw.get()})}if(null===(i=null===(n=Zy().gapi)||void 0===n?void 0:n.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Zy().gapi)||void 0===s?void 0:s.load)){const t=oy("iframefcb");return Zy()[t]=()=>{gapi.load?o():r(Jm(e,"network-request-failed"))},sy("".concat(iy.gapiScript,"?onload=").concat(t)).catch((e=>r(e)))}o()}})).catch((e=>{throw zw=null,e}))}let zw=null;const Bw=new og(5e3,15e3),jw="__/auth/iframe",Uw="emulator/auth/iframe",Vw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ww(e){const t=e.config;$m(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?ag(t,Uw):"https://".concat(e.config.authDomain,"/").concat(jw),n={apiKey:t.apiKey,appName:e.name,v:lt},i=qw.get(e.config.apiHost);i&&(n.eid=i);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),"".concat(r,"?").concat(H(n).slice(1))}async function Hw(e){const t=await function(e){return zw=zw||Fw(e),zw}(e),r=Zy().gapi;return $m(r,e,"internal-error"),t.open({where:document.body,url:Ww(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vw,dontclear:!0},(t=>new Promise((async(r,n)=>{await t.restyle({setHideOnLeave:!1});const i=Jm(e,"network-request-failed"),s=Zy().setTimeout((()=>{n(i)}),Bw.get());function o(){Zy().clearTimeout(s),r(t)}t.ping(o).then(o,(()=>{n(i)}))}))))}const Kw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(nA){}}}function Jw(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Kw),{width:n.toString(),height:i.toString(),top:s,left:o}),u=F().toLowerCase();r&&(a=Wg(u)?"_blank":r),Vg(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((e,t)=>{let[r,n]=t;return"".concat(e).concat(r,"=").concat(n,",")}),"");if(function(){var e;return Qg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:F())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",a),new Gw(null);const h=window.open(t||"",a,l);$m(h,e,"popup-blocked");try{h.focus()}catch(nA){}return new Gw(h)}const Qw="__/auth/handler",Yw="emulator/auth/handler",Xw=encodeURIComponent("fac");async function Zw(e,t,r,n,i,s){$m(e.config.authDomain,e,"auth-domain-config-required"),$m(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:lt,eventId:i};if(t instanceof Ty){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Py){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?"#".concat(Xw,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Qw);return ag(t,Yw)}(e),"?").concat(H(a).slice(1)).concat(u)}const $w="webStorageSupport";const eS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jy,this._completeRedirectFn=Rw,this._overrideRedirectResult=Ew}async _openPopup(e,t,r,n){var i;tg(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Jw(e,await Zw(e,t,r,rg(),n),Yy())}async _openRedirect(e,t,r,n){await this._originValidation(e);return function(e){Zy().location.href=e}(await Zw(e,t,r,rg(),n)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(tg(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch((()=>{delete this.eventManagers[t]})),r}async initAndGetManager(e){const t=await Hw(e),r=new _w(e);return t.register("authEvent",(t=>{$m(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($w,{type:$w},(r=>{var n;const i=null===(n=null===r||void 0===r?void 0:r[0])||void 0===n?void 0:n[$w];void 0!==i&&t(!!i),Gm(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Dw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xg()||qg()||Qg()}};var tS="@firebase/auth",rS="1.7.1";class nS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$m(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const iS=M("authIdTokenMaxAge")||300;let sS=null;var oS;!function(e){iy=e}({loadJS:e=>new Promise(((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=Jm("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),oS="Browser",st(new X("auth",((e,t)=>{let{options:r}=t;const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;$m(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:a,clientPlatform:oS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zg(oS)},u=new ty(n,i,s,c);return function(e,t){const r=(null===t||void 0===t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Lg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,r),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,r)=>{e.getProvider("auth-internal").initialize()}))),st(new X("auth-internal",(e=>(e=>new nS(e))(ry(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),pt(tS,rS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(oS)),pt(tS,rS,"esm2017");var aS=r(2450),cS=Object.defineProperty,uS=Object.defineProperties,lS=Object.getOwnPropertyDescriptors,hS=Object.getOwnPropertySymbols,dS=Object.prototype.hasOwnProperty,pS=Object.prototype.propertyIsEnumerable,fS=(e,t,r)=>t in e?cS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vS=(e,t)=>{for(var r in t||(t={}))dS.call(t,r)&&fS(e,r,t[r]);if(hS)for(var r of hS(t))pS.call(t,r)&&fS(e,r,t[r]);return e},mS=(e,t)=>uS(e,lS(t)),gS=(e,t,r)=>(fS(e,"symbol"!==typeof t?t+"":t,r),r),yS=(e,t,r)=>new Promise(((n,i)=>{var s=e=>{try{a(r.next(e))}catch(nA){i(nA)}},o=e=>{try{a(r.throw(e))}catch(nA){i(nA)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);a((r=r.apply(e,t)).next())}));class wS{constructor(e){gS(this,"rootKey"),this.rootKey=e}}const SS=Object.seal({});class bS extends wS{constructor(e){super(e),gS(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);const r=this.root.map((t=>t instanceof wS?t.prepForXml(e):t)).filter((e=>void 0!==e));return e.stack.pop(),{[this.rootKey]:r.length?1===r.length&&(null==(t=r[0])?void 0:t._attr)?r[0]:r:SS}}addChildElement(e){return this.root.push(e),this}}class CS extends bS{prepForXml(e){const t=super.prepForXml(e);if(t&&("object"!==typeof t[this.rootKey]||Object.keys(t[this.rootKey]).length))return t}}class IS extends wS{constructor(e){super("_attr"),gS(this,"xmlKeys"),this.root=e}prepForXml(e){const t={};return Object.keys(this.root).forEach((e=>{const r=this.root[e];if(void 0!==r){const n=this.xmlKeys&&this.xmlKeys[e]||e;t[n]=r}})),{_attr:t}}}class ES extends wS{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter((e=>{let{value:t}=e;return void 0!==t})).reduce(((e,t)=>{let{key:r,value:n}=t;return mS(vS({},e),{[r]:n})}),{})}}}class TS extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var PS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function RS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _S,AS={},kS={exports:{}},xS="object"===typeof Reflect?Reflect:null,OS=xS&&"function"===typeof xS.apply?xS.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};_S=xS&&"function"===typeof xS.ownKeys?xS.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var DS=Number.isNaN||function(e){return e!==e};function NS(){NS.init.call(this)}kS.exports=NS,kS.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}WS(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&WS(e,"error",t,r)}(e,i,{once:!0})}))},NS.EventEmitter=NS,NS.prototype._events=void 0,NS.prototype._eventsCount=0,NS.prototype._maxListeners=void 0;var MS=10;function LS(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function FS(e){return void 0===e._maxListeners?NS.defaultMaxListeners:e._maxListeners}function zS(e,t,r,n){var i,s,o,a;if(LS(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"===typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=FS(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,a=c,console&&console.warn&&console.warn(a)}return e}function BS(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jS(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=BS.bind(n);return i.listener=r,n.wrapFn=i,i}function US(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):qS(i,i.length)}function VS(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function qS(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function WS(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(NS,"defaultMaxListeners",{enumerable:!0,get:function(){return MS},set:function(e){if("number"!==typeof e||e<0||DS(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");MS=e}}),NS.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},NS.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||DS(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},NS.prototype.getMaxListeners=function(){return FS(this)},NS.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"===typeof a)OS(a,this,t);else{var c=a.length,u=qS(a,c);for(r=0;r<c;++r)OS(u[r],this,t)}return!0},NS.prototype.addListener=function(e,t){return zS(this,e,t,!1)},NS.prototype.on=NS.prototype.addListener,NS.prototype.prependListener=function(e,t){return zS(this,e,t,!0)},NS.prototype.once=function(e,t){return LS(t),this.on(e,jS(this,e,t)),this},NS.prototype.prependOnceListener=function(e,t){return LS(t),this.prependListener(e,jS(this,e,t)),this},NS.prototype.removeListener=function(e,t){var r,n,i,s,o;if(LS(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},NS.prototype.off=NS.prototype.removeListener,NS.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},NS.prototype.listeners=function(e){return US(this,e,!0)},NS.prototype.rawListeners=function(e){return US(this,e,!1)},NS.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):VS.call(e,t)},NS.prototype.listenerCount=VS,NS.prototype.eventNames=function(){return this._eventsCount>0?_S(this._events):[]};var HS=kS.exports,KS={exports:{}};"function"===typeof Object.create?KS.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:KS.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var GS=KS.exports;function JS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QS,YS,XS={exports:{}},ZS=XS.exports={};function $S(){throw new Error("setTimeout has not been defined")}function eb(){throw new Error("clearTimeout has not been defined")}function tb(e){if(QS===setTimeout)return setTimeout(e,0);if((QS===$S||!QS)&&setTimeout)return QS=setTimeout,setTimeout(e,0);try{return QS(e,0)}catch(nA){try{return QS.call(null,e,0)}catch(t){return QS.call(this,e,0)}}}!function(){try{QS="function"===typeof setTimeout?setTimeout:$S}catch(nA){QS=$S}try{YS="function"===typeof clearTimeout?clearTimeout:eb}catch(nA){YS=eb}}();var rb,nb=[],ib=!1,sb=-1;function ob(){ib&&rb&&(ib=!1,rb.length?nb=rb.concat(nb):sb=-1,nb.length&&ab())}function ab(){if(!ib){var e=tb(ob);ib=!0;for(var t=nb.length;t;){for(rb=nb,nb=[];++sb<t;)rb&&rb[sb].run();sb=-1,t=nb.length}rb=null,ib=!1,function(e){if(YS===clearTimeout)return clearTimeout(e);if((YS===eb||!YS)&&clearTimeout)return YS=clearTimeout,clearTimeout(e);try{return YS(e)}catch(nA){try{return YS.call(null,e)}catch(t){return YS.call(this,e)}}}(e)}}function cb(e,t){this.fun=e,this.array=t}function ub(){}ZS.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];nb.push(new cb(e,t)),1!==nb.length||ib||tb(ab)},cb.prototype.run=function(){this.fun.apply(null,this.array)},ZS.title="browser",ZS.browser=!0,ZS.env={},ZS.argv=[],ZS.version="",ZS.versions={},ZS.on=ub,ZS.addListener=ub,ZS.once=ub,ZS.off=ub,ZS.removeListener=ub,ZS.removeAllListeners=ub,ZS.emit=ub,ZS.prependListener=ub,ZS.prependOnceListener=ub,ZS.listeners=function(e){return[]},ZS.binding=function(e){throw new Error("process.binding is not supported")},ZS.cwd=function(){return"/"},ZS.chdir=function(e){throw new Error("process.chdir is not supported")},ZS.umask=function(){return 0};const lb=JS(XS.exports);var hb,db;function pb(){return db?hb:(db=1,hb=HS.EventEmitter)}var fb,vb={},mb={};var gb,yb,wb={};function Sb(){return yb||(yb=1,function(e){var t=function(){if(fb)return mb;fb=1,mb.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},mb.toByteArray=function(e){var n,i,o=s(e),a=o[0],c=o[1],u=new r(function(e,t,r){return 3*(t+r)/4-r}(0,a,c)),l=0,h=c>0?a-4:a;for(i=0;i<h;i+=4)n=t[e.charCodeAt(i)]<<18|t[e.charCodeAt(i+1)]<<12|t[e.charCodeAt(i+2)]<<6|t[e.charCodeAt(i+3)],u[l++]=n>>16&255,u[l++]=n>>8&255,u[l++]=255&n;return 2===c&&(n=t[e.charCodeAt(i)]<<2|t[e.charCodeAt(i+1)]>>4,u[l++]=255&n),1===c&&(n=t[e.charCodeAt(i)]<<10|t[e.charCodeAt(i+1)]<<4|t[e.charCodeAt(i+2)]>>2,u[l++]=n>>8&255,u[l++]=255&n),u},mb.fromByteArray=function(t){for(var r,n=t.length,i=n%3,s=[],a=16383,c=0,u=n-i;c<u;c+=a)s.push(o(t,c,c+a>u?u:c+a));return 1===i?(r=t[n-1],s.push(e[r>>2]+e[r<<4&63]+"==")):2===i&&(r=(t[n-2]<<8)+t[n-1],s.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"=")),s.join("")};for(var e=[],t=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function o(t,r,n){for(var i,s,o=[],a=r;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(e[(s=i)>>18&63]+e[s>>12&63]+e[s>>6&63]+e[63&s]);return o.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,mb}(),r=(gb||(gb=1,wb.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+e[t+h],h+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+h],h+=d,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=u}return(p?-1:1)*o*Math.pow(2,s-n)},wb.write=function(e,t,r,n,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+p]=255&o,p+=f,o/=256,u-=8);e[r+p-f]|=128*v}),wb),n="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,r)}function a(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=s(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(B(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var i=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||j(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),s(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function d(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var h=!0,d=0;d<c;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(j(a))return o;e[r+o]=a}return o}function w(e,t,r,n){return z(L(t,e.length-r),e,r,n)}function S(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return z(F(t),e,r,n)}function C(e,t,r,n){return z(function(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function I(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function E(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128===(192&(s=e[i+1]))&&(c=(31&u)<<6|63&s)>127&&(l=c);break;case 3:s=e[i+1],o=e[i+2],128===(192&s)&&128===(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(nA){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?s(e):void 0!==t?"string"===typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(B(s,Uint8Array))i+s.length>n.length?o.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),c=Math.min(s,a),u=this.slice(n,i),l=e.slice(t,r),h=0;h<c;++h)if(u[h]!==l[h]){s=u[h],a=l[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function _(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=U[e[s]];return i}function A(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function k(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,n,i,s){return t=+t,n>>>=0,s||O(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function N(e,t,n,i,s){return t=+t,n>>>=0,s||O(e,0,n,8),r.write(e,t,n,i,52,8),n+8}o.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,n),c=a.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%c]}return this};var M=/[^+/0-9A-Za-z-_]/g;function L(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function j(e){return e!==e}var U=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()}(vb)),vb}var bb,Cb,Ib,Eb,Tb,Pb,Rb,_b,Ab,kb,xb,Ob,Db,Nb,Mb,Lb,Fb={},zb={};function Bb(){return Cb?bb:(Cb=1,bb=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0})}function jb(){if(Eb)return Ib;Eb=1;var e=Bb();return Ib=function(){return e()&&!!Symbol.toStringTag}}function Ub(){if(Ob)return xb;Ob=1;var e=function(){if(kb)return Ab;kb=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};return Ab=function(n){var i=this;if("function"!==typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var s,o=function(e,t){for(var r=[],n=1||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r}(arguments),a=t(0,i.length-o.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(s=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var e=i.apply(this,r(o,arguments));return Object(e)===e?e:this}return i.apply(n,r(o,arguments))})),i.prototype){var l=function(){};l.prototype=i.prototype,s.prototype=new l,l.prototype=null}return s},Ab}();return xb=Function.prototype.bind||e}function Vb(){if(Lb)return Mb;var e;Lb=1;var t=SyntaxError,r=Function,n=TypeError,i=function(e){try{return r('"use strict"; return ('+e+").constructor;")()}catch(nA){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(nA){s=null}var o=function(){throw new n},a=s?function(){try{return o}catch(e){try{return s(arguments,"callee").get}catch(t){return o}}}():o,c=function(){if(Pb)return Tb;Pb=1;var e="undefined"!==typeof Symbol&&Symbol,t=Bb();return Tb=function(){return"function"===typeof e&&"function"===typeof Symbol&&"symbol"===typeof e("foo")&&"symbol"===typeof Symbol("bar")&&t()}}()(),u=function(){if(_b)return Rb;_b=1;var e={foo:{}},t=Object;return Rb=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof t)}}()(),l=Object.getPrototypeOf||(u?function(e){return e.__proto__}:null),h={},d="undefined"!==typeof Uint8Array&&l?l(Uint8Array):e,p={"%AggregateError%":"undefined"===typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":c&&l?l([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"===typeof Atomics?e:Atomics,"%BigInt%":"undefined"===typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":h,"%Int8Array%":"undefined"===typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c&&l?l(l([][Symbol.iterator]())):e,"%JSON%":"object"===typeof JSON?JSON:e,"%Map%":"undefined"===typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&c&&l?l((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?e:Promise,"%Proxy%":"undefined"===typeof Proxy?e:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&c&&l?l((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c&&l?l(""[Symbol.iterator]()):e,"%Symbol%":c?Symbol:e,"%SyntaxError%":t,"%ThrowTypeError%":a,"%TypedArray%":d,"%TypeError%":n,"%Uint8Array%":"undefined"===typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?e:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?e:WeakSet};if(l)try{null.error}catch(nA){var f=l(l(nA));p["%Error.prototype%"]=f}var v=function e(t){var r;if("%AsyncFunction%"===t)r=i("async function () {}");else if("%GeneratorFunction%"===t)r=i("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=i("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var s=e("%AsyncGenerator%");s&&l&&(r=l(s.prototype))}return p[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=Ub(),y=function(){if(Nb)return Db;Nb=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Ub();return Db=r.call(e,t)}(),w=g.call(Function.call,Array.prototype.concat),S=g.call(Function.apply,Array.prototype.splice),b=g.call(Function.call,String.prototype.replace),C=g.call(Function.call,String.prototype.slice),I=g.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,P=function(e,r){var i,s=e;if(y(m,s)&&(s="%"+(i=m[s])[0]+"%"),y(p,s)){var o=p[s];if(o===h&&(o=v(s)),"undefined"===typeof o&&!r)throw new n("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:s,value:o}}throw new t("intrinsic "+e+" does not exist!")};return Mb=function(e,r){if("string"!==typeof e||0===e.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof r)throw new n('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,e))throw new t("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(e){var r=C(e,0,1),n=C(e,-1);if("%"===r&&"%"!==n)throw new t("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==r)throw new t("invalid intrinsic syntax, expected opening `%`");var i=[];return b(e,E,(function(e,t,r,n){i[i.length]=r?b(n,T,"$1"):t||e})),i}(e),o=i.length>0?i[0]:"",a=P("%"+o+"%",r),c=a.name,u=a.value,l=!1,h=a.alias;h&&(o=h[0],S(i,w([0,1],h)));for(var d=1,f=!0;d<i.length;d+=1){var v=i[d],m=C(v,0,1),g=C(v,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new t("property names with quotes must have matching quotes");if("constructor"!==v&&f||(l=!0),y(p,c="%"+(o+="."+v)+"%"))u=p[c];else if(null!=u){if(!(v in u)){if(!r)throw new n("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&d+1>=i.length){var R=s(u,v);u=(f=!!R)&&"get"in R&&!("originalValue"in R.get)?R.get:u[v]}else f=y(u,v),u=u[v];f&&!l&&(p[c]=u)}}return u},Mb}var qb,Wb,Hb,Kb,Gb,Jb,Qb,Yb,Xb,Zb,$b,eC,tC,rC,nC,iC,sC,oC,aC,cC,uC,lC,hC,dC,pC,fC,vC,mC,gC,yC,wC,SC,bC,CC={exports:{}};function IC(){if(Wb)return qb;Wb=1;var e=Vb()("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch(nA){return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return 1!==e([],"length",{value:1}).length}catch(nA){return!0}},qb=t}function EC(){if(Kb)return Hb;Kb=1;var e=Vb()("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch(nA){e=null}return Hb=e}function TC(){if(Yb)return Qb;Yb=1;var e=Vb(),t=function(){if(Jb)return Gb;Jb=1;var e=IC()(),t=Vb(),r=e&&t("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1})}catch(nA){r=!1}var n=t("%SyntaxError%"),i=t("%TypeError%"),s=EC();return Gb=function(e,t,o){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new i("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],h=!!s&&s(e,t);if(r)r(e,t,{configurable:null===u&&h?h.configurable:!u,enumerable:null===a&&h?h.enumerable:!a,value:o,writable:null===c&&h?h.writable:!c});else{if(!l&&(a||c||u))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=o}},Gb}(),r=IC()(),n=EC(),i=e("%TypeError%"),s=e("%Math.floor%");return Qb=function(e,o){if("function"!==typeof e)throw new i("`fn` is not a function");if("number"!==typeof o||o<0||o>4294967295||s(o)!==o)throw new i("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],c=!0,u=!0;if("length"in e&&n){var l=n(e,"length");l&&!l.configurable&&(c=!1),l&&!l.writable&&(u=!1)}return(c||u||!a)&&(r?t(e,"length",o,!0,!0):t(e,"length",o)),e},Qb}function PC(){return Xb||(Xb=1,function(e){var t=Ub(),r=Vb(),n=TC(),i=r("%TypeError%"),s=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||t.call(o,s),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(nA){c=null}e.exports=function(e){if("function"!==typeof e)throw new i("a function is required");var r=a(t,o,arguments);return n(r,1+u(0,e.length-(arguments.length-1)),!0)};var l=function(){return a(t,s,arguments)};c?c(e.exports,"apply",{value:l}):e.exports.apply=l}(CC)),CC.exports}function RC(){if($b)return Zb;$b=1;var e=Vb(),t=PC(),r=t(e("String.prototype.indexOf"));return Zb=function(n,i){var s=e(n,!!i);return"function"===typeof s&&r(n,".prototype.")>-1?t(s):s}}function _C(){if(nC)return rC;nC=1;var e,t=Object.prototype.toString,r=Function.prototype.toString,n=/^\s*(?:function)?\*/,i=jb()(),s=Object.getPrototypeOf;return rC=function(o){if("function"!==typeof o)return!1;if(n.test(r.call(o)))return!0;if(!i)return"[object GeneratorFunction]"===t.call(o);if(!s)return!1;if("undefined"===typeof e){var a=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch(nA){}}();e=!!a&&s(a)}return s(o)===e}}function AC(){if(aC)return oC;aC=1;var e=function(){if(sC)return iC;sC=1;var e,t,r=Function.prototype.toString,n="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof n&&"function"===typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw t}}),t={},n((function(){throw 42}),null,e)}catch(d){d!==t&&(n=null)}else n=null;var i=/^\s*class\b/,s=function(e){try{var t=r.call(e);return i.test(t)}catch(nA){return!1}},o=function(e){try{return!s(e)&&(r.call(e),!0)}catch(nA){return!1}},a=Object.prototype.toString,c="function"===typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),l=function(){return!1};if("object"===typeof document){var h=document.all;a.call(h)===a.call(document.all)&&(l=function(e){if((u||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=a.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(nA){}return!1})}return iC=n?function(r){if(l(r))return!0;if(!r)return!1;if("function"!==typeof r&&"object"!==typeof r)return!1;try{n(r,null,e)}catch(nA){if(nA!==t)return!1}return!s(r)&&o(r)}:function(e){if(l(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(c)return o(e);if(s(e))return!1;var t=a.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&o(e)}}(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty;return oC=function(n,i,s){if(!e(i))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=s),"[object Array]"===t.call(n)?function(e,t,n){for(var i=0,s=e.length;i<s;i++)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(n,i,o):"string"===typeof n?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(n,i,o):function(e,t,n){for(var i in e)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(n,i,o)},oC}function kC(){if(hC)return lC;hC=1;var e=AC(),t=function(){if(uC)return cC;uC=1;var e=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],t="undefined"===typeof globalThis?PS:globalThis;return cC=function(){for(var r=[],n=0;n<e.length;n++)"function"===typeof t[e[n]]&&(r[r.length]=e[n]);return r}}(),r=PC(),n=RC(),i=EC(),s=n("Object.prototype.toString"),o=jb()(),a="undefined"===typeof globalThis?PS:globalThis,c=t(),u=n("String.prototype.slice"),l=Object.getPrototypeOf,h=n("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},d={__proto__:null};e(c,o&&i&&l?function(e){var t=new a[e];if(Symbol.toStringTag in t){var n=l(t),s=i(n,Symbol.toStringTag);if(!s){var o=l(n);s=i(o,Symbol.toStringTag)}d["$"+e]=r(s.get)}}:function(e){var t=new a[e],n=t.slice||t.set;n&&(d["$"+e]=r(n))});return lC=function(t){if(!t||"object"!==typeof t)return!1;if(!o){var r=u(s(t),8,-1);return h(c,r)>-1?r:"Object"===r&&function(t){var r=!1;return e(d,(function(e,n){if(!r)try{e(t),r=u(n,1)}catch(nA){}})),r}(t)}return i?function(t){var r=!1;return e(d,(function(e,n){if(!r)try{"$"+e(t)===n&&(r=u(n,1))}catch(nA){}})),r}(t):null}}function xC(){return fC||(fC=1,function(e){var t=function(){if(tC)return eC;tC=1;var e=jb()(),t=RC()("Object.prototype.toString"),r=function(r){return!(e&&r&&"object"===typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===t(r)},n=function(e){return!!r(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==t(e)&&"[object Function]"===t(e.callee)},i=function(){return r(arguments)}();return r.isLegacyArguments=n,eC=i?r:n}(),r=_C(),n=kC(),i=function(){if(pC)return dC;pC=1;var e=kC();return dC=function(t){return!!e(t)}}();function s(e){return e.call.bind(e)}var o="undefined"!==typeof BigInt,a="undefined"!==typeof Symbol,c=s(Object.prototype.toString),u=s(Number.prototype.valueOf),l=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var p=s(Symbol.prototype.valueOf);function f(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(nA){return!1}}function v(e){return"[object Map]"===c(e)}function m(e){return"[object Set]"===c(e)}function g(e){return"[object WeakMap]"===c(e)}function y(e){return"[object WeakSet]"===c(e)}function w(e){return"[object ArrayBuffer]"===c(e)}function S(e){return"undefined"!==typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function b(e){return"[object DataView]"===c(e)}function C(e){return"undefined"!==typeof DataView&&(b.working?b(e):e instanceof DataView)}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=i,e.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},e.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||C(e)},e.isUint8Array=function(e){return"Uint8Array"===n(e)},e.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===n(e)},e.isUint16Array=function(e){return"Uint16Array"===n(e)},e.isUint32Array=function(e){return"Uint32Array"===n(e)},e.isInt8Array=function(e){return"Int8Array"===n(e)},e.isInt16Array=function(e){return"Int16Array"===n(e)},e.isInt32Array=function(e){return"Int32Array"===n(e)},e.isFloat32Array=function(e){return"Float32Array"===n(e)},e.isFloat64Array=function(e){return"Float64Array"===n(e)},e.isBigInt64Array=function(e){return"BigInt64Array"===n(e)},e.isBigUint64Array=function(e){return"BigUint64Array"===n(e)},v.working="undefined"!==typeof Map&&v(new Map),e.isMap=function(e){return"undefined"!==typeof Map&&(v.working?v(e):e instanceof Map)},m.working="undefined"!==typeof Set&&m(new Set),e.isSet=function(e){return"undefined"!==typeof Set&&(m.working?m(e):e instanceof Set)},g.working="undefined"!==typeof WeakMap&&g(new WeakMap),e.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(g.working?g(e):e instanceof WeakMap)},y.working="undefined"!==typeof WeakSet&&y(new WeakSet),e.isWeakSet=function(e){return y(e)},w.working="undefined"!==typeof ArrayBuffer&&w(new ArrayBuffer),e.isArrayBuffer=S,b.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&b(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=C;var I="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function T(e){return"undefined"!==typeof I&&("undefined"===typeof E.working&&(E.working=E(new I)),E.working?E(e):e instanceof I)}function P(e){return f(e,u)}function R(e){return f(e,l)}function _(e){return f(e,h)}function A(e){return o&&f(e,d)}function k(e){return a&&f(e,p)}e.isSharedArrayBuffer=T,e.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},e.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},e.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},e.isGeneratorObject=function(e){return"[object Generator]"===c(e)},e.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},e.isNumberObject=P,e.isStringObject=R,e.isBooleanObject=_,e.isBigIntObject=A,e.isSymbolObject=k,e.isBoxedPrimitive=function(e){return P(e)||R(e)||_(e)||A(e)||k(e)},e.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(S(e)||T(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))}(zb)),zb}function OC(){return gC||(gC=1,function(e){var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;e.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,s=i.length,a=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}})),c=i[n];n<s;c=i[++n])f(c)||!w(c)?a+=" "+c:a+=" "+o(c);return a},e.deprecate=function(t,r){if("undefined"!==typeof lb&&!0===lb.noDeprecation)return t;if("undefined"===typeof lb)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(lb.throwDeprecation)throw new Error(r);lb.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n={},i=/^$/;if(lb.env.NODE_DEBUG){var s=lb.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}function o(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),u(n,t,n.depth)}function a(e,t){var r=o.styles[t];return r?"\x1b["+o.colors[r][0]+"m"+e+"\x1b["+o.colors[r][1]+"m":e}function c(e,t){return e}function u(t,r,n){if(t.customInspect&&r&&C(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var s=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(v(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(t,r);if(s)return s;var o=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),b(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(r);if(0===o.length){if(C(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(y(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(b(r))return l(r)}var w,I="",E=!1,T=["{","}"];(d(r)&&(E=!0,T=["[","]"]),C(r))&&(I=" [Function"+(r.name?": "+r.name:"")+"]");return y(r)&&(I=" "+RegExp.prototype.toString.call(r)),S(r)&&(I=" "+Date.prototype.toUTCString.call(r)),b(r)&&(I=" "+l(r)),0!==o.length||E&&0!=r.length?n<0?y(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),w=E?function(e,t,r,n,i){for(var s=[],o=0,a=t.length;o<a;++o)P(t,String(o))?s.push(h(e,t,r,n,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(h(e,t,r,n,i,!0))})),s}(t,r,n,a,o):o.map((function(e){return h(t,r,n,a,e,E)})),t.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(w,I,T)):T[0]+I+T[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),P(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=f(r)?u(e,c.value,null):u(e,c.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),g(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function d(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function f(e){return null===e}function v(e){return"number"===typeof e}function m(e){return"string"===typeof e}function g(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===I(e)}function w(e){return"object"===typeof e&&null!==e}function S(e){return w(e)&&"[object Date]"===I(e)}function b(e){return w(e)&&("[object Error]"===I(e)||e instanceof Error)}function C(e){return"function"===typeof e}function I(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!n[t])if(i.test(t)){var r=lb.pid;n[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else n[t]=function(){};return n[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=xC(),e.isArray=d,e.isBoolean=p,e.isNull=f,e.isNullOrUndefined=function(e){return null==e},e.isNumber=v,e.isString=m,e.isSymbol=function(e){return"symbol"===typeof e},e.isUndefined=g,e.isRegExp=y,e.types.isRegExp=y,e.isObject=w,e.isDate=S,e.types.isDate=S,e.isError=b,e.types.isNativeError=b,e.isFunction=C,e.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},e.isBuffer=mC?vC:(mC=1,vC=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8});var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){console.log("%s - %s",function(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}(),e.format.apply(e,arguments))},e.inherits=GS,e._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function _(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var r;if("function"!==typeof(r=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,R,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(o){r(o)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),R&&Object.defineProperty(r,R,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},e.promisify.custom=R,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return n.apply(i,arguments)};e.apply(this,t).then((function(e){lb.nextTick(s.bind(null,null,e))}),(function(e){lb.nextTick(_.bind(null,e,s))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,t(e)),r}}(Fb)),Fb}function DC(){if(wC)return yC;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}wC=1;var n=Sb().Buffer,i=OC().inspect,s=i&&i.custom||"inspect";return yC=function(){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.head=null,this.tail=null,this.length=0}var a,c,u;return a=o,c=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return n.alloc(0);for(var t,r,i,s=n.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=s,i=a,n.prototype.copy.call(t,r,i),a+=o.data.length,o=o.next;return s}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=n.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0===(e-=o)){o===s.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(o));break}++i}return this.length-=i,t}},{key:s,value:function(r,n){return i(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){t(r,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}))}return r}({},n,{depth:0,customInspect:!1}))}}],c&&r(a.prototype,c),u&&r(a,u),o}(),yC}function NC(){if(bC)return SC;function e(e,n){r(e,n),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}return bC=1,SC={destroy:function(n,i){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,lb.nextTick(r,this,n)):lb.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(r){!i&&r?s._writableState?s._writableState.errorEmitted?lb.nextTick(t,s):(s._writableState.errorEmitted=!0,lb.nextTick(e,s,r)):lb.nextTick(e,s,r):i?(lb.nextTick(t,s),i(r)):lb.nextTick(t,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}},SC}var MC,LC,FC,zC,BC,jC,UC,VC,qC,WC={};function HC(){if(MC)return WC;MC=1;var e={};function t(t,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"===typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=t,e[t]=i}function r(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}return t("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,s,o,a;if("string"===typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),WC.codes=e,WC}function KC(){if(FC)return LC;FC=1;var e=HC().codes.ERR_INVALID_OPT_VALUE;return LC={getHighWaterMark:function(t,r,n,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(r,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new e(i?n:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}}function GC(){if(BC)return zC;function e(e){try{if(!PS.localStorage)return!1}catch(r){return!1}var t=PS.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}return BC=1,zC=function(t,r){if(e("noDeprecation"))return t;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return t.apply(this,arguments)}},zC}function JC(){if(UC)return jC;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var t;UC=1,jC=b,b.WritableState=S;var r={deprecate:GC()},n=pb(),i=Sb().Buffer,s=PS.Uint8Array||function(){};var o,a=NC(),c=KC().getHighWaterMark,u=HC().codes,l=u.ERR_INVALID_ARG_TYPE,h=u.ERR_METHOD_NOT_IMPLEMENTED,d=u.ERR_MULTIPLE_CALLBACK,p=u.ERR_STREAM_CANNOT_PIPE,f=u.ERR_STREAM_DESTROYED,v=u.ERR_STREAM_NULL_VALUES,m=u.ERR_STREAM_WRITE_AFTER_END,g=u.ERR_UNKNOWN_ENCODING,y=a.errorOrDestroy;function w(){}function S(r,n,i){t=t||QC(),r=r||{},"boolean"!==typeof i&&(i=n instanceof t),this.objectMode=!!r.objectMode,i&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=c(this,r,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===r.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!==typeof i)throw new d;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(lb.nextTick(i,n),lb.nextTick(R,e,t),e._writableState.errorEmitted=!0,y(e,n)):(i(n),e._writableState.errorEmitted=!0,y(e,n),R(e,t))}(e,r,n,t,i);else{var s=T(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||E(e,r),n?lb.nextTick(I,e,r,s,i):I(e,r,s,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function b(e){var r=this instanceof(t=t||QC());if(!r&&!o.call(b,this))return new b(e);this._writableState=new S(e,this,r),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),n.call(this)}function C(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new f("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),R(e,t)}function E(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,s=new Array(i),o=r.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)s[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;s.allBuffers=c,C(t,r,!0,r.length,s,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(C(t,r,!1,r.objectMode?1:u.length,u,l,h),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&y(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=T(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,lb.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}return GS(b,n),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===b&&(e&&e._writableState instanceof S)}})):o=function(e){return e instanceof this},b.prototype.pipe=function(){y(this,new p)},b.prototype.write=function(e,t,r){var n,o=this._writableState,a=!1,c=!o.objectMode&&(n=e,i.isBuffer(n)||n instanceof s);return c&&!i.isBuffer(e)&&(e=function(e){return i.from(e)}(e)),"function"===typeof t&&(r=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!==typeof r&&(r=w),o.ending?function(e,t){var r=new m;y(e,r),lb.nextTick(t,r)}(this,r):(c||function(e,t,r,n){var i;return null===r?i=new v:"string"===typeof r||t.objectMode||(i=new l("chunk",["string","Buffer"],r)),!i||(y(e,i),lb.nextTick(n,i),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,s,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=i.from(t,r));return t}(t,n,s);n!==a&&(r=!0,s="buffer",n=a)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:s,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,c,n,s,o);return u}(this,o,c,e,t,r)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new g(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new h("_write()"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?lb.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=a.destroy,b.prototype._undestroy=a.undestroy,b.prototype._destroy=function(e,t){t(e)},jC}function QC(){if(qC)return VC;qC=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};VC=o;var t=gI(),r=JC();GS(o,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||lb.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),VC}var YC,XC,ZC,$C,eI,tI,rI,nI,iI,sI,oI,aI,cI,uI,lI,hI,dI={},pI={exports:{}};function fI(){if(XC)return dI;XC=1;var e=(YC||(YC=1,function(e,t){var r=Sb(),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(n,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(pI,pI.exports)),pI.exports).Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var n;switch(this.encoding=function(r){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(r);if("string"!==typeof n&&(e.isEncoding===t||!t(r)))throw new Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=s,this.end=o,n=4;break;case"utf8":this.fillLast=i,n=4;break;case"base64":this.text=a,this.end=c,n=3;break;default:return this.write=u,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(n)}function n(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function i(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function o(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function a(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function l(e){return e&&e.length?this.write(e):""}return dI.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},r.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var s=n(t[i]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--i<r||-2===s)return 0;if(s=n(t[i]),s>=0)return s>0&&(e.lastNeed=s-2),s;if(--i<r||-2===s)return 0;if(s=n(t[i]),s>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},dI}function vI(){if($C)return ZC;$C=1;var e=HC().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return ZC=function r(n,i,s){if("function"===typeof i)return r(n,null,i);i||(i={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||t);var o=i.readable||!1!==i.readable&&n.readable,a=i.writable||!1!==i.writable&&n.writable,c=function(){n.writable||l()},u=n._writableState&&n._writableState.finished,l=function(){a=!1,u=!0,o||s.call(n)},h=n._readableState&&n._readableState.endEmitted,d=function(){o=!1,h=!0,a||s.call(n)},p=function(e){s.call(n,e)},f=function(){var t;return o&&!h?(n._readableState&&n._readableState.ended||(t=new e),s.call(n,t)):a&&!u?(n._writableState&&n._writableState.ended||(t=new e),s.call(n,t)):void 0},v=function(){n.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(n)?a&&!n._writableState&&(n.on("end",c),n.on("close",c)):(n.on("complete",l),n.on("abort",f),n.req?v():n.on("request",v)),n.on("end",d),n.on("finish",l),!1!==i.error&&n.on("error",p),n.on("close",f),function(){n.removeListener("complete",l),n.removeListener("abort",f),n.removeListener("request",v),n.req&&n.req.removeListener("finish",l),n.removeListener("end",c),n.removeListener("close",c),n.removeListener("finish",l),n.removeListener("end",d),n.removeListener("error",p),n.removeListener("close",f)}},ZC}function mI(){if(tI)return eI;var e;function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}tI=1;var r=vI(),n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function l(e,t){return{value:e,done:t}}function h(e){var t=e[n];if(null!==t){var r=e[u].read();null!==r&&(e[a]=null,e[n]=null,e[i]=null,t(l(r,!1)))}}function d(e){lb.nextTick(h,e)}var p=Object.getPrototypeOf((function(){})),f=Object.setPrototypeOf((t(e={get stream(){return this[u]},next:function(){var e=this,t=this[s];if(null!==t)return Promise.reject(t);if(this[o])return Promise.resolve(l(void 0,!0));if(this[u].destroyed)return new Promise((function(t,r){lb.nextTick((function(){e[s]?r(e[s]):t(l(void 0,!0))}))}));var r,n=this[a];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[o]?r(l(void 0,!0)):t[c](r,n)}),n)}}(n,this));else{var i=this[u].read();if(null!==i)return Promise.resolve(l(i,!1));r=new Promise(this[c])}return this[a]=r,r}},Symbol.asyncIterator,(function(){return this})),t(e,"return",(function(){var e=this;return new Promise((function(t,r){e[u].destroy(null,(function(e){e?r(e):t(l(void 0,!0))}))}))})),e),p);return eI=function(e){var h,p=Object.create(f,(t(h={},u,{value:e,writable:!0}),t(h,n,{value:null,writable:!0}),t(h,i,{value:null,writable:!0}),t(h,s,{value:null,writable:!0}),t(h,o,{value:e._readableState.endEmitted,writable:!0}),t(h,c,{value:function(e,t){var r=p[u].read();r?(p[a]=null,p[n]=null,p[i]=null,e(l(r,!1))):(p[n]=e,p[i]=t)},writable:!0}),h));return p[a]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=p[i];return null!==t&&(p[a]=null,p[n]=null,p[i]=null,t(e)),void(p[s]=e)}var r=p[n];null!==r&&(p[a]=null,p[n]=null,p[i]=null,r(l(void 0,!0))),p[o]=!0})),e.on("readable",d.bind(null,p)),p}}function gI(){if(sI)return iI;var e;sI=1,iI=b,b.ReadableState=S,HS.EventEmitter;var t=function(e,t){return e.listeners(t).length},r=pb(),n=Sb().Buffer,i=PS.Uint8Array||function(){};var s,o=OC();s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,c,u,l=DC(),h=NC(),d=KC().getHighWaterMark,p=HC().codes,f=p.ERR_INVALID_ARG_TYPE,v=p.ERR_STREAM_PUSH_AFTER_EOF,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;GS(b,r);var y=h.errorOrDestroy,w=["error","close","destroy","pause","resume"];function S(t,r,n){e=e||QC(),t=t||{},"boolean"!==typeof n&&(n=r instanceof e),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=d(this,t,"readableHighWaterMark",n),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=fI().StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function b(t){if(e=e||QC(),!(this instanceof b))return new b(t);var n=this instanceof e;this._readableState=new S(t,this,n),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function C(e,t,r,o,a){s("readableAddChunk",t);var c,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(s("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,u);else if(a||(c=function(e,t){var r;s=t,n.isBuffer(s)||s instanceof i||"string"===typeof t||void 0===t||e.objectMode||(r=new f("chunk",["string","Buffer","Uint8Array"],t));var s;return r}(u,t)),c)y(e,c);else if(u.objectMode||t&&t.length>0)if("string"===typeof t||u.objectMode||Object.getPrototypeOf(t)===n.prototype||(t=function(e){return n.from(e)}(t)),o)u.endEmitted?y(e,new g):I(e,u,t,!0);else if(u.ended)y(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):_(e,u)):I(e,u,t,!1)}else o||(u.reading=!1,_(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),_(e,t)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=h.destroy,b.prototype._undestroy=h.undestroy,b.prototype._destroy=function(e,t){t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=n.from(e,t),t=""),r=!0),C(this,e,t,!1,r)},b.prototype.unshift=function(e){return C(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){a||(a=fI().StringDecoder);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var E=1073741824;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,lb.nextTick(R,e))}function R(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function _(e,t){t.readingMore||(t.readingMore=!0,lb.nextTick(A,e,t))}function A(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(s("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function k(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function x(e){s("readable nexttick read 0"),e.read(0)}function O(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,lb.nextTick(L,t,e))}function L(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}return b.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):P(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&M(this),null;var n,i=t.needReadable;return s("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",i=!0),t.ended||t.reading?s("reading or ended",i=!1):i&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){y(this,new m("_read()"))},b.prototype.pipe=function(e,r){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,r);var o=(!r||!1!==r.end)&&e!==lb.stdout&&e!==lb.stderr?c:v;function a(t,r){s("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,s("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",u),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",h),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){s("onend"),e.end()}i.endEmitted?lb.nextTick(o):n.once("end",o),e.on("unpipe",a);var u=function(e){return function(){var r=e._readableState;s("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&t(e,"data")&&(r.flowing=!0,D(e))}}(n);e.on("drain",u);var l=!1;function h(t){s("ondata");var r=e.write(t);s("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!l&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(r){s("onerror",r),v(),e.removeListener("error",d),0===t(e,"error")&&y(e,r)}function p(){e.removeListener("finish",f),v()}function f(){s("onfinish"),e.removeListener("close",p),v()}function v(){s("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",f),e.emit("pipe",n),i.flowing||(s("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var n=r.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,s("on readable",i.length,i.reading),i.length?P(this):i.reading||lb.nextTick(x,this))),n},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&lb.nextTick(k,this),n},b.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||lb.nextTick(k,this),t},b.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,lb.nextTick(O,e,t))}(this,e)),e.paused=!1,this},b.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(s("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(s("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<w.length;o++)e.on(w[o],this.emit.bind(this,w[o]));return this._read=function(t){s("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=mI()),c(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),b._fromList=N,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(b.from=function(e,t){return void 0===u&&(u=nI?rI:(nI=1,rI=function(){throw new Error("Readable.from is not available in the browser")})),u(b,e,t)}),iI}function yI(){if(aI)return oI;aI=1,oI=a;var e=HC().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,s=QC();function o(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush((function(t,r){u(e,t,r)}))}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new i;if(e._transformState.transforming)throw new n;return e.push(null)}return GS(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,r,n){n(new t("_transform()"))},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},a.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,(function(e){t(e)}))},oI}var wI=bI,SI=HS.EventEmitter;function bI(){SI.call(this)}GS(bI,SI),bI.Readable=gI(),bI.Writable=JC(),bI.Duplex=QC(),bI.Transform=yI(),bI.PassThrough=function(){if(uI)return cI;uI=1,cI=t;var e=yI();function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return GS(t,e),t.prototype._transform=function(e,t,r){r(null,e)},cI}(),bI.finished=vI(),bI.pipeline=function(){if(hI)return lI;var e;hI=1;var t=HC().codes,r=t.ERR_MISSING_ARGS,n=t.ERR_STREAM_DESTROYED;function i(e){if(e)throw e}function s(e){e()}function o(e,t){return e.pipe(t)}return lI=function(){for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];var u,l=function(e){return e.length?"function"!==typeof e[e.length-1]?i:e.pop():i}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new r("streams");var h=a.map((function(t,r){var i=r<a.length-1;return function(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),void 0===e&&(e=vI()),e(t,{readable:r,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var a=!1;return function(e){if(!o&&!a)return a=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(t)?t.abort():"function"===typeof t.destroy?t.destroy():void s(e||new n("pipe"))}}(t,i,r>0,(function(e){u||(u=e),e&&h.forEach(s),i||(h.forEach(s),l(u))}))}));return a.reduce(o)},lI}(),bI.Stream=bI,bI.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",a));var s=!1;function o(){s||(s=!0,e.end())}function a(){s||(s=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(u(),0===SI.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",c),e.on("error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e},function(e){e.parser=function(e,t){return new n(e,t)},e.SAXParser=n,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(t,i){if(!(this instanceof n))return new n(t,i);var s=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(s),s.q=s.c="",s.bufferCheckPosition=e.MAX_BUFFER_LENGTH,s.opt=i||{},s.opt.lowercase=s.opt.lowercase||s.opt.lowercasetags,s.looseCase=s.opt.lowercase?"toLowerCase":"toUpperCase",s.tags=[],s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.strict=!!t,s.noscript=!(!t&&!s.opt.noscript),s.state=S.BEGIN,s.strictEntities=s.opt.strictEntities,s.ENTITIES=s.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),s.attribList=[],s.opt.xmlns&&(s.ns=Object.create(l)),s.trackPosition=!1!==s.opt.position,s.trackPosition&&(s.position=s.line=s.column=0),C(s,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),n.prototype={end:function(){R(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return P(n,"Cannot write after close. Assign an onready handler.");if(null===t)return R(n);"object"===typeof t&&(t=t.toString());for(var i=0,s="";s=L(t,i++),n.c=s,s;)switch(n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++),n.state){case S.BEGIN:if(n.state=S.BEGIN_WHITESPACE,"\ufeff"===s)continue;M(n,s);continue;case S.BEGIN_WHITESPACE:M(n,s);continue;case S.TEXT:if(n.sawRoot&&!n.closedRoot){for(var c=i-1;s&&"<"!==s&&"&"!==s;)(s=L(t,i++))&&n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(c,i-1)}"<"!==s||n.sawRoot&&n.closedRoot&&!n.strict?(v(s)||n.sawRoot&&!n.closedRoot||_(n,"Text data outside of root node."),"&"===s?n.state=S.TEXT_ENTITY:n.textNode+=s):(n.state=S.OPEN_WAKA,n.startTagPosition=n.position);continue;case S.SCRIPT:"<"===s?n.state=S.SCRIPT_ENDING:n.script+=s;continue;case S.SCRIPT_ENDING:"/"===s?n.state=S.CLOSE_TAG:(n.script+="<"+s,n.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===s)n.state=S.SGML_DECL,n.sgmlDecl="";else if(v(s));else if(y(h,s))n.state=S.OPEN_TAG,n.tagName=s;else if("/"===s)n.state=S.CLOSE_TAG,n.tagName="";else if("?"===s)n.state=S.PROC_INST,n.procInstName=n.procInstBody="";else{if(_(n,"Unencoded <"),n.startTagPosition+1<n.position){var u=n.position-n.startTagPosition;s=new Array(u).join(" ")+s}n.textNode+="<"+s,n.state=S.TEXT}continue;case S.SGML_DECL:(n.sgmlDecl+s).toUpperCase()===o?(I(n,"onopencdata"),n.state=S.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+s==="--"?(n.state=S.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+s).toUpperCase()===a?(n.state=S.DOCTYPE,(n.doctype||n.sawRoot)&&_(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===s?(I(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=S.TEXT):m(s)?(n.state=S.SGML_DECL_QUOTED,n.sgmlDecl+=s):n.sgmlDecl+=s;continue;case S.SGML_DECL_QUOTED:s===n.q&&(n.state=S.SGML_DECL,n.q=""),n.sgmlDecl+=s;continue;case S.DOCTYPE:">"===s?(n.state=S.TEXT,I(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=s,"["===s?n.state=S.DOCTYPE_DTD:m(s)&&(n.state=S.DOCTYPE_QUOTED,n.q=s));continue;case S.DOCTYPE_QUOTED:n.doctype+=s,s===n.q&&(n.q="",n.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:n.doctype+=s,"]"===s?n.state=S.DOCTYPE:m(s)&&(n.state=S.DOCTYPE_DTD_QUOTED,n.q=s);continue;case S.DOCTYPE_DTD_QUOTED:n.doctype+=s,s===n.q&&(n.state=S.DOCTYPE_DTD,n.q="");continue;case S.COMMENT:"-"===s?n.state=S.COMMENT_ENDING:n.comment+=s;continue;case S.COMMENT_ENDING:"-"===s?(n.state=S.COMMENT_ENDED,n.comment=T(n.opt,n.comment),n.comment&&I(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+s,n.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==s?(_(n,"Malformed comment"),n.comment+="--"+s,n.state=S.COMMENT):n.state=S.TEXT;continue;case S.CDATA:"]"===s?n.state=S.CDATA_ENDING:n.cdata+=s;continue;case S.CDATA_ENDING:"]"===s?n.state=S.CDATA_ENDING_2:(n.cdata+="]"+s,n.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===s?(n.cdata&&I(n,"oncdata",n.cdata),I(n,"onclosecdata"),n.cdata="",n.state=S.TEXT):"]"===s?n.cdata+="]":(n.cdata+="]]"+s,n.state=S.CDATA);continue;case S.PROC_INST:"?"===s?n.state=S.PROC_INST_ENDING:v(s)?n.state=S.PROC_INST_BODY:n.procInstName+=s;continue;case S.PROC_INST_BODY:if(!n.procInstBody&&v(s))continue;"?"===s?n.state=S.PROC_INST_ENDING:n.procInstBody+=s;continue;case S.PROC_INST_ENDING:">"===s?(I(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=S.TEXT):(n.procInstBody+="?"+s,n.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:y(d,s)?n.tagName+=s:(A(n),">"===s?O(n):"/"===s?n.state=S.OPEN_TAG_SLASH:(v(s)||_(n,"Invalid character in tag name"),n.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===s?(O(n,!0),D(n)):(_(n,"Forward-slash in opening tag not followed by >"),n.state=S.ATTRIB);continue;case S.ATTRIB:if(v(s))continue;">"===s?O(n):"/"===s?n.state=S.OPEN_TAG_SLASH:y(h,s)?(n.attribName=s,n.attribValue="",n.state=S.ATTRIB_NAME):_(n,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===s?n.state=S.ATTRIB_VALUE:">"===s?(_(n,"Attribute without value"),n.attribValue=n.attribName,x(n),O(n)):v(s)?n.state=S.ATTRIB_NAME_SAW_WHITE:y(d,s)?n.attribName+=s:_(n,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===s)n.state=S.ATTRIB_VALUE;else{if(v(s))continue;_(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",I(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===s?O(n):y(h,s)?(n.attribName=s,n.state=S.ATTRIB_NAME):(_(n,"Invalid attribute name"),n.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(v(s))continue;m(s)?(n.q=s,n.state=S.ATTRIB_VALUE_QUOTED):(_(n,"Unquoted attribute value"),n.state=S.ATTRIB_VALUE_UNQUOTED,n.attribValue=s);continue;case S.ATTRIB_VALUE_QUOTED:if(s!==n.q){"&"===s?n.state=S.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=s;continue}x(n),n.q="",n.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:v(s)?n.state=S.ATTRIB:">"===s?O(n):"/"===s?n.state=S.OPEN_TAG_SLASH:y(h,s)?(_(n,"No whitespace between attributes"),n.attribName=s,n.attribValue="",n.state=S.ATTRIB_NAME):_(n,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!g(s)){"&"===s?n.state=S.ATTRIB_VALUE_ENTITY_U:n.attribValue+=s;continue}x(n),">"===s?O(n):n.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(n.tagName)">"===s?D(n):y(d,s)?n.tagName+=s:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=S.SCRIPT):(v(s)||_(n,"Invalid tagname in closing tag"),n.state=S.CLOSE_TAG_SAW_WHITE);else{if(v(s))continue;w(h,s)?n.script?(n.script+="</"+s,n.state=S.SCRIPT):_(n,"Invalid tagname in closing tag."):n.tagName=s}continue;case S.CLOSE_TAG_SAW_WHITE:if(v(s))continue;">"===s?D(n):_(n,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var l,b;switch(n.state){case S.TEXT_ENTITY:l=S.TEXT,b="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:l=S.ATTRIB_VALUE_QUOTED,b="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:l=S.ATTRIB_VALUE_UNQUOTED,b="attribValue"}";"===s?(n[b]+=N(n),n.entity="",n.state=l):y(n.entity.length?f:p,s)?n.entity+=s:(_(n,"Invalid character in entity name"),n[b]+="&"+n.entity+s,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,s=0,o=r.length;s<o;s++){var a=t[r[s]].length;if(a>n)switch(r[s]){case"textNode":E(t);break;case"cdata":I(t,"oncdata",t.cdata),t.cdata="";break;case"script":I(t,"onscript",t.script),t.script="";break;default:P(t,"Max buffer length exceeded: "+r[s])}i=Math.max(i,a)}var c=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=c+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;E(e=this),""!==e.cdata&&(I(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(I(e,"onscript",e.script),e.script="")}};try{t=wI.Stream}catch(F){t=function(){}}var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,r){if(!(this instanceof s))return new s(e,r);t.apply(this),this._parser=new n(e,r),this.writable=!0,this.readable=!0;var o=this;this._parser.onend=function(){o.emit("end")},this._parser.onerror=function(e){o.emit("error",e),o._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(o,"on"+e,{get:function(){return o._parser["on"+e]},set:function(t){if(!t)return o.removeAllListeners(e),o._parser["on"+e]=t,t;o.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"===typeof Buffer&&"function"===typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=fI().StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===i.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var o="[CDATA[",a="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",l={xml:c,xmlns:u},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function m(e){return'"'===e||"'"===e}function g(e){return">"===e||v(e)}function y(e,t){return e.test(t)}function w(e,t){return!y(e,t)}var S=0;for(var b in e.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],n="number"===typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n})),e.STATE)e.STATE[e.STATE[b]]=b;function C(e,t,r){e[t]&&e[t](r)}function I(e,t,r){e.textNode&&E(e),C(e,t,r)}function E(e){e.textNode=T(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function T(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function P(e,t){return E(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function R(e){return e.sawRoot&&!e.closedRoot&&_(e,"Unclosed root tag"),e.state!==S.BEGIN&&e.state!==S.BEGIN_WHITESPACE&&e.state!==S.TEXT&&P(e,"Unexpected end"),E(e),e.c="",e.closed=!0,C(e,"onend"),n.call(e,e.strict,e.opt),e}function _(e,t){if("object"!==typeof e||!(e instanceof n))throw new Error("bad call to strictFail");e.strict&&P(e,t)}function A(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,I(e,"onopentagstart",r)}function k(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function x(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=k(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==c)_(e,"xml: prefix must be bound to "+c+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==u)_(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var i=e.tag,s=e.tags[e.tags.length-1]||e;i.ns===s.ns&&(i.ns=Object.create(s.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,I(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function O(e,t){if(e.opt.xmlns){var r=e.tag,n=k(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(_(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){I(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var s=0,o=e.attribList.length;s<o;s++){var a=e.attribList[s],c=a[0],u=a[1],l=k(c,!0),h=l.prefix,d=l.local,p=""===h?"":r.ns[h]||"",f={name:c,value:u,prefix:h,local:d,uri:p};h&&"xmlns"!==h&&!p&&(_(e,"Unbound namespace prefix: "+JSON.stringify(h)),f.uri=h),e.tag.attributes[c]=f,I(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),I(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=S.TEXT:e.state=S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function D(e){if(!e.tagName)return _(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=S.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=S.SCRIPT);I(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)_(e,"Unexpected close tag");if(t<0)return _(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=S.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,I(e,"onclosetag",e.tagName);var o={};for(var a in s.ns)o[a]=s.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach((function(t){var r=s.ns[t];I(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=S.TEXT}function N(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r?(_(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function M(e,t){"<"===t?(e.state=S.OPEN_WAKA,e.startTagPosition=e.position):v(t)||(_(e,"Non-whitespace before first tag."),e.textNode=t,e.state=S.TEXT)}function L(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}S=e.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,r=function(){var r,n,i=[],s=-1,o=arguments.length;if(!o)return"";for(var a="";++s<o;){var c=Number(arguments[s]);if(!isFinite(c)||c<0||c>1114111||t(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?i.push(c):(r=55296+((c-=65536)>>10),n=c%1024+56320,i.push(r,n)),(s+1===o||i.length>16384)&&(a+=e.apply(null,i),i.length=0)}return a};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}()}(AS);var CI,II,EI=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},TI=EI,PI={copyOptions:function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},ensureFlagExists:function(e,t){e in t&&"boolean"===typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!==typeof e.spaces&&"string"!==typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"===typeof e.alwaysArray||TI(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"===typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},RI=AS,_I=PI,AI=EI;function kI(e){var t=Number(e);if(!isNaN(t))return t;var r=e.toLowerCase();return"true"===r||"false"!==r&&e}function xI(e,t){var r;if(CI.compact){if(!II[CI[e+"Key"]]&&(AI(CI.alwaysArray)?-1!==CI.alwaysArray.indexOf(CI[e+"Key"]):CI.alwaysArray)&&(II[CI[e+"Key"]]=[]),II[CI[e+"Key"]]&&!AI(II[CI[e+"Key"]])&&(II[CI[e+"Key"]]=[II[CI[e+"Key"]]]),e+"Fn"in CI&&"string"===typeof t&&(t=CI[e+"Fn"](t,II)),"instruction"===e&&("instructionFn"in CI||"instructionNameFn"in CI))for(r in t)if(t.hasOwnProperty(r))if("instructionFn"in CI)t[r]=CI.instructionFn(t[r],r,II);else{var n=t[r];delete t[r],t[CI.instructionNameFn(r,n,II)]=n}AI(II[CI[e+"Key"]])?II[CI[e+"Key"]].push(t):II[CI[e+"Key"]]=t}else{II[CI.elementsKey]||(II[CI.elementsKey]=[]);var i={};if(i[CI.typeKey]=e,"instruction"===e){for(r in t)if(t.hasOwnProperty(r))break;i[CI.nameKey]="instructionNameFn"in CI?CI.instructionNameFn(r,t,II):r,CI.instructionHasAttributes?(i[CI.attributesKey]=t[r][CI.attributesKey],"instructionFn"in CI&&(i[CI.attributesKey]=CI.instructionFn(i[CI.attributesKey],r,II))):("instructionFn"in CI&&(t[r]=CI.instructionFn(t[r],r,II)),i[CI.instructionKey]=t[r])}else e+"Fn"in CI&&(t=CI[e+"Fn"](t,II)),i[CI[e+"Key"]]=t;CI.addParent&&(i[CI.parentKey]=II),II[CI.elementsKey].push(i)}}function OI(e){var t;if("attributesFn"in CI&&e&&(e=CI.attributesFn(e,II)),(CI.trim||"attributeValueFn"in CI||"attributeNameFn"in CI||CI.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(CI.trim&&(e[t]=e[t].trim()),CI.nativeTypeAttributes&&(e[t]=kI(e[t])),"attributeValueFn"in CI&&(e[t]=CI.attributeValueFn(e[t],t,II)),"attributeNameFn"in CI)){var r=e[t];delete e[t],e[CI.attributeNameFn(t,e[t],II)]=r}return e}function DI(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||CI.instructionHasAttributes)){for(var r,n=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(r=n.exec(e.body));)t[r[1]]=r[2]||r[3]||r[4];t=OI(t)}if("xml"===e.name.toLowerCase()){if(CI.ignoreDeclaration)return;II[CI.declarationKey]={},Object.keys(t).length&&(II[CI.declarationKey][CI.attributesKey]=t),CI.addParent&&(II[CI.declarationKey][CI.parentKey]=II)}else{if(CI.ignoreInstruction)return;CI.trim&&(e.body=e.body.trim());var i={};CI.instructionHasAttributes&&Object.keys(t).length?(i[e.name]={},i[e.name][CI.attributesKey]=t):i[e.name]=e.body,xI("instruction",i)}}function NI(e,t){var r;if("object"===typeof e&&(t=e.attributes,e=e.name),t=OI(t),"elementNameFn"in CI&&(e=CI.elementNameFn(e,II)),CI.compact){var n;if(r={},!CI.ignoreAttributes&&t&&Object.keys(t).length)for(n in r[CI.attributesKey]={},t)t.hasOwnProperty(n)&&(r[CI.attributesKey][n]=t[n]);!(e in II)&&(AI(CI.alwaysArray)?-1!==CI.alwaysArray.indexOf(e):CI.alwaysArray)&&(II[e]=[]),II[e]&&!AI(II[e])&&(II[e]=[II[e]]),AI(II[e])?II[e].push(r):II[e]=r}else II[CI.elementsKey]||(II[CI.elementsKey]=[]),(r={})[CI.typeKey]="element",r[CI.nameKey]=e,!CI.ignoreAttributes&&t&&Object.keys(t).length&&(r[CI.attributesKey]=t),CI.alwaysChildren&&(r[CI.elementsKey]=[]),II[CI.elementsKey].push(r);r[CI.parentKey]=II,II=r}function MI(e){CI.ignoreText||(e.trim()||CI.captureSpacesBetweenElements)&&(CI.trim&&(e=e.trim()),CI.nativeType&&(e=kI(e)),CI.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),xI("text",e))}function LI(e){CI.ignoreComment||(CI.trim&&(e=e.trim()),xI("comment",e))}function FI(e){var t=II[CI.parentKey];CI.addParent||delete II[CI.parentKey],II=t}function zI(e){CI.ignoreCdata||(CI.trim&&(e=e.trim()),xI("cdata",e))}function BI(e){CI.ignoreDoctype||(e=e.replace(/^ /,""),CI.trim&&(e=e.trim()),xI("doctype",e))}function jI(e){e.note=e}var UI=function(e,t){var r=RI.parser(!0,{}),n={};if(II=n,CI=function(e){return CI=_I.copyOptions(e),_I.ensureFlagExists("ignoreDeclaration",CI),_I.ensureFlagExists("ignoreInstruction",CI),_I.ensureFlagExists("ignoreAttributes",CI),_I.ensureFlagExists("ignoreText",CI),_I.ensureFlagExists("ignoreComment",CI),_I.ensureFlagExists("ignoreCdata",CI),_I.ensureFlagExists("ignoreDoctype",CI),_I.ensureFlagExists("compact",CI),_I.ensureFlagExists("alwaysChildren",CI),_I.ensureFlagExists("addParent",CI),_I.ensureFlagExists("trim",CI),_I.ensureFlagExists("nativeType",CI),_I.ensureFlagExists("nativeTypeAttributes",CI),_I.ensureFlagExists("sanitize",CI),_I.ensureFlagExists("instructionHasAttributes",CI),_I.ensureFlagExists("captureSpacesBetweenElements",CI),_I.ensureAlwaysArrayExists(CI),_I.ensureKeyExists("declaration",CI),_I.ensureKeyExists("instruction",CI),_I.ensureKeyExists("attributes",CI),_I.ensureKeyExists("text",CI),_I.ensureKeyExists("comment",CI),_I.ensureKeyExists("cdata",CI),_I.ensureKeyExists("doctype",CI),_I.ensureKeyExists("type",CI),_I.ensureKeyExists("name",CI),_I.ensureKeyExists("elements",CI),_I.ensureKeyExists("parent",CI),_I.checkFnExists("doctype",CI),_I.checkFnExists("instruction",CI),_I.checkFnExists("cdata",CI),_I.checkFnExists("comment",CI),_I.checkFnExists("text",CI),_I.checkFnExists("instructionName",CI),_I.checkFnExists("elementName",CI),_I.checkFnExists("attributeName",CI),_I.checkFnExists("attributeValue",CI),_I.checkFnExists("attributes",CI),CI}(t),r.opt={strictEntities:!0},r.onopentag=NI,r.ontext=MI,r.oncomment=LI,r.onclosetag=FI,r.onerror=jI,r.oncdata=zI,r.ondoctype=BI,r.onprocessinginstruction=DI,r.write(e).close(),n[CI.elementsKey]){var i=n[CI.elementsKey];delete n[CI.elementsKey],n[CI.elementsKey]=i,delete n.text}return n},VI=PI,qI=UI;var WI,HI,KI=PI,GI=EI;function JI(e,t,r){return(!r&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function QI(e,t,r){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,HI,WI));var n,i,s,o,a=[];for(n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&(o=t.noQuotesForNativeAttributes&&"string"!==typeof e[n]?"":'"',i=(i=""+e[n]).replace(/"/g,"&quot;"),s="attributeNameFn"in t?t.attributeNameFn(n,i,HI,WI):n,a.push(t.spaces&&t.indentAttributes?JI(t,r+1,!1):" "),a.push(s+"="+o+("attributeValueFn"in t?t.attributeValueFn(i,n,HI,WI):i)+o));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&a.push(JI(t,r,!1)),a.join("")}function YI(e,t,r){return WI=e,HI="xml",t.ignoreDeclaration?"":"<?xml"+QI(e[t.attributesKey],t,r)+"?>"}function XI(e,t,r){if(t.ignoreInstruction)return"";var n;for(n in e)if(e.hasOwnProperty(n))break;var i="instructionNameFn"in t?t.instructionNameFn(n,e[n],HI,WI):n;if("object"===typeof e[n])return WI=e,HI=i,"<?"+i+QI(e[n][t.attributesKey],t,r)+"?>";var s=e[n]?e[n]:"";return"instructionFn"in t&&(s=t.instructionFn(s,n,HI,WI)),"<?"+i+(s?" "+s:"")+"?>"}function ZI(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,HI,WI):e)+"--\x3e"}function $I(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,HI,WI):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function eE(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,HI,WI):e)+">"}function tE(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,HI,WI):e)}function rE(e,t,r,n){return e.reduce((function(e,i){var s=JI(t,r,n&&!e);switch(i.type){case"element":return e+s+function(e,t,r){WI=e,HI=e.name;var n=[],i="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;n.push("<"+i),e[t.attributesKey]&&n.push(QI(e[t.attributesKey],t,r));var s=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return s||(s="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),s?(n.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(n.push(rE(e[t.elementsKey],t,r+1)),WI=e,HI=e.name),n.push(t.spaces&&function(e,t){var r;if(e.elements&&e.elements.length)for(r=0;r<e.elements.length;++r)switch(e.elements[r][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(r+1).join(t.spaces):""),n.push("</"+i+">")):n.push("/>"),n.join("")}(i,t,r);case"comment":return e+s+ZI(i[t.commentKey],t);case"doctype":return e+s+eE(i[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?s:"")+$I(i[t.cdataKey],t);case"text":return e+(t.indentText?s:"")+tE(i[t.textKey],t);case"instruction":var o={};return o[i[t.nameKey]]=i[t.attributesKey]?i:i[t.instructionKey],e+(t.indentInstruction?s:"")+XI(o,t,r)}}),"")}function nE(e,t,r){var n;for(n in e)if(e.hasOwnProperty(n))switch(n){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||r)return!0;break;case t.cdataKey:if(t.indentCdata||r)return!0;break;case t.instructionKey:if(t.indentInstruction||r)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function iE(e,t,r,n,i){WI=e,HI=t;var s="elementNameFn"in r?r.elementNameFn(t,e):t;if("undefined"===typeof e||null===e||""===e)return"fullTagEmptyElementFn"in r&&r.fullTagEmptyElementFn(t,e)||r.fullTagEmptyElement?"<"+s+"></"+s+">":"<"+s+"/>";var o=[];if(t){if(o.push("<"+s),"object"!==typeof e)return o.push(">"+tE(e,r)+"</"+s+">"),o.join("");e[r.attributesKey]&&o.push(QI(e[r.attributesKey],r,n));var a=nE(e,r,!0)||e[r.attributesKey]&&"preserve"===e[r.attributesKey]["xml:space"];if(a||(a="fullTagEmptyElementFn"in r?r.fullTagEmptyElementFn(t,e):r.fullTagEmptyElement),!a)return o.push("/>"),o.join("");o.push(">")}return o.push(sE(e,r,n+1,!1)),WI=e,HI=t,t&&o.push((i?JI(r,n,!1):"")+"</"+s+">"),o.join("")}function sE(e,t,r,n){var i,s,o,a=[];for(s in e)if(e.hasOwnProperty(s))for(o=GI(e[s])?e[s]:[e[s]],i=0;i<o.length;++i){switch(s){case t.declarationKey:a.push(YI(o[i],t,r));break;case t.instructionKey:a.push((t.indentInstruction?JI(t,r,n):"")+XI(o[i],t,r));break;case t.attributesKey:case t.parentKey:break;case t.textKey:a.push((t.indentText?JI(t,r,n):"")+tE(o[i],t));break;case t.cdataKey:a.push((t.indentCdata?JI(t,r,n):"")+$I(o[i],t));break;case t.doctypeKey:a.push(JI(t,r,n)+eE(o[i],t));break;case t.commentKey:a.push(JI(t,r,n)+ZI(o[i],t));break;default:a.push(JI(t,r,n)+iE(o[i],s,t,r,nE(o[i],t)))}n=n&&!a.length}return a.join("")}var oE=function(e,t){t=function(e){var t=KI.copyOptions(e);return KI.ensureFlagExists("ignoreDeclaration",t),KI.ensureFlagExists("ignoreInstruction",t),KI.ensureFlagExists("ignoreAttributes",t),KI.ensureFlagExists("ignoreText",t),KI.ensureFlagExists("ignoreComment",t),KI.ensureFlagExists("ignoreCdata",t),KI.ensureFlagExists("ignoreDoctype",t),KI.ensureFlagExists("compact",t),KI.ensureFlagExists("indentText",t),KI.ensureFlagExists("indentCdata",t),KI.ensureFlagExists("indentAttributes",t),KI.ensureFlagExists("indentInstruction",t),KI.ensureFlagExists("fullTagEmptyElement",t),KI.ensureFlagExists("noQuotesForNativeAttributes",t),KI.ensureSpacesExists(t),"number"===typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),KI.ensureKeyExists("declaration",t),KI.ensureKeyExists("instruction",t),KI.ensureKeyExists("attributes",t),KI.ensureKeyExists("text",t),KI.ensureKeyExists("comment",t),KI.ensureKeyExists("cdata",t),KI.ensureKeyExists("doctype",t),KI.ensureKeyExists("type",t),KI.ensureKeyExists("name",t),KI.ensureKeyExists("elements",t),KI.checkFnExists("doctype",t),KI.checkFnExists("instruction",t),KI.checkFnExists("cdata",t),KI.checkFnExists("comment",t),KI.checkFnExists("text",t),KI.checkFnExists("instructionName",t),KI.checkFnExists("elementName",t),KI.checkFnExists("attributeName",t),KI.checkFnExists("attributeValue",t),KI.checkFnExists("attributes",t),KI.checkFnExists("fullTagEmptyElement",t),t}(t);var r=[];return WI=e,HI="_root_",t.compact?r.push(sE(e,t,0,!0)):(e[t.declarationKey]&&r.push(YI(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&r.push(rE(e[t.elementsKey],t,0,!r.length))),r.join("")},aE=oE,cE=function(e,t){var r,n,i,s;return r=function(e){var t=VI.copyOptions(e);return VI.ensureSpacesExists(t),t}(t),n=qI(e,r),s="compact"in r&&r.compact?"_parent":"parent",i="addParent"in r&&r.addParent?JSON.stringify(n,(function(e,t){return e===s?"_":t}),r.spaces):JSON.stringify(n,null,r.spaces),i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},uE={xml2js:UI,xml2json:cE,js2xml:oE,json2xml:function(e,t){e instanceof Buffer&&(e=e.toString());var r=null;if("string"===typeof e)try{r=JSON.parse(e)}catch(nA){throw new Error("The JSON structure is invalid")}else r=e;return aE(r,t)}};const lE=e=>{switch(e.type){case void 0:case"element":const t=new dE(e.name,e.attributes),r=e.elements||[];for(const e of r){const r=lE(e);void 0!==r&&t.push(r)}return t;case"text":return e.text;default:return}};class hE extends IS{}class dE extends bS{static fromXmlString(e){const t=uE.xml2js(e,{compact:!1});return lE(t)}constructor(e,t){super(e),t&&this.root.push(new hE(t))}push(e){this.root.push(e)}}class pE extends bS{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class fE extends bS{constructor(e,t){super(e),t&&(this.root=t.root)}}const vE=e=>{if(isNaN(e))throw new Error("Invalid value '".concat(e,"' specified. Must be an integer."));return Math.floor(e)},mE=e=>{const t=vE(e);if(t<0)throw new Error("Invalid value '".concat(e,"' specified. Must be a positive integer."));return t},gE=(e,t)=>{const r=2*t;if(e.length!==r||isNaN(Number("0x".concat(e))))throw new Error("Invalid hex value '".concat(e,"'. Expected ").concat(r," digit hex value"));return e},yE=e=>gE(e,1),wE=e=>{const t=e.slice(-2),r=e.substring(0,e.length-2);return"".concat(Number(r)).concat(t)},SE=e=>{const t=wE(e);if(parseFloat(t)<0)throw new Error("Invalid value '".concat(t,"' specified. Expected a positive number."));return t},bE=e=>{if("auto"===e)return e;const t="#"===e.charAt(0)?e.substring(1):e;return gE(t,3)},CE=e=>"string"===typeof e?wE(e):vE(e),IE=e=>"string"===typeof e?SE(e):mE(e),EE=e=>"string"===typeof e?SE(e):mE(e),TE=mE,PE=mE;class RE extends bS{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(e),!0!==t&&this.root.push(new TS({val:t}))}}class _E extends bS{constructor(e,t){super(e),this.root.push(new TS({val:IE(t)}))}}class AE extends bS{constructor(e,t){super(e),this.root.push(new TS({val:t}))}}const kE=(e,t)=>new DE({name:e,attributes:{value:{key:"w:val",value:t}}});class xE extends bS{constructor(e,t){super(e),this.root.push(new TS({val:t}))}}class OE extends bS{constructor(e,t){super(e),this.root.push(t)}}class DE extends bS{constructor(e){let{name:t,attributes:r,children:n}=e;super(t),r&&this.root.push(new ES(r)),n&&this.root.push(...n)}}const NE={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"};class ME extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class LE extends bS{constructor(e){super("w:jc"),this.root.push(new ME({val:e}))}}class FE extends bS{constructor(e,t){let{color:r,size:n,space:i,style:s}=t;super(e),this.root.push(new zE({style:s,color:void 0===r?void 0:bE(r),size:void 0===n?void 0:TE(n),space:void 0===i?void 0:PE(i)}))}}class zE extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const BE="single",jE="none";class UE extends CS{constructor(e){super("w:pBdr"),e.top&&this.root.push(new FE("w:top",e.top)),e.bottom&&this.root.push(new FE("w:bottom",e.bottom)),e.left&&this.root.push(new FE("w:left",e.left)),e.right&&this.root.push(new FE("w:right",e.right))}}class VE extends bS{constructor(){super("w:pBdr");const e=new FE("w:bottom",{color:"auto",space:1,style:BE,size:6});this.root.push(e)}}class qE extends bS{constructor(e){let{start:t,end:r,left:n,right:i,hanging:s,firstLine:o}=e;super("w:ind"),this.root.push(new ES({start:{key:"w:start",value:void 0===t?void 0:CE(t)},end:{key:"w:end",value:void 0===r?void 0:CE(r)},left:{key:"w:left",value:void 0===n?void 0:CE(n)},right:{key:"w:right",value:void 0===i?void 0:CE(i)},hanging:{key:"w:hanging",value:void 0===s?void 0:EE(s)},firstLine:{key:"w:firstLine",value:void 0===o?void 0:EE(o)}}))}}let WE=class extends bS{constructor(){super("w:br")}};const HE="begin",KE="end",GE="separate";class JE extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class QE extends bS{constructor(e){super("w:fldChar"),this.root.push(new JE({type:HE,dirty:e}))}}class YE extends bS{constructor(e){super("w:fldChar"),this.root.push(new JE({type:GE,dirty:e}))}}class XE extends bS{constructor(e){super("w:fldChar"),this.root.push(new JE({type:KE,dirty:e}))}}const ZE="default",$E="preserve";class eT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{space:"xml:space"})}}class tT extends bS{constructor(){super("w:instrText"),this.root.push(new eT({space:$E})),this.root.push("PAGE")}}class rT extends bS{constructor(){super("w:instrText"),this.root.push(new eT({space:$E})),this.root.push("NUMPAGES")}}class nT extends bS{constructor(){super("w:instrText"),this.root.push(new eT({space:$E})),this.root.push("SECTIONPAGES")}}class iT extends bS{constructor(){super("w:instrText"),this.root.push(new eT({space:$E})),this.root.push("SECTION")}}class sT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class oT extends bS{constructor(e){let{fill:t,color:r,type:n}=e;super("w:shd"),this.root.push(new sT({fill:void 0===t?void 0:bE(t),color:void 0===r?void 0:bE(r),type:n}))}}class aT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const cT="dot";class uT extends bS{constructor(e){super("w:em"),this.root.push(new TS({val:e}))}}class lT extends uT{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:cT)}}class hT extends bS{constructor(e){super("w:spacing"),this.root.push(new TS({val:CE(e)}))}}class dT extends bS{constructor(e){super("w:color"),this.root.push(new TS({val:bE(e)}))}}class pT extends bS{constructor(e){super("w:highlight"),this.root.push(new TS({val:e}))}}class fT extends bS{constructor(e){super("w:highlightCs"),this.root.push(new TS({val:e}))}}class vT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class mT extends bS{constructor(e,t){if(super("w:rFonts"),"string"===typeof e){const r=e;this.root.push(new vT({ascii:r,cs:r,eastAsia:r,hAnsi:r,hint:t}))}else{const t=e;this.root.push(new vT(t))}}}let gT=class extends bS{constructor(e){super("w:vertAlign"),this.root.push(new TS({val:e}))}};class yT extends gT{constructor(){super("superscript")}}class wT extends gT{constructor(){super("subscript")}}const ST="single";class bT extends bS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ST,t=arguments.length>1?arguments[1]:void 0;super("w:u"),this.root.push(new TS({val:e,color:void 0===t?void 0:bE(t)}))}}class CT extends CS{constructor(e){var t,r;if(super("w:rPr"),!e)return;void 0!==e.noProof&&this.push(new RE("w:noProof",e.noProof)),void 0!==e.bold&&this.push(new RE("w:b",e.bold)),(void 0===e.boldComplexScript&&void 0!==e.bold||e.boldComplexScript)&&this.push(new RE("w:bCs",null!=(t=e.boldComplexScript)?t:e.bold)),void 0!==e.italics&&this.push(new RE("w:i",e.italics)),(void 0===e.italicsComplexScript&&void 0!==e.italics||e.italicsComplexScript)&&this.push(new RE("w:iCs",null!=(r=e.italicsComplexScript)?r:e.italics)),e.underline&&this.push(new bT(e.underline.type,e.underline.color)),e.effect&&this.push(new AE("w:effect",e.effect)),e.emphasisMark&&this.push(new lT(e.emphasisMark.type)),e.color&&this.push(new dT(e.color)),e.kern&&this.push(new _E("w:kern",e.kern)),e.position&&this.push(new AE("w:position",e.position)),void 0!==e.size&&this.push(new _E("w:sz",e.size));const n=void 0===e.sizeComplexScript||!0===e.sizeComplexScript?e.size:e.sizeComplexScript;n&&this.push(new _E("w:szCs",n)),void 0!==e.rightToLeft&&this.push(new RE("w:rtl",e.rightToLeft)),void 0!==e.smallCaps?this.push(new RE("w:smallCaps",e.smallCaps)):void 0!==e.allCaps&&this.push(new RE("w:caps",e.allCaps)),void 0!==e.strike&&this.push(new RE("w:strike",e.strike)),void 0!==e.doubleStrike&&this.push(new RE("w:dstrike",e.doubleStrike)),e.subScript&&this.push(new wT),e.superScript&&this.push(new yT),e.style&&this.push(new AE("w:rStyle",e.style)),e.font&&("string"===typeof e.font?this.push(new mT(e.font)):"name"in e.font?this.push(new mT(e.font.name,e.font.hint)):this.push(new mT(e.font))),e.highlight&&this.push(new pT(e.highlight));const i=void 0===e.highlightComplexScript||!0===e.highlightComplexScript?e.highlight:e.highlightComplexScript;i&&this.push(new fT(i)),e.characterSpacing&&this.push(new hT(e.characterSpacing)),void 0!==e.emboss&&this.push(new RE("w:emboss",e.emboss)),void 0!==e.imprint&&this.push(new RE("w:imprint",e.imprint)),e.shading&&this.push(new oT(e.shading)),e.revision&&this.push(new IT(e.revision)),e.border&&this.push(new FE("w:bdr",e.border)),void 0!==e.snapToGrid&&this.push(new RE("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new RE("w:vanish",e.vanish)),e.specVanish&&this.push(new RE("w:specVanish",e.vanish)),void 0!==e.scale&&this.push(new xE("w:w",e.scale)),e.language&&this.push((e=>new DE({name:"w:lang",attributes:{value:{key:"w:val",value:e.value},eastAsia:{key:"w:eastAsia",value:e.eastAsia},bidirectional:{key:"w:bidi",value:e.bidirectional}}}))(e.language)),e.math&&this.push(new RE("w:oMath",e.math))}push(e){this.root.push(e)}}class IT extends bS{constructor(e){super("w:rPrChange"),this.root.push(new aT({id:e.id,author:e.author,date:e.date})),this.addChildElement(new CT(e))}}class ET extends bS{constructor(e){var t;return super("w:t"),"string"===typeof e?(this.root.push(new eT({space:$E})),this.root.push(e),this):(this.root.push(new eT({space:null!=(t=e.space)?t:ZE})),this.root.push(e.text),this)}}const TT="CURRENT",PT="TOTAL_PAGES",RT="TOTAL_PAGES_IN_SECTION",_T="SECTION";class AT extends bS{constructor(e){if(super("w:r"),gS(this,"properties"),this.properties=new CT(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new WE);if(e.children)for(const t of e.children)if("string"!==typeof t)this.root.push(t);else switch(t){case TT:this.root.push(new QE),this.root.push(new tT),this.root.push(new YE),this.root.push(new XE);break;case PT:this.root.push(new QE),this.root.push(new rT),this.root.push(new YE),this.root.push(new XE);break;case RT:this.root.push(new QE),this.root.push(new nT),this.root.push(new YE),this.root.push(new XE);break;case _T:this.root.push(new QE),this.root.push(new iT),this.root.push(new YE),this.root.push(new XE);break;default:this.root.push(new ET(t))}else e.text&&this.root.push(new ET(e.text))}}class kT extends AT{constructor(e){if("string"===typeof e)return super({}),this.root.push(new ET(e)),this;super(e)}}const xT=e=>Math.floor(72*e*20),OT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return()=>++e},DT=()=>function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e}().toLowerCase(),NT=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return function(){let r="",n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;for(;n--;)r+=e[Math.random()*e.length|0];return r}}("1234567890abcdef",e)();class MT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class LT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class FT extends bS{constructor(e){let{id:t,initials:r,author:n,date:i=new Date,children:s}=e;super("w:comment"),this.root.push(new MT({id:t,initials:r,author:n,date:i.toISOString()}));for(const o of s)this.root.push(o)}}class zT extends bS{constructor(e){let{children:t}=e;super("w:comments"),this.root.push(new LT({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const r of t)this.root.push(new FT(r))}}class BT extends bS{constructor(){super("w:pageBreakBefore")}}const jT="auto";class UT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule"})}}class VT extends bS{constructor(e){super("w:spacing"),this.root.push(new UT(e))}}let qT=class extends bS{constructor(e){super("w:pStyle"),this.root.push(new TS({val:e}))}};class WT extends bS{constructor(e){super("w:tabs");for(const t of e)this.root.push(new JT(t))}}const HT="left",KT="right";class GT extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class JT extends bS{constructor(e){let{type:t,position:r,leader:n}=e;super("w:tab"),this.root.push(new GT({val:t,pos:r,leader:n}))}}class QT extends bS{constructor(e,t){super("w:numPr"),this.root.push(new YT(t)),this.root.push(new XT(e))}}class YT extends bS{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new TS({val:e}))}}class XT extends bS{constructor(e){super("w:numId"),this.root.push(new TS({val:"string"===typeof e?"{".concat(e,"}"):e}))}}class ZT extends bS{constructor(){super(...arguments),gS(this,"fileChild",Symbol())}}class $T extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const eP="External";class tP extends bS{constructor(e,t,r,n){super("Relationship"),this.root.push(new $T({id:e,type:t,target:r,targetMode:n}))}}class rP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class nP extends bS{constructor(e,t,r){super("w:hyperlink"),gS(this,"linkId"),this.linkId=t;const n={history:1,anchor:r||void 0,id:r?void 0:"rId".concat(this.linkId)},i=new rP(n);this.root.push(i),e.forEach((e=>{this.root.push(e)}))}}class iP extends bS{constructor(e){super("w:externalHyperlink"),this.options=e}}class sP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class oP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{id:"w:id"})}}class aP{constructor(e){gS(this,"bookmarkUniqueNumericId",OT()),gS(this,"start"),gS(this,"children"),gS(this,"end");const t=this.bookmarkUniqueNumericId();this.start=new cP(e.id,t),this.children=e.children,this.end=new uP(t)}}class cP extends bS{constructor(e,t){super("w:bookmarkStart");const r=new sP({name:e,id:t});this.root.push(r)}}class uP extends bS{constructor(e){super("w:bookmarkEnd");const t=new oP({id:e});this.root.push(t)}}class lP extends bS{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new TS({val:e}))}}class hP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{verticalAlign:"w:val"})}}class dP extends bS{constructor(e){super("w:vAlign"),this.root.push(new hP({verticalAlign:e}))}}const pP="default",fP="first",vP="even";class mP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const gP="w:headerReference",yP="w:footerReference";class wP extends bS{constructor(e,t){super(e),this.root.push(new mP({type:t.type||pP,id:"rId".concat(t.id)}))}}class SP extends bS{constructor(e){let{space:t,count:r,separate:n,equalWidth:i,children:s}=e;super("w:cols"),this.root.push(new ES({space:{key:"w:space",value:void 0===t?void 0:EE(t)},count:{key:"w:num",value:void 0===r?void 0:vE(r)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:i}})),!i&&s&&s.forEach((e=>this.addChildElement(e)))}}class bP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{type:"w:type",linePitch:"w:linePitch",charSpace:"w:charSpace"})}}class CP extends bS{constructor(e,t,r){super("w:docGrid"),this.root.push(new bP({type:r,linePitch:vE(e),charSpace:t?vE(t):void 0}))}}class IP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class EP extends CS{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new IP({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new IP({})),e.pageBorderTop&&this.root.push(new FE("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new FE("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new FE("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new FE("w:right",e.pageBorderRight))}}class TP extends bS{constructor(e,t,r,n,i,s,o){super("w:pgMar"),this.root.push(new ES({top:{key:"w:top",value:CE(e)},right:{key:"w:right",value:EE(t)},bottom:{key:"w:bottom",value:CE(r)},left:{key:"w:left",value:EE(n)},header:{key:"w:header",value:EE(i)},footer:{key:"w:footer",value:EE(s)},gutter:{key:"w:gutter",value:EE(o)}}))}}class PP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class RP extends bS{constructor(e){let{start:t,formatType:r,separator:n}=e;super("w:pgNumType"),this.root.push(new PP({start:void 0===t?void 0:vE(t),formatType:r,separator:n}))}}const _P="portrait",AP="landscape";class kP extends bS{constructor(e,t,r){super("w:pgSz");const n=r===AP,i=EE(e),s=EE(t);this.root.push(new ES({width:{key:"w:w",value:n?s:i},height:{key:"w:h",value:n?i:s},orientation:{key:"w:orient",value:r}}))}}class xP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class OP extends bS{constructor(e){super("w:textDirection"),this.root.push(new xP({val:e}))}}class DP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class NP extends bS{constructor(e){super("w:type"),this.root.push(new DP({val:e}))}}const MP={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},LP={WIDTH:11906,HEIGHT:16838,ORIENTATION:_P};class FP extends bS{constructor(){let{page:{size:{width:e=LP.WIDTH,height:t=LP.HEIGHT,orientation:r=LP.ORIENTATION}={},margin:{top:n=MP.TOP,right:i=MP.RIGHT,bottom:s=MP.BOTTOM,left:o=MP.LEFT,header:a=MP.HEADER,footer:c=MP.FOOTER,gutter:u=MP.GUTTER}={},pageNumbers:l={},borders:h,textDirection:d}={},grid:{linePitch:p=360,charSpace:f,type:v}={},headerWrapperGroup:m={},footerWrapperGroup:g={},lineNumbers:y,titlePage:w,verticalAlign:S,column:b,type:C}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("w:sectPr"),this.addHeaderFooterGroup(gP,m),this.addHeaderFooterGroup(yP,g),C&&this.root.push(new NP(C)),this.root.push(new kP(e,t,r)),this.root.push(new TP(n,i,s,o,a,c,u)),h&&this.root.push(new EP(h)),y&&this.root.push((e=>{let{countBy:t,start:r,restart:n,distance:i}=e;return new DE({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:void 0===t?void 0:vE(t)},start:{key:"w:start",value:void 0===r?void 0:vE(r)},restart:{key:"w:restart",value:n},distance:{key:"w:distance",value:void 0===i?void 0:EE(i)}}})})(y)),this.root.push(new RP(l)),b&&this.root.push(new SP(b)),S&&this.root.push(new dP(S)),void 0!==w&&this.root.push(new RE("w:titlePg",w)),d&&this.root.push(new OP(d)),this.root.push(new CP(p,f,v))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new wP(e,{type:pP,id:t.default.View.ReferenceId})),t.first&&this.root.push(new wP(e,{type:fP,id:t.first.View.ReferenceId})),t.even&&this.root.push(new wP(e,{type:vP,id:t.even.View.ReferenceId}))}}class zP extends bS{constructor(){super("w:body"),gS(this,"sections",[])}addSection(e){const t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new FP(e))}prepForXml(e){return 1===this.sections.length&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const t=new QP({}),r=new JP({});return r.push(e),t.addChildElement(r),t}}class BP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",aink:"xmlns:aink",am3d:"xmlns:am3d",w16cex:"xmlns:w16cex",w16cid:"xmlns:w16cid",w16:"xmlns:w16",w16sdtdh:"xmlns:w16sdtdh",w16se:"xmlns:w16se"})}}class jP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class UP extends bS{constructor(e){super("w:background"),this.root.push(new jP({color:void 0===e.color?void 0:bE(e.color),themeColor:e.themeColor,themeShade:void 0===e.themeShade?void 0:yE(e.themeShade),themeTint:void 0===e.themeTint?void 0:yE(e.themeTint)}))}}class VP extends bS{constructor(e){super("w:document"),gS(this,"body"),this.root.push(new BP({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex",Ignorable:"w14 w15 wp14"})),this.body=new zP,e.background&&this.root.push(new UP(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class qP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{xmlns:"xmlns"})}}class WP extends bS{constructor(){super("Relationships"),this.root.push(new qP({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,r,n){const i=new tP("rId".concat(e),t,r,n);return this.root.push(i),i}get RelationshipCount(){return this.root.length-1}}class HP{constructor(e){gS(this,"document"),gS(this,"relationships"),this.document=new VP(e),this.relationships=new WP}get View(){return this.document}get Relationships(){return this.relationships}}class KP extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class GP extends bS{constructor(){super("w:wordWrap"),this.root.push(new KP({val:0}))}}class JP extends CS{constructor(e){var t,r;if(super("w:pPr"),gS(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new qT(e.heading)),e.bullet&&this.push(new qT("ListParagraph")),e.numbering&&(e.style||e.heading||e.numbering.custom||this.push(new qT("ListParagraph"))),e.style&&this.push(new qT(e.style)),void 0!==e.keepNext&&this.push(new RE("w:keepNext",e.keepNext)),void 0!==e.keepLines&&this.push(new RE("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new BT),e.frame&&this.push((e=>{var t,r;return new DE({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:e.anchorLock},dropCap:{key:"w:dropCap",value:e.dropCap},width:{key:"w:w",value:e.width},height:{key:"w:h",value:e.height},x:{key:"w:x",value:e.position?e.position.x:void 0},y:{key:"w:y",value:e.position?e.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:e.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:e.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:null==(t=e.space)?void 0:t.horizontal},spaceVertical:{key:"w:vSpace",value:null==(r=e.space)?void 0:r.vertical},rule:{key:"w:hRule",value:e.rule},alignmentX:{key:"w:xAlign",value:e.alignment?e.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:e.alignment?e.alignment.y:void 0},lines:{key:"w:lines",value:e.lines},wrap:{key:"w:wrap",value:e.wrap}}})})(e.frame)),void 0!==e.widowControl&&this.push(new RE("w:widowControl",e.widowControl)),e.bullet&&this.push(new QT(1,e.bullet.level)),e.numbering&&(this.numberingReferences.push({reference:e.numbering.reference,instance:null!=(t=e.numbering.instance)?t:0}),this.push(new QT("".concat(e.numbering.reference,"-").concat(null!=(r=e.numbering.instance)?r:0),e.numbering.level))),e.border&&this.push(new UE(e.border)),e.thematicBreak&&this.push(new VE),e.shading&&this.push(new oT(e.shading)),e.wordWrap&&this.push(new GP),e.overflowPunctuation&&this.push(new RE("w:overflowPunct",e.overflowPunctuation));const n=[...void 0!==e.rightTabStop?[{type:KT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...void 0!==e.leftTabStop?[{type:HT,position:e.leftTabStop}]:[]];n.length>0&&this.push(new WT(n)),void 0!==e.bidirectional&&this.push(new RE("w:bidi",e.bidirectional)),e.spacing&&this.push(new VT(e.spacing)),e.indent&&this.push(new qE(e.indent)),void 0!==e.contextualSpacing&&this.push(new RE("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new LE(e.alignment)),void 0!==e.outlineLevel&&this.push(new lP(e.outlineLevel)),void 0!==e.suppressLineNumbers&&this.push(new RE("w:suppressLineNumbers",e.suppressLineNumbers)),void 0!==e.autoSpaceEastAsianText&&this.push(new RE("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new CT(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof HP)for(const t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}}class QP extends ZT{constructor(e){if(super("w:p"),gS(this,"properties"),"string"===typeof e)return this.properties=new JP({}),this.root.push(this.properties),this.root.push(new kT(e)),this;if(this.properties=new JP(e),this.root.push(this.properties),e.text&&this.root.push(new kT(e.text)),e.children)for(const t of e.children)if(t instanceof aP){this.root.push(t.start);for(const e of t.children)this.root.push(e);this.root.push(t.end)}else this.root.push(t)}prepForXml(e){for(const t of this.root)if(t instanceof iP){const r=this.root.indexOf(t),n=new nP(t.options.children,DT());e.viewWrapper.Relationships.createRelationship(n.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,eP),this.root[r]=n}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}const YP={style:jE,size:0,color:"auto"},XP={style:BE,size:4,color:"auto"};class ZP extends bS{constructor(e){super("w:tblBorders"),e.top?this.root.push(new FE("w:top",e.top)):this.root.push(new FE("w:top",XP)),e.left?this.root.push(new FE("w:left",e.left)):this.root.push(new FE("w:left",XP)),e.bottom?this.root.push(new FE("w:bottom",e.bottom)):this.root.push(new FE("w:bottom",XP)),e.right?this.root.push(new FE("w:right",e.right)):this.root.push(new FE("w:right",XP)),e.insideHorizontal?this.root.push(new FE("w:insideH",e.insideHorizontal)):this.root.push(new FE("w:insideH",XP)),e.insideVertical?this.root.push(new FE("w:insideV",e.insideVertical)):this.root.push(new FE("w:insideV",XP))}}gS(ZP,"NONE",{top:YP,bottom:YP,left:YP,right:YP,insideHorizontal:YP,insideVertical:YP});class $P extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class eR extends bS{constructor(){super("Properties"),this.root.push(new $P({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class tR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{xmlns:"xmlns"})}}class rR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class nR extends bS{constructor(e,t){super("Default"),this.root.push(new rR({contentType:e,extension:t}))}}class iR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class sR extends bS{constructor(e,t){super("Override"),this.root.push(new iR({contentType:e,partName:t}))}}class oR extends bS{constructor(){super("Types"),this.root.push(new tR({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new nR("image/png","png")),this.root.push(new nR("image/jpeg","jpeg")),this.root.push(new nR("image/jpeg","jpg")),this.root.push(new nR("image/bmp","bmp")),this.root.push(new nR("image/gif","gif")),this.root.push(new nR("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new nR("application/xml","xml")),this.root.push(new nR("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new sR("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml","/word/footer".concat(e,".xml")))}addHeader(e){this.root.push(new sR("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml","/word/header".concat(e,".xml")))}}class aR extends bS{constructor(e){super("cp:coreProperties"),this.root.push(new BP({cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"})),e.title&&this.root.push(new OE("dc:title",e.title)),e.subject&&this.root.push(new OE("dc:subject",e.subject)),e.creator&&this.root.push(new OE("dc:creator",e.creator)),e.keywords&&this.root.push(new OE("cp:keywords",e.keywords)),e.description&&this.root.push(new OE("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new OE("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new OE("cp:revision",String(e.revision))),this.root.push(new cR("dcterms:created")),this.root.push(new cR("dcterms:modified"))}}class cR extends bS{constructor(e){super(e),this.root.push(new BP({type:"dcterms:W3CDTF"})),this.root.push((new Date).toISOString())}}class uR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class lR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class hR extends bS{constructor(e,t){super("property"),this.root.push(new lR({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new dR(t.value))}}class dR extends bS{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class pR extends bS{constructor(e){super("Properties"),gS(this,"nextId"),gS(this,"properties",[]),this.root.push(new uR({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach((e=>this.root.push(e))),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new hR(this.nextId++,e))}}class fR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let vR=class extends fE{constructor(e,t){super("w:ftr",t),gS(this,"refId"),this.refId=e,t||this.root.push(new fR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class mR{constructor(e,t,r){gS(this,"footer"),gS(this,"relationships"),this.media=e,this.footer=new vR(t,r),this.relationships=new WP}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class gR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class yR extends bS{constructor(){super("w:footnoteRef")}}class wR extends AT{constructor(){super({style:"FootnoteReference"}),this.root.push(new yR)}}const SR="separator",bR="continuationSeparator";class CR extends bS{constructor(e){super("w:footnote"),this.root.push(new gR({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){const r=e.children[t];0===t&&r.addRunToFront(new wR),this.root.push(r)}}}class IR extends bS{constructor(){super("w:continuationSeparator")}}class ER extends AT{constructor(){super({}),this.root.push(new IR)}}class TR extends bS{constructor(){super("w:separator")}}class PR extends AT{constructor(){super({}),this.root.push(new TR)}}class RR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class _R extends bS{constructor(){super("w:footnotes"),this.root.push(new RR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new CR({id:-1,type:SR,children:[new QP({spacing:{after:0,line:240,lineRule:jT},children:[new PR]})]});this.root.push(e);const t=new CR({id:0,type:bR,children:[new QP({spacing:{after:0,line:240,lineRule:jT},children:[new ER]})]});this.root.push(t)}createFootNote(e,t){const r=new CR({id:e,children:t});this.root.push(r)}}class AR{constructor(){gS(this,"footnotess"),gS(this,"relationships"),this.footnotess=new _R,this.relationships=new WP}get View(){return this.footnotess}get Relationships(){return this.relationships}}class kR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let xR=class extends fE{constructor(e,t){super("w:hdr",t),gS(this,"refId"),this.refId=e,t||this.root.push(new kR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class OR{constructor(e,t,r){gS(this,"header"),gS(this,"relationships"),this.media=e,this.header=new xR(t,r),this.relationships=new WP}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class DR{constructor(){gS(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}}const NR="bullet";class MR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class LR extends bS{constructor(e){super("w:numFmt"),this.root.push(new TS({val:e}))}}class FR extends bS{constructor(e){super("w:lvlText"),this.root.push(new TS({val:e}))}}class zR extends bS{constructor(e){super("w:lvlJc"),this.root.push(new TS({val:e}))}}class BR extends bS{constructor(e){super("w:suff"),this.root.push(new TS({val:e}))}}class jR extends bS{constructor(){super("w:isLgl")}}class UR extends bS{constructor(e){let{level:t,format:r,text:n,alignment:i=NE.START,start:s=1,style:o,suffix:a,isLegalNumberingStyle:c}=e;if(super("w:lvl"),gS(this,"paragraphProperties"),gS(this,"runProperties"),this.root.push(new xE("w:start",vE(s))),r&&this.root.push(new LR(r)),a&&this.root.push(new BR(a)),c&&this.root.push(new jR),n&&this.root.push(new FR(n)),this.root.push(new zR(i)),this.paragraphProperties=new JP(o&&o.paragraph),this.runProperties=new CT(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new MR({ilvl:vE(t),tentative:1}))}}class VR extends UR{}class qR extends bS{constructor(e){super("w:multiLevelType"),this.root.push(new TS({val:e}))}}class WR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class HR extends bS{constructor(e,t){super("w:abstractNum"),gS(this,"id"),this.root.push(new WR({abstractNumId:vE(e),restartNumberingAfterBreak:0})),this.root.push(new qR("hybridMultilevel")),this.id=e;for(const r of t)this.root.push(new VR(r))}}class KR extends bS{constructor(e){super("w:abstractNumId"),this.root.push(new TS({val:e}))}}class GR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{numId:"w:numId"})}}class JR extends bS{constructor(e){if(super("w:num"),gS(this,"numId"),gS(this,"reference"),gS(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new GR({numId:vE(e.numId)})),this.root.push(new KR(vE(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const t of e.overrideLevels)this.root.push(new YR(t.num,t.start))}}class QR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{ilvl:"w:ilvl"})}}class YR extends bS{constructor(e,t){super("w:lvlOverride"),this.root.push(new QR({ilvl:e})),void 0!==t&&this.root.push(new ZR(t))}}class XR extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class ZR extends bS{constructor(e){super("w:startOverride"),this.root.push(new XR({val:e}))}}class $R extends bS{constructor(e){super("w:numbering"),gS(this,"abstractNumberingMap",new Map),gS(this,"concreteNumberingMap",new Map),gS(this,"referenceConfigMap",new Map),gS(this,"abstractNumUniqueNumericId",OT()),gS(this,"concreteNumUniqueNumericId",OT(1)),this.root.push(new BP({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new HR(this.abstractNumUniqueNumericId(),[{level:0,format:NR,text:"\u25cf",alignment:NE.LEFT,style:{paragraph:{indent:{left:xT(.5),hanging:xT(.25)}}}},{level:1,format:NR,text:"\u25cb",alignment:NE.LEFT,style:{paragraph:{indent:{left:xT(1),hanging:xT(.25)}}}},{level:2,format:NR,text:"\u25a0",alignment:NE.LEFT,style:{paragraph:{indent:{left:2160,hanging:xT(.25)}}}},{level:3,format:NR,text:"\u25cf",alignment:NE.LEFT,style:{paragraph:{indent:{left:2880,hanging:xT(.25)}}}},{level:4,format:NR,text:"\u25cb",alignment:NE.LEFT,style:{paragraph:{indent:{left:3600,hanging:xT(.25)}}}},{level:5,format:NR,text:"\u25a0",alignment:NE.LEFT,style:{paragraph:{indent:{left:4320,hanging:xT(.25)}}}},{level:6,format:NR,text:"\u25cf",alignment:NE.LEFT,style:{paragraph:{indent:{left:5040,hanging:xT(.25)}}}},{level:7,format:NR,text:"\u25cf",alignment:NE.LEFT,style:{paragraph:{indent:{left:5760,hanging:xT(.25)}}}},{level:8,format:NR,text:"\u25cf",alignment:NE.LEFT,style:{paragraph:{indent:{left:6480,hanging:xT(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new JR({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(const r of e.config)this.abstractNumberingMap.set(r.reference,new HR(this.abstractNumUniqueNumericId(),r.levels)),this.referenceConfigMap.set(r.reference,r.levels)}prepForXml(e){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){const r=this.abstractNumberingMap.get(e);if(!r)return;const n="".concat(e,"-").concat(t);if(this.concreteNumberingMap.has(n))return;const i=this.referenceConfigMap.get(e),s=i&&i[0].start,o={numId:this.concreteNumUniqueNumericId(),abstractNumId:r.id,reference:e,instance:t,overrideLevels:[s&&Number.isInteger(s)?{num:0,start:s}:{num:0,start:1}]};this.concreteNumberingMap.set(n,new JR(o))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class e_ extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class t_ extends bS{constructor(e){super("w:compatSetting"),this.root.push(new e_({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class r_ extends bS{constructor(e){super("w:compat"),e.version&&this.root.push(new t_(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new RE("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new RE("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new RE("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new RE("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new RE("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new RE("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new RE("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new RE("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new RE("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new RE("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new RE("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new RE("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new RE("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new RE("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new RE("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new RE("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new RE("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new RE("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new RE("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new RE("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new RE("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new RE("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new RE("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new RE("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new RE("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new RE("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new RE("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new RE("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new RE("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new RE("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new RE("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new RE("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new RE("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new RE("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new RE("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new RE("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new RE("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new RE("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new RE("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new RE("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new RE("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new RE("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new RE("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new RE("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new RE("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new RE("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new RE("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new RE("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new RE("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new RE("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new RE("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new RE("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new RE("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new RE("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new RE("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new RE("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new RE("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new RE("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new RE("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new RE("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new RE("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new RE("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new RE("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new RE("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new RE("w:cachedColBalance",e.cachedColumnBalance))}}class n_ extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class i_ extends bS{constructor(e){var t,r,n,i;super("w:settings"),this.root.push(new n_({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new RE("w:displayBackgroundShape",!0)),void 0!==e.trackRevisions&&this.root.push(new RE("w:trackRevisions",e.trackRevisions)),void 0!==e.evenAndOddHeaders&&this.root.push(new RE("w:evenAndOddHeaders",e.evenAndOddHeaders)),void 0!==e.updateFields&&this.root.push(new RE("w:updateFields",e.updateFields)),void 0!==e.defaultTabStop&&this.root.push(new xE("w:defaultTabStop",e.defaultTabStop)),this.root.push(new r_(mS(vS({},null!=(t=e.compatibility)?t:{}),{version:null!=(i=null!=(n=null==(r=e.compatibility)?void 0:r.version)?n:e.compatibilityModeVersion)?i:15})))}}class s_ extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{val:"w:val"})}}class o_ extends bS{constructor(e){super("w:name"),this.root.push(new s_({val:e}))}}class a_ extends bS{constructor(e){super("w:uiPriority"),this.root.push(new s_({val:vE(e)}))}}class c_ extends IS{constructor(){super(...arguments),gS(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class u_ extends bS{constructor(e,t){super("w:style"),this.root.push(new c_(e)),t.name&&this.root.push(new o_(t.name)),t.basedOn&&this.root.push(new AE("w:basedOn",t.basedOn)),t.next&&this.root.push(new AE("w:next",t.next)),t.link&&this.root.push(new AE("w:link",t.link)),void 0!==t.uiPriority&&this.root.push(new a_(t.uiPriority)),void 0!==t.semiHidden&&this.root.push(new RE("w:semiHidden",t.semiHidden)),void 0!==t.unhideWhenUsed&&this.root.push(new RE("w:unhideWhenUsed",t.unhideWhenUsed)),void 0!==t.quickFormat&&this.root.push(new RE("w:qFormat",t.quickFormat))}}class l_ extends u_{constructor(e){super({type:"paragraph",styleId:e.id},e),gS(this,"paragraphProperties"),gS(this,"runProperties"),this.paragraphProperties=new JP(e.paragraph),this.runProperties=new CT(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class h_ extends u_{constructor(e){super({type:"character",styleId:e.id},vS({uiPriority:99,unhideWhenUsed:!0},e)),gS(this,"runProperties"),this.runProperties=new CT(e.run),this.root.push(this.runProperties)}}class d_ extends l_{constructor(e){super(vS({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class p_ extends d_{constructor(e){super(vS({id:"Title",name:"Title"},e))}}class f_ extends d_{constructor(e){super(vS({id:"Heading1",name:"Heading 1"},e))}}class v_ extends d_{constructor(e){super(vS({id:"Heading2",name:"Heading 2"},e))}}class m_ extends d_{constructor(e){super(vS({id:"Heading3",name:"Heading 3"},e))}}class g_ extends d_{constructor(e){super(vS({id:"Heading4",name:"Heading 4"},e))}}class y_ extends d_{constructor(e){super(vS({id:"Heading5",name:"Heading 5"},e))}}class w_ extends d_{constructor(e){super(vS({id:"Heading6",name:"Heading 6"},e))}}class S_ extends d_{constructor(e){super(vS({id:"Strong",name:"Strong"},e))}}class b_ extends l_{constructor(e){super(vS({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class C_ extends l_{constructor(e){super(vS({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:jT}},run:{size:20}},e))}}class I_ extends h_{constructor(e){super(vS({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class E_ extends h_{constructor(e){super(vS({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class T_ extends h_{constructor(e){super(vS({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:ST}}},e))}}class P_ extends bS{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(const t of e.paragraphStyles)this.root.push(new l_(t));if(e.characterStyles)for(const t of e.characterStyles)this.root.push(new h_(t))}}class R_ extends bS{constructor(e){super("w:pPrDefault"),this.root.push(new JP(e))}}class __ extends bS{constructor(e){super("w:rPrDefault"),this.root.push(new CT(e))}}class A_ extends bS{constructor(e){super("w:docDefaults"),gS(this,"runPropertiesDefaults"),gS(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new __(e.run),this.paragraphPropertiesDefaults=new R_(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class k_{newInstance(e){const t=uE.xml2js(e,{compact:!1});let r;for(const i of t.elements||[])"w:styles"===i.name&&(r=i);if(void 0===r)throw new Error("can not find styles element");const n=r.elements||[];return new P_({initialStyles:new pE(r.attributes),importedStyles:n.map((e=>lE(e)))})}}class x_{newInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return{initialStyles:new BP({mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",Ignorable:"w14 w15"}),importedStyles:[new A_(null!=(t=e.document)?t:{}),new p_(vS({run:{size:56}},e.title)),new f_(vS({run:{color:"2E74B5",size:32}},e.heading1)),new v_(vS({run:{color:"2E74B5",size:26}},e.heading2)),new m_(vS({run:{color:"1F4D78",size:24}},e.heading3)),new g_(vS({run:{color:"2E74B5",italics:!0}},e.heading4)),new y_(vS({run:{color:"2E74B5"}},e.heading5)),new w_(vS({run:{color:"1F4D78"}},e.heading6)),new S_(vS({run:{bold:!0}},e.strong)),new b_(e.listParagraph||{}),new T_(e.hyperlink||{}),new I_(e.footnoteReference||{}),new C_(e.footnoteText||{}),new E_(e.footnoteTextChar||{})]}}}const O_=(e,t)=>{let{id:r,fontKey:n,subsetted:i}=e;return new DE({name:t,attributes:vS({id:{key:"r:id",value:r}},n?{fontKey:{key:"w:fontKey",value:"{".concat(n,"}")}}:{}),children:[...i?[new RE("w:subsetted",i)]:[]]})},D_=e=>{let{name:t,index:r,fontKey:n,characterSet:i}=e;return(e=>{let{name:t,altName:r,panose1:n,charset:i,family:s,notTrueType:o,pitch:a,sig:c,embedRegular:u,embedBold:l,embedItalic:h,embedBoldItalic:d}=e;return new DE({name:"w:font",attributes:{name:{key:"w:name",value:t}},children:[...r?[kE("w:altName",r)]:[],...n?[kE("w:panose1",n)]:[],...i?[kE("w:charset",i)]:[],...s?[kE("w:family",s)]:[],...o?[new RE("w:notTrueType",o)]:[],...a?[kE("w:pitch",a)]:[],...c?[new DE({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:c.usb0},usb1:{key:"w:usb1",value:c.usb1},usb2:{key:"w:usb2",value:c.usb2},usb3:{key:"w:usb3",value:c.usb3},csb0:{key:"w:csb0",value:c.csb0},csb1:{key:"w:csb1",value:c.csb1}}})]:[],...u?[O_(u,"w:embedRegular")]:[],...l?[O_(l,"w:embedBold")]:[],...h?[O_(h,"w:embedItalic")]:[],...d?[O_(d,"w:embedBoldItalic")]:[]]})})({name:t,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:i,family:"auto",pitch:"variable",embedRegular:{fontKey:n,id:"rId".concat(r)}})};class N_{constructor(e){var t;gS(this,"fontTable"),gS(this,"relationships"),gS(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map((e=>mS(vS({},e),{fontKey:"".concat(NT(8),"-").concat(NT(4),"-").concat(NT(4),"-").concat(NT(4),"-").concat(NT(12))}))),this.fontTable=(t=this.fontOptionsWithKey,new DE({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:t.map(((e,t)=>D_({name:e.name,index:t+1,fontKey:e.fontKey})))})),this.relationships=new WP;for(let r=0;r<e.length;r++)this.relationships.createRelationship(r+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font","fonts/".concat(e[r].name,".odttf"))}get View(){return this.fontTable}get Relationships(){return this.relationships}}class M_{constructor(e){var t,r,n,i,s,o,a,c;if(gS(this,"currentRelationshipId",1),gS(this,"documentWrapper"),gS(this,"headers",[]),gS(this,"footers",[]),gS(this,"coreProperties"),gS(this,"numbering"),gS(this,"media"),gS(this,"fileRelationships"),gS(this,"footnotesWrapper"),gS(this,"settings"),gS(this,"contentTypes"),gS(this,"customProperties"),gS(this,"appProperties"),gS(this,"styles"),gS(this,"comments"),gS(this,"fontWrapper"),this.coreProperties=new aR(mS(vS({},e),{creator:null!=(t=e.creator)?t:"Un-named",revision:null!=(r=e.revision)?r:1,lastModifiedBy:null!=(n=e.lastModifiedBy)?n:"Un-named"})),this.numbering=new $R(e.numbering?e.numbering:{config:[]}),this.comments=new zT(null!=(i=e.comments)?i:{children:[]}),this.fileRelationships=new WP,this.customProperties=new pR(null!=(s=e.customProperties)?s:[]),this.appProperties=new eR,this.footnotesWrapper=new AR,this.contentTypes=new oR,this.documentWrapper=new HP({background:e.background}),this.settings=new i_({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:null==(o=e.features)?void 0:o.trackRevisions,updateFields:null==(a=e.features)?void 0:a.updateFields,defaultTabStop:e.defaultTabStop}),this.media=new DR,e.externalStyles){const t=new k_;this.styles=t.newInstance(e.externalStyles)}else if(e.styles){const t=(new x_).newInstance(e.styles.default);this.styles=new P_(vS(vS({},t),e.styles))}else{const e=new x_;this.styles=new P_(e.newInstance())}this.addDefaultRelationships();for(const u of e.sections)this.addSection(u);if(e.footnotes)for(const u in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(u),e.footnotes[u].children);this.fontWrapper=new N_(null!=(c=e.fonts)?c:[])}addSection(e){let{headers:t={},footers:r={},children:n,properties:i}=e;this.documentWrapper.View.Body.addSection(mS(vS({},i),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:r.default?this.createFooter(r.default):void 0,first:r.first?this.createFooter(r.first):void 0,even:r.even?this.createFooter(r.even):void 0}}));for(const s of n)this.documentWrapper.View.add(s)}createHeader(e){const t=new OR(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addHeaderToDocument(t),t}createFooter(e){const t=new mR(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addFooterToDocument(t),t}addHeaderToDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pP;this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header","header".concat(this.headers.length,".xml")),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pP;this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer","footer".concat(this.footers.length,".xml")),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map((e=>e.header))}get Footers(){return this.footers.map((e=>e.footer))}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}}function L_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var F_={exports:{}};F_.exports=function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){if(!a&&L_)return L_(o);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,r,n)}return r[o].exports}for(var s=L_,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){var n=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,o,a,c,u,l=[],h=0,d=e.length,p=d,f="string"!==n.getTypeOf(e);h<e.length;)p=d-h,i=f?(t=e[h++],r=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),r=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),o=t>>2,a=(3&t)<<4|r>>4,c=1<p?(15&r)<<2|i>>6:64,u=2<p?63&i:64,l.push(s.charAt(o)+s.charAt(a)+s.charAt(c)+s.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,o,a,c,u=0,l=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)t=s.indexOf(e.charAt(u++))<<2|(o=s.indexOf(e.charAt(u++)))>>4,r=(15&o)<<4|(a=s.indexOf(e.charAt(u++)))>>2,n=(3&a)<<6|(c=s.indexOf(e.charAt(u++))),d[l++]=t,64!==a&&(d[l++]=r),64!==c&&(d[l++]=n);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){var n=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var s=i,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^s[255&(e^t[a])];return~e}(0|t,e,e.length,0):function(e,t,r,n){var s=i,o=n+r;e^=-1;for(var a=n;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return~e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=n?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,o,l){var h,d,p=e.file,f=e.compression,v=l!==a.utf8encode,m=s.transformTo("string",l(p.name)),g=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,w=s.transformTo("string",l(y)),S=s.transformTo("string",a.utf8encode(y)),b=g.length!==p.name.length,C=S.length!==y.length,I="",E="",T="",P=p.dir,R=p.date,_={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(_.crc32=e.crc32,_.compressedSize=e.compressedSize,_.uncompressedSize=e.uncompressedSize);var A=0;t&&(A|=8),v||!b&&!C||(A|=2048);var k=0,x=0;P&&(k|=16),"UNIX"===o?(x=798,k|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(p.unixPermissions,P)):(x=20,k|=63&(p.dosPermissions||0)),h=R.getUTCHours(),h<<=6,h|=R.getUTCMinutes(),h<<=5,h|=R.getUTCSeconds()/2,d=R.getUTCFullYear()-1980,d<<=4,d|=R.getUTCMonth()+1,d<<=5,d|=R.getUTCDate(),b&&(E=n(1,1)+n(c(m),4)+g,I+="up"+n(E.length,2)+E),C&&(T=n(1,1)+n(c(w),4)+S,I+="uc"+n(T.length,2)+T);var O="";return O+="\n\0",O+=n(A,2),O+=f.magic,O+=n(h,2),O+=n(d,2),O+=n(_.crc32,4),O+=n(_.compressedSize,4),O+=n(_.uncompressedSize,4),O+=n(m.length,2),O+=n(I.length,2),{fileRecord:u.LOCAL_FILE_HEADER+O+m+I,dirRecord:u.CENTRAL_FILE_HEADER+n(x,2)+O+n(w.length,2)+"\0\0\0\0"+n(k,4)+n(i,4)+m+I+w}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,r,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(l,o),l.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t,r=this.streamFiles&&!e.file.dir,s=i(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),r)this.push({data:(t=e,u.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=function(e,t,r,i,o){var a=s.transformTo("string",o(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(a.length,2)+a}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(n){}return!0},l.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var s=new i(t.streamFiles,r,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,r){o++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),a=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,u=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:e,dir:c,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(a){s.error(a)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){var n=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new o(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var s=0;s<n.length;s++)r.push(u(n[s]));return i.Promise.all(r)})).then((function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],c=a.fileNameStr,u=n.resolve(a.fileNameStr);r.file(u,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(r.file(u).unsafeOriginalName=c)}return i.zipComment.length&&(r.comment=i.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){var n=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){function n(e,t,r){var n,i=s.getTypeOf(t),a=s.extend(r||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=v(e)),a.createFolders&&(n=f(e))&&m.call(this,n,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!h),(t instanceof u&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var g=null;g=t instanceof u||t instanceof o?t:d.isNode&&d.isStream(t)?new p(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new l(e,g,a);this.files[e]=y}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},v=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:c.createFolders,e=v(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(g(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(g(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=m.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");s.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=h.generateWorker(this,r,n)}catch(c){(t=new o("error")).error(c)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){var n=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new c(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){var n=e("./GenericWorker"),i=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){var n=e("./GenericWorker"),i=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){var n=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){var n=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),c=e("../external"),u=null;if(a.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(d){}function l(e,t){return new c.Promise((function(r,i){var s=[],a=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,r){s.push(e),t&&t(r)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(c,function(e,t){var r,n=0,i=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),u);r(e)}catch(t){i(t)}s=[]})).resume()}))}function h(e,t,r){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=r,n.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(a){this._worker=new s("error"),this._worker.error(a)}}h.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(s){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(o){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(s){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){for(var n=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function l(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,r.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,r,n,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),s=o=0;o<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,s,o=e.length,c=new Array(2*o);for(t=r=0;t<o;)if((i=e[t++])<128)c[r++]=i;else if(4<(s=a[i]))c[r++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(u,o),u.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}(t),c=t;o!==t.length&&(i.uint8array?(c=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(c=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(l,o),l.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){var n=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(s){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,r){var n=[],i=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=u.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,n,t)}catch(s){t=Math.floor(t/2)}return u.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=l;var d={};d.string={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},d.array={string:l,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},d.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},d.nodebuffer={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return d[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){setImmediate((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,s,a,u){return o.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var l,h=r.getTypeOf(t);return h?("arraybuffer"===h?t=r.transformTo("uint8array",t):"string"===h&&(u?t=i.decode(t):s&&!0!==a&&(t=c(l=t,n.uint8array?new Uint8Array(l.length):new Array(l.length)))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){var n=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){var n=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&n&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(a){(t=new c("error")).error(a)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)n.prototype[u[h]]=l;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(l),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,"undefined"!=typeof PS?PS:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){var n=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n((function(){var n;try{n=t(r)}catch(i){return s.reject(e,i)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}var o=f((function(){t(i,n)}));"error"===o.status&&n(o.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(i);return this.state!==c?h(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(d,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return s.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,c=-1,u=new this(i);++c<r;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==r||n||(n=!0,s.resolve(u,o))}),(function(e){n||(n=!0,s.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o,a=-1,c=new this(i);++a<r;)o=e[a],t.resolve(o).then((function(e){n||(n=!0,s.resolve(c,e))}),(function(e){n||(n=!0,s.reject(c,e))}));return c}},{immediate:36}],38:[function(e,t,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){var n=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=-1,h=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:l,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==u)throw new Error(o[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,f))!==u)throw new Error(o[r]);this._dict_set=!0}}function f(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}p.prototype.push=function(e,t){var r,o,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(l),a.next_out=0,a.avail_out=l),1!==(r=n.deflate(a,o))&&r!==u)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===o?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):2!==o||(this.onEnd(u),!(a.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=f,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){var n=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(a[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}h.prototype.push=function(e,t){var r,a,c,u,h,d,p=this.strm,f=this.options.chunkSize,v=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(r=n.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&v&&(d="string"==typeof v?s.string2buf(v):"[object ArrayBuffer]"===l.call(v)?new Uint8Array(v):v,r=n.inflateSetDictionary(this.strm,d)),r===o.Z_BUF_ERROR&&!0===m&&(r=o.Z_OK,m=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&r!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(p.output,p.next_out),u=p.next_out-c,h=s.buf2string(p.output,c),p.next_out=u,p.avail_out=f-u,u&&i.arraySet(p.output,p.output,c,u,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){var t,r,n,i,s,o;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){var n=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(u){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,r.string2buf=function(e){var t,r,i,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),s=o=0;o<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,s,a=t||e.length,u=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)u[n++]=i;else if(4<(s=o[i]))u[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&e[r++],s--;1<s?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return c(u,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e,s=e>>>16&65535,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var s=n,o=i+r;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return~e}},{}],46:[function(e,t,r){var n,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),c=e("./messages"),u=0,l=4,h=0,d=-2,p=-1,f=4,v=2,m=8,g=9,y=286,w=30,S=19,b=2*y+1,C=15,I=3,E=258,T=E+I+1,P=42,R=113,_=1,A=2,k=3,x=4;function O(e,t){return e.msg=c[t],t}function D(e){return(e<<1)-(4<e?9:0)}function N(e){for(var t=e.length;0<=--t;)e[t]=0}function M(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function L(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,M(e.strm)}function F(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+E,p=u[s+o-1],f=u[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+o]===f&&u[r+o-1]===p&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(n=E-(d-s),s=d-E,o<n){if(e.match_start=t,a<=(o=n))break;p=u[s+o-1],f=u[s+o]}}}while((t=h[t&l])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function j(e){var t,r,n,s,c,u,l,h,d,p,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-T)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);s+=f}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,h=e.strstart+e.lookahead,p=void 0,(d=s)<(p=u.avail_in)&&(p=d),r=0===p?0:(u.avail_in-=p,i.arraySet(l,u.input,u.next_in,p,h),1===u.state.wrap?u.adler=o(u.adler,l,p,h):2===u.state.wrap&&(u.adler=a(u.adler,l,p,h)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=I)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+I-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<I)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function U(e,t){for(var r,n;;){if(e.lookahead<T){if(j(e),e.lookahead<T&&t===u)return _;if(0===e.lookahead)break}if(r=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-T&&(e.match_length=B(e,r)),e.match_length>=I)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-I),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=I){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(L(e,!1),0===e.strm.avail_out))return _}return e.insert=e.strstart<I-1?e.strstart:I-1,t===l?(L(e,!0),0===e.strm.avail_out?k:x):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?_:A}function V(e,t){for(var r,n,i;;){if(e.lookahead<T){if(j(e),e.lookahead<T&&t===u)return _;if(0===e.lookahead)break}if(r=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=I-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-T&&(e.match_length=B(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===I&&4096<e.strstart-e.match_start)&&(e.match_length=I-1)),e.prev_length>=I&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-I,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-I),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=I-1,e.strstart++,n&&(L(e,!1),0===e.strm.avail_out))return _}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<I-1?e.strstart:I-1,t===l?(L(e,!0),0===e.strm.avail_out?k:x):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?_:A}function q(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*b),this.dyn_dtree=new i.Buf16(2*(2*w+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(C+1),this.heap=new i.Buf16(2*y+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=v,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?P:R,e.adler=2===t.wrap?0:1,t.last_flush=u,s._tr_init(t),h):O(e,d)}function K(e){var t,r=H(e);return r===h&&((t=e.state).window_size=2*t.w_size,N(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=I-1,t.match_available=0,t.ins_h=0),r}function G(e,t,r,n,s,o){if(!e)return d;var a=1;if(t===p&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||g<s||r!==m||n<8||15<n||t<0||9<t||o<0||f<o)return O(e,d);8===n&&(n=9);var c=new W;return(e.state=c).strm=e,c.wrap=a,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+I-1)/I),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=r,K(e)}n=[new q(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===u)return _;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,L(e,!1),0===e.strm.avail_out))return _;if(e.strstart-e.block_start>=e.w_size-T&&(L(e,!1),0===e.strm.avail_out))return _}return e.insert=0,t===l?(L(e,!0),0===e.strm.avail_out?k:x):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),_)})),new q(4,4,8,4,U),new q(4,5,16,8,U),new q(4,6,32,32,U),new q(4,4,16,16,V),new q(8,16,32,32,V),new q(8,16,128,128,V),new q(8,32,128,256,V),new q(32,128,258,1024,V),new q(32,258,258,4096,V)],r.deflateInit=function(e,t){return G(e,t,m,15,8,0)},r.deflateInit2=G,r.deflateReset=K,r.deflateResetKeep=H,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},r.deflate=function(e,t){var r,i,o,c;if(!e||!e.state||5<t||t<0)return e?O(e,d):d;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return O(e,0===e.avail_out?-5:d);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===P)if(2===i.wrap)e.adler=0,F(i,31),F(i,139),F(i,8),i.gzhead?(F(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),F(i,255&i.gzhead.time),F(i,i.gzhead.time>>8&255),F(i,i.gzhead.time>>16&255),F(i,i.gzhead.time>>24&255),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(F(i,255&i.gzhead.extra.length),F(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(F(i,0),F(i,0),F(i,0),F(i,0),F(i,0),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,3),i.status=R);else{var p=m+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=R,z(i,p),0!==i.strstart&&(z(i,e.adler>>>16),z(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),M(e),o=i.pending,i.pending!==i.pending_buf_size));)F(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),M(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,F(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),M(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,F(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&M(e),i.pending+2<=i.pending_buf_size&&(F(i,255&e.adler),F(i,e.adler>>8&255),e.adler=0,i.status=R)):i.status=R),0!==i.pending){if(M(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&D(t)<=D(r)&&t!==l)return O(e,-5);if(666===i.status&&0!==e.avail_in)return O(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var f=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===u)return _;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return _}return e.insert=0,t===l?(L(e,!0),0===e.strm.avail_out?k:x):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?_:A}(i,t):3===i.strategy?function(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=E){if(j(e),e.lookahead<=E&&t===u)return _;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=I&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=e.strstart+E;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=E-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=I?(r=s._tr_tally(e,1,e.match_length-I),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(L(e,!1),0===e.strm.avail_out))return _}return e.insert=0,t===l?(L(e,!0),0===e.strm.avail_out?k:x):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?_:A}(i,t):n[i.level].func(i,t);if(f!==k&&f!==x||(i.status=666),f===_||f===k)return 0===e.avail_out&&(i.last_flush=-1),h;if(f===A&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(N(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),M(e),0===e.avail_out))return i.last_flush=-1,h}return t!==l?h:i.wrap<=0?1:(2===i.wrap?(F(i,255&e.adler),F(i,e.adler>>8&255),F(i,e.adler>>16&255),F(i,e.adler>>24&255),F(i,255&e.total_in),F(i,e.total_in>>8&255),F(i,e.total_in>>16&255),F(i,e.total_in>>24&255)):(z(i,e.adler>>>16),z(i,65535&e.adler)),M(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==P&&69!==t&&73!==t&&91!==t&&103!==t&&t!==R&&666!==t?O(e,d):(e.state=null,t===R?O(e,-3):h):d},r.deflateSetDictionary=function(e,t){var r,n,s,a,c,u,l,p,f=t.length;if(!e||!e.state)return d;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==P||r.lookahead)return d;for(1===a&&(e.adler=o(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(N(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new i.Buf8(r.w_size),i.arraySet(p,t,f-r.w_size,r.w_size,0),t=p,f=r.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=f,e.next_in=0,e.input=t,j(r);r.lookahead>=I;){for(n=r.strstart,s=r.lookahead-(I-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+I-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--s;);r.strstart=n,r.lookahead=I-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=I-1,r.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,r.wrap=a,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){t.exports=function(e,t){var r,n,i,s,o,a,c,u,l,h,d,p,f,v,m,g,y,w,S,b,C,I,E,T,P;r=e.state,n=e.next_in,T=e.input,i=n+(e.avail_in-5),s=e.next_out,P=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,h=r.wnext,d=r.window,p=r.hold,f=r.bits,v=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),w=v[p&g];t:for(;;){if(p>>>=S=w>>>24,f-=S,0===(S=w>>>16&255))P[s++]=65535&w;else{if(!(16&S)){if(0==(64&S)){w=v[(65535&w)+(p&(1<<S)-1)];continue t}if(32&S){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}b=65535&w,(S&=15)&&(f<S&&(p+=T[n++]<<f,f+=8),b+=p&(1<<S)-1,p>>>=S,f-=S),f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),w=m[p&y];r:for(;;){if(p>>>=S=w>>>24,f-=S,!(16&(S=w>>>16&255))){if(0==(64&S)){w=m[(65535&w)+(p&(1<<S)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(C=65535&w,f<(S&=15)&&(p+=T[n++]<<f,(f+=8)<S&&(p+=T[n++]<<f,f+=8)),c<(C+=p&(1<<S)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=S,f-=S,(S=s-o)<C){if(l<(S=C-S)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=d,(I=0)===h){if(I+=u-S,S<b){for(b-=S;P[s++]=d[I++],--S;);I=s-C,E=P}}else if(h<S){if(I+=u+h-S,(S-=h)<b){for(b-=S;P[s++]=d[I++],--S;);if(I=0,h<b){for(b-=S=h;P[s++]=d[I++],--S;);I=s-C,E=P}}}else if(I+=h-S,S<b){for(b-=S;P[s++]=d[I++],--S;);I=s-C,E=P}for(;2<b;)P[s++]=E[I++],P[s++]=E[I++],P[s++]=E[I++],b-=3;b&&(P[s++]=E[I++],1<b&&(P[s++]=E[I++]))}else{for(I=s-C;P[s++]=P[I++],P[s++]=P[I++],P[s++]=P[I++],2<(b-=3););b&&(P[s++]=P[I++],1<b&&(P[s++]=P[I++]))}break}}break}}while(n<i&&s<a);n-=b=f>>3,p&=(1<<(f-=b<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=s<a?a-s+257:257-(s-a),r.hold=p,r.bits=f}},{}],49:[function(e,t,r){var n=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),c=1,u=2,l=0,h=-2,d=1,p=852,f=592;function v(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(p),t.distcode=t.distdyn=new n.Buf32(f),t.sane=1,t.back=-1,l):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):h}function w(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,y(e))):h}function S(e,t){var r,n;return e?(n=new m,(e.state=n).window=null,(r=w(e,t))!==l&&(e.state=null),r):h}var b,C,I=!0;function E(e){if(I){var t;for(b=new n.Buf32(512),C=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(c,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(u,e.lens,0,32,C,0,e.work,{bits:5}),I=!1}e.lencode=b,e.lenbits=9,e.distcode=C,e.distbits=5}function T(e,t,r,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),n.arraySet(o.window,t,r-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}r.inflateReset=y,r.inflateReset2=w,r.inflateResetKeep=g,r.inflateInit=function(e){return S(e,15)},r.inflateInit2=S,r.inflate=function(e,t){var r,p,f,m,g,y,w,S,b,C,I,P,R,_,A,k,x,O,D,N,M,L,F,z,B=0,j=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(r=e.state).mode&&(r.mode=13),g=e.next_out,f=e.output,w=e.avail_out,m=e.next_in,p=e.input,y=e.avail_in,S=r.hold,b=r.bits,C=y,I=w,L=l;e:for(;;)switch(r.mode){case d:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(2&r.wrap&&35615===S){j[r.check=0]=255&S,j[1]=S>>>8&255,r.check=s(r.check,j,2,0),b=S=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&S)<<8)+(S>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&S)){e.msg="unknown compression method",r.mode=30;break}if(b-=4,M=8+(15&(S>>>=4)),0===r.wbits)r.wbits=M;else if(M>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<M,e.adler=r.check=1,r.mode=512&S?10:12,b=S=0;break;case 2:for(;b<16;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(r.flags=S,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=S>>8&1),512&r.flags&&(j[0]=255&S,j[1]=S>>>8&255,r.check=s(r.check,j,2,0)),b=S=0,r.mode=3;case 3:for(;b<32;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.head&&(r.head.time=S),512&r.flags&&(j[0]=255&S,j[1]=S>>>8&255,j[2]=S>>>16&255,j[3]=S>>>24&255,r.check=s(r.check,j,4,0)),b=S=0,r.mode=4;case 4:for(;b<16;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.head&&(r.head.xflags=255&S,r.head.os=S>>8),512&r.flags&&(j[0]=255&S,j[1]=S>>>8&255,r.check=s(r.check,j,2,0)),b=S=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.length=S,r.head&&(r.head.extra_len=S),512&r.flags&&(j[0]=255&S,j[1]=S>>>8&255,r.check=s(r.check,j,2,0)),b=S=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(y<(P=r.length)&&(P=y),P&&(r.head&&(M=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,p,m,P,M)),512&r.flags&&(r.check=s(r.check,p,P,m)),y-=P,m+=P,r.length-=P),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===y)break e;for(P=0;M=p[m+P++],r.head&&M&&r.length<65536&&(r.head.name+=String.fromCharCode(M)),M&&P<y;);if(512&r.flags&&(r.check=s(r.check,p,P,m)),y-=P,m+=P,M)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===y)break e;for(P=0;M=p[m+P++],r.head&&M&&r.length<65536&&(r.head.comment+=String.fromCharCode(M)),M&&P<y;);if(512&r.flags&&(r.check=s(r.check,p,P,m)),y-=P,m+=P,M)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(S!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}b=S=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}e.adler=r.check=v(S),b=S=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=g,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=S,r.bits=b,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){S>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}switch(r.last=1&S,b-=1,3&(S>>>=1)){case 0:r.mode=14;break;case 1:if(E(r),r.mode=20,6!==t)break;S>>>=2,b-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}S>>>=2,b-=2;break;case 14:for(S>>>=7&b,b-=7&b;b<32;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if((65535&S)!=(S>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&S,b=S=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(P=r.length){if(y<P&&(P=y),w<P&&(P=w),0===P)break e;n.arraySet(f,p,m,P,g),y-=P,m+=P,w-=P,g+=P,r.length-=P;break}r.mode=12;break;case 17:for(;b<14;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(r.nlen=257+(31&S),S>>>=5,b-=5,r.ndist=1+(31&S),S>>>=5,b-=5,r.ncode=4+(15&S),S>>>=4,b-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.lens[U[r.have++]]=7&S,S>>>=3,b-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},L=a(0,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,L){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;k=(B=r.lencode[S&(1<<r.lenbits)-1])>>>16&255,x=65535&B,!((A=B>>>24)<=b);){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(x<16)S>>>=A,b-=A,r.lens[r.have++]=x;else{if(16===x){for(z=A+2;b<z;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(S>>>=A,b-=A,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}M=r.lens[r.have-1],P=3+(3&S),S>>>=2,b-=2}else if(17===x){for(z=A+3;b<z;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}b-=A,M=0,P=3+(7&(S>>>=A)),S>>>=3,b-=3}else{for(z=A+7;b<z;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}b-=A,M=0,P=11+(127&(S>>>=A)),S>>>=7,b-=7}if(r.have+P>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;P--;)r.lens[r.have++]=M}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,F={bits:r.lenbits},L=a(c,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,L){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},L=a(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,L){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=y&&258<=w){e.next_out=g,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=S,r.bits=b,o(e,I),g=e.next_out,f=e.output,w=e.avail_out,m=e.next_in,p=e.input,y=e.avail_in,S=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;k=(B=r.lencode[S&(1<<r.lenbits)-1])>>>16&255,x=65535&B,!((A=B>>>24)<=b);){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(k&&0==(240&k)){for(O=A,D=k,N=x;k=(B=r.lencode[N+((S&(1<<O+D)-1)>>O)])>>>16&255,x=65535&B,!(O+(A=B>>>24)<=b);){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}S>>>=O,b-=O,r.back+=O}if(S>>>=A,b-=A,r.back+=A,r.length=x,0===k){r.mode=26;break}if(32&k){r.back=-1,r.mode=12;break}if(64&k){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&k,r.mode=22;case 22:if(r.extra){for(z=r.extra;b<z;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.length+=S&(1<<r.extra)-1,S>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;k=(B=r.distcode[S&(1<<r.distbits)-1])>>>16&255,x=65535&B,!((A=B>>>24)<=b);){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(0==(240&k)){for(O=A,D=k,N=x;k=(B=r.distcode[N+((S&(1<<O+D)-1)>>O)])>>>16&255,x=65535&B,!(O+(A=B>>>24)<=b);){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}S>>>=O,b-=O,r.back+=O}if(S>>>=A,b-=A,r.back+=A,64&k){e.msg="invalid distance code",r.mode=30;break}r.offset=x,r.extra=15&k,r.mode=24;case 24:if(r.extra){for(z=r.extra;b<z;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}r.offset+=S&(1<<r.extra)-1,S>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===w)break e;if(P=I-w,r.offset>P){if((P=r.offset-P)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}R=P>r.wnext?(P-=r.wnext,r.wsize-P):r.wnext-P,P>r.length&&(P=r.length),_=r.window}else _=f,R=g-r.offset,P=r.length;for(w<P&&(P=w),w-=P,r.length-=P;f[g++]=_[R++],--P;);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;f[g++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===y)break e;y--,S|=p[m++]<<b,b+=8}if(I-=w,e.total_out+=I,r.total+=I,I&&(e.adler=r.check=r.flags?s(r.check,f,I,g-I):i(r.check,f,I,g-I)),I=w,(r.flags?S:v(S))!==r.check){e.msg="incorrect data check",r.mode=30;break}b=S=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===y)break e;y--,S+=p[m++]<<b,b+=8}if(S!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}b=S=0}r.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return h}return e.next_out=g,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=S,r.bits=b,(r.wsize||I!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&T(e,e.output,e.next_out,I-e.avail_out)?(r.mode=31,-4):(C-=e.avail_in,I-=e.avail_out,e.total_in+=C,e.total_out+=I,r.total+=I,r.wrap&&I&&(e.adler=r.check=r.flags?s(r.check,f,I,e.next_out-I):i(r.check,f,I,e.next_out-I)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==C&&0===I||4===t)&&L===l&&(L=-5),L)},r.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,l},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?h:((r.head=t).done=!1,l):h},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?h:11===r.mode&&i(1,t,n,0)!==r.check?-3:T(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,l):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,u,l,h,d){var p,f,v,m,g,y,w,S,b,C=d.bits,I=0,E=0,T=0,P=0,R=0,_=0,A=0,k=0,x=0,O=0,D=null,N=0,M=new n.Buf16(16),L=new n.Buf16(16),F=null,z=0;for(I=0;I<=15;I++)M[I]=0;for(E=0;E<c;E++)M[t[r+E]]++;for(R=C,P=15;1<=P&&0===M[P];P--);if(P<R&&(R=P),0===P)return u[l++]=20971520,u[l++]=20971520,d.bits=1,0;for(T=1;T<P&&0===M[T];T++);for(R<T&&(R=T),I=k=1;I<=15;I++)if(k<<=1,(k-=M[I])<0)return-1;if(0<k&&(0===e||1!==P))return-1;for(L[1]=0,I=1;I<15;I++)L[I+1]=L[I]+M[I];for(E=0;E<c;E++)0!==t[r+E]&&(h[L[t[r+E]]++]=E);if(y=0===e?(D=F=h,19):1===e?(D=i,N-=257,F=s,z-=257,256):(D=o,F=a,-1),I=T,g=l,A=E=O=0,v=-1,m=(x=1<<(_=R))-1,1===e&&852<x||2===e&&592<x)return 1;for(;;){for(w=I-A,b=h[E]<y?(S=0,h[E]):h[E]>y?(S=F[z+h[E]],D[N+h[E]]):(S=96,0),p=1<<I-A,T=f=1<<_;u[g+(O>>A)+(f-=p)]=w<<24|S<<16|b,0!==f;);for(p=1<<I-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,E++,0==--M[I]){if(I===P)break;I=t[r+h[E]]}if(R<I&&(O&m)!==v){for(0===A&&(A=R),g+=T,k=1<<(_=I-A);_+A<P&&!((k-=M[_+A])<=0);)_++,k<<=1;if(x+=1<<_,1===e&&852<x||2===e&&592<x)return 1;u[v=O&m]=R<<24|_<<16|g-l}}return 0!==O&&(u[g+O]=I-A<<24|64<<16),d.bits=R,0}},{"../utils/common":41}],51:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){var n=e("../utils/common"),i=0,s=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,c=29,u=256,l=u+1+c,h=30,d=19,p=2*l+1,f=15,v=16,m=7,g=256,y=16,w=17,S=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(l+2));o(T);var P=new Array(2*h);o(P);var R=new Array(512);o(R);var _=new Array(256);o(_);var A=new Array(c);o(A);var k,x,O,D=new Array(h);function N(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function M(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function L(e){return e<256?R[e]:R[256+(e>>>7)]}function F(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,r){e.bi_valid>v-r?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=r-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function B(e,t,r){z(e,r[2*t],r[2*t+1])}function j(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function U(e,t,r){var n,i,s=new Array(f+1),o=0;for(n=1;n<=f;n++)s[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=j(s[a]++,a))}}function V(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){8<e.bi_valid?F(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function H(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&W(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!W(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function K(e,t,r){var n,i,s,o,a=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?B(e,i,t):(B(e,(s=_[i])+u+1,t),0!==(o=b[s])&&z(e,i-=A[s],o),B(e,s=L(--n),r),0!==(o=C[s])&&z(e,n-=D[s],o)),a<e.last_lit;);B(e,g,t)}function G(e,t){var r,n,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,r=0;r<c;r++)0!==s[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;1<=r;r--)H(e,s,r);for(i=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,H(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,s,o,a,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<p;r++)m<(s=c[2*c[2*(n=e.heap[r])+1]+1]+1)&&(s=m,g++),c[2*n+1]=s,u<n||(e.bl_count[s]++,o=0,v<=n&&(o=d[n-v]),a=c[2*n],e.opt_len+=a*(s+o),h&&(e.static_len+=a*(l[2*n+1]+o)));if(0!==g){do{for(s=m-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(s=m;0!==s;s--)for(n=e.bl_count[s];0!==n;)u<(i=e.heap[--r])||(c[2*i+1]!==s&&(e.opt_len+=(s-c[2*i+1])*c[2*i],c[2*i+1]=s),n--)}}(e,t),U(s,u,e.bl_count)}function J(e,t,r){var n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):a<=10?e.bl_tree[2*w]++:e.bl_tree[2*S]++,s=i,u=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4))}function Q(e,t,r){var n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)for(;B(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(B(e,i,e.bl_tree),a--),B(e,y,e.bl_tree),z(e,a-3,2)):a<=10?(B(e,w,e.bl_tree),z(e,a-3,3)):(B(e,S,e.bl_tree),z(e,a-11,7));s=i,u=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4)}}o(D);var Y=!1;function X(e,t,r,i){var s,o,c,u;z(e,(a<<1)+(i?1:0),3),o=t,c=r,u=!0,q(s=e),u&&(F(s,c),F(s,~c)),n.arraySet(s.pending_buf,s.window,o,c,s.pending),s.pending+=c}r._tr_init=function(e){Y||(function(){var e,t,r,n,i,s=new Array(f+1);for(n=r=0;n<c-1;n++)for(A[n]=r,e=0;e<1<<b[n];e++)_[r++]=n;for(_[r-1]=n,n=i=0;n<16;n++)for(D[n]=i,e=0;e<1<<C[n];e++)R[i++]=n;for(i>>=7;n<h;n++)for(D[n]=i<<7,e=0;e<1<<C[n]-7;e++)R[256+i++]=n;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,s[8]++;for(;e<=255;)T[2*e+1]=9,e++,s[9]++;for(;e<=279;)T[2*e+1]=7,e++,s[7]++;for(;e<=287;)T[2*e+1]=8,e++,s[8]++;for(U(T,l+1,s),e=0;e<h;e++)P[2*e+1]=5,P[2*e]=j(e,5);k=new N(T,b,u+1,l,f),x=new N(P,C,0,h,f),O=new N(new Array(0),I,0,d,m)}(),Y=!0),e.l_desc=new M(e.dyn_ltree,k),e.d_desc=new M(e.dyn_dtree,x),e.bl_desc=new M(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,V(e)},r._tr_stored_block=X,r._tr_flush_block=function(e,t,r,n){var o,a,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),c=function(e){var t;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?X(e,t,r,n):4===e.strategy||a===o?(z(e,2+(n?1:0),3),K(e,T,P)):(z(e,4+(n?1:0),3),function(e,t,r,n){var i;for(z(e,t-257,5),z(e,r-1,5),z(e,n-4,4),i=0;i<n;i++)z(e,e.bl_tree[2*E[i]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),K(e,e.dyn_ltree,e.dyn_dtree)),V(e),n&&q(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_[r]+u+1)]++,e.dyn_dtree[2*L(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){var t;z(e,2,3),B(e,g,T),16===(t=e).bi_valid?(F(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){if(!e.setImmediate){var r,n,i,s,o=1,a={},c=!1,u=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,r="[object process]"==={}.toString.call(e.process)?function(e){lb.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(d,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return a[o]=i,r(o),o++},l.clearImmediate=h}function h(e){delete a[e]}function d(e){if(c)setTimeout(d,0,e);else{var r=a[e];if(r){c=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{h(e),c=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof PS?PS:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);const z_=RS(F_.exports);var B_={exports:{}},j_={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};var U_=function(e){return e&&e.replace?e.replace(/([&"<>'])/g,(function(e,t){return j_[t]})):e},V_=wI.Stream;function q_(e,t,r){var n,i=function(e,t){return new Array(t||0).join(e||"")}(t,r=r||0),s=e;if("object"===typeof e&&((s=e[n=Object.keys(e)[0]])&&s._elem))return s._elem.name=n,s._elem.icount=r,s._elem.indent=t,s._elem.indents=i,s._elem.interrupt=s,s._elem;var o,a=[],c=[];function u(e){Object.keys(e).forEach((function(t){a.push(function(e,t){return e+'="'+U_(t)+'"'}(t,e[t]))}))}switch(typeof s){case"object":if(null===s)break;s._attr&&u(s._attr),s._cdata&&c.push(("<![CDATA["+s._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),s.forEach&&(o=!1,c.push(""),s.forEach((function(e){"object"==typeof e?"_attr"==Object.keys(e)[0]?u(e._attr):c.push(q_(e,t,r+1)):(c.pop(),o=!0,c.push(U_(e)))})),o||c.push(""));break;default:c.push(U_(s))}return{name:n,interrupt:!1,attributes:a,content:c,icount:r,indents:i,indent:t}}function W_(e,t,r){if("object"!=typeof t)return e(!1,t);var n=t.interrupt?1:t.content.length;function i(){for(;t.content.length;){var i=t.content.shift();if(void 0!==i){if(s(i))return;W_(e,i)}}e(!1,(n>1?t.indents:"")+(t.name?"</"+t.name+">":"")+(t.indent&&!r?"\n":"")),r&&r()}function s(t){return!!t.interrupt&&(t.interrupt.append=e,t.interrupt.end=i,t.interrupt=!1,e(!0),!0)}if(e(!1,t.indents+(t.name?"<"+t.name:"")+(t.attributes.length?" "+t.attributes.join(" "):"")+(n?t.name?">":"":t.name?"/>":"")+(t.indent&&n>1?"\n":"")),!n)return e(!1,t.indent?"\n":"");s(t)||i()}B_.exports=function(e,t){"object"!==typeof t&&(t={indent:t});var r=t.stream?new V_:null,n="",i=!1,s=t.indent?!0===t.indent?"    ":t.indent:"",o=!0;function a(e){o?lb.nextTick(e):e()}function c(e,t){if(void 0!==t&&(n+=t),e&&!i&&(r=r||new V_,i=!0),e&&i){var s=n;a((function(){r.emit("data",s)})),n=""}}function u(e,t){W_(c,q_(e,s,s?1:0),t)}function l(){if(r){var e=n;a((function(){r.emit("data",e),r.emit("end"),r.readable=!1,r.emit("close")}))}}return a((function(){o=!1})),t.declaration&&function(e){var t={version:"1.0",encoding:e.encoding||"UTF-8"};e.standalone&&(t.standalone=e.standalone),u({"?xml":{_attr:t}}),n=n.replace("/>","?>")}(t.declaration),e&&e.forEach?e.forEach((function(t,r){var n;r+1===e.length&&(n=l),u(t,n)})):u(e,l),r?(r.readable=!0,r):n},B_.exports.element=B_.exports.Element=function(){var e={_elem:q_(Array.prototype.slice.call(arguments)),push:function(e){if(!this.append)throw new Error("not assigned to a parent!");var t=this,r=this._elem.indent;W_(this.append,q_(e,r,this._elem.icount+(r?1:0)),(function(){t.append(!0)}))},close:function(e){void 0!==e&&this.push(e),this.end&&this.end()}};return e};const H_=RS(B_.exports),K_=(e,t)=>{const r=t.replace(/-/g,"");if(32!==r.length)throw new Error("Error: Cannot extract GUID from font filename: ".concat(t));const n=r.replace(/(..)/g,"$1 ").trim().split(" ").map((e=>parseInt(e,16)));n.reverse();const i=e.slice(0,32).map(((e,t)=>e^n[t%n.length]));return Buffer.concat([e.slice(0,0),i,e.slice(32)])};class G_{format(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stack:[]};const r=e.prepForXml(t);if(r)return r;throw Error("XMLComponent did not format correctly")}}class J_{replace(e,t,r){let n=e;return t.forEach(((e,t)=>{n=n.replace(new RegExp("{".concat(e.fileName,"}"),"g"),(r+t).toString())})),n}getMediaData(e,t){return t.Array.filter((t=>e.search("{".concat(t.fileName,"}"))>0))}}class Q_{replace(e,t){let r=e;for(const n of t)r=r.replace(new RegExp("{".concat(n.reference,"-").concat(n.instance,"}"),"g"),n.numId.toString());return r}}const Y_="  ",X_=e=>!0===e?Y_:!1===e?void 0:e;class Z_{static toString(e,t){return yS(this,null,(function*(){const r=this.compiler.compile(e,X_(t));return yield r.generateAsync({type:"string",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}))}static toBuffer(e,t){return yS(this,null,(function*(){const r=this.compiler.compile(e,X_(t));return yield r.generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}))}static toBase64String(e,t){return yS(this,null,(function*(){const r=this.compiler.compile(e,X_(t));return yield r.generateAsync({type:"base64",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}))}static toBlob(e,t){return yS(this,null,(function*(){const r=this.compiler.compile(e,X_(t));return yield r.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}))}static toStream(e,t){const r=new wI.Stream;return this.compiler.compile(e,X_(t)).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then((e=>{r.emit("data",e),r.emit("end")})),r}}gS(Z_,"compiler",new class{constructor(){gS(this,"formatter"),gS(this,"imageReplacer"),gS(this,"numberingReplacer"),this.formatter=new G_,this.imageReplacer=new J_,this.numberingReplacer=new Q_}compile(e,t){const r=new z_,n=this.xmlifyFile(e,t),i=new Map(Object.entries(n));for(const[,s]of i)if(Array.isArray(s))for(const e of s)r.file(e.path,e.data);else r.file(s.path,s.data);for(const{stream:s,fileName:o}of e.Media.Array)r.file("word/media/".concat(o),s);for(const{data:s,name:o,fontKey:a}of e.FontTable.fontOptionsWithKey){const[e]=o.split(".");r.file("word/fonts/".concat(e,".odttf"),K_(s,a))}return r}xmlifyFile(e,t){const r=e.Document.Relationships.RelationshipCount+1,n=H_(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),i=this.imageReplacer.getMediaData(n,e.Media);return{Relationships:{data:(()=>(i.forEach(((t,n)=>{e.Document.Relationships.createRelationship(r+n,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(t.fileName))})),H_(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})))(),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const t=this.imageReplacer.replace(n,i,r);return this.numberingReplacer.replace(t,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const r=H_(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(r,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:H_(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:H_(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:H_(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map(((r,n)=>{const i=H_(this.formatter.format(r.View,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(i,e.Media).forEach(((e,t)=>{r.Relationships.createRelationship(t,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(e.fileName))})),{data:H_(this.formatter.format(r.Relationships,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/header".concat(n+1,".xml.rels")}})),FooterRelationships:e.Footers.map(((r,n)=>{const i=H_(this.formatter.format(r.View,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(i,e.Media).forEach(((e,t)=>{r.Relationships.createRelationship(t,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image","media/".concat(e.fileName))})),{data:H_(this.formatter.format(r.Relationships,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footer".concat(n+1,".xml.rels")}})),Headers:e.Headers.map(((r,n)=>{const i=H_(this.formatter.format(r.View,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),s=this.imageReplacer.getMediaData(i,e.Media),o=this.imageReplacer.replace(i,s,0);return{data:this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering),path:"word/header".concat(n+1,".xml")}})),Footers:e.Footers.map(((r,n)=>{const i=H_(this.formatter.format(r.View,{viewWrapper:r,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),s=this.imageReplacer.getMediaData(i,e.Media),o=this.imageReplacer.replace(i,s,0);return{data:this.numberingReplacer.replace(o,e.Numbering.ConcreteNumbering),path:"word/footer".concat(n+1,".xml")}})),ContentTypes:{data:H_(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:H_(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:H_(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:H_(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:H_(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:H_(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:H_(this.formatter.format(e.Comments,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/comments.xml"},FontTable:{data:H_(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:(()=>H_(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}))(),path:"word/_rels/fontTable.xml.rels"}}}});new G_,new G_,new J_;var $_=r(8685),eA=r(579);const tA=/iPhone/i.test(navigator.userAgent);console.log(tA);const rA=ht({apiKey:"AIzaSyBNeonGTfBV2QhXxkufPueC-gQLCrcsB08",authDomain:"reviewtext-ad5c6.firebaseapp.com",databaseURL:"https://reviewtext-ad5c6.firebaseio.com",projectId:"reviewtext-ad5c6",storageBucket:"reviewtext-ad5c6.appspot.com",messagingSenderId:"892085575649",appId:"1:892085575649:web:b57abe0e1438f10dc6fca0"},{localCache:new Bm(nA),cacheSizeBytes:-1});var nA;const iA=function(e,t){const r="string"==typeof e?e:t||"(default)",n=ot("object"==typeof e?e:dt(),"firestore").getImmediate({identifier:r});if(!n._initialized){const e=(e=>{const t=D(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]})("firestore");e&&Ev(n,...e)}return n}(rA),sA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt();const t=ot(e,"auth");if(t.isInitialized())return t.getImmediate();const r=function(e,t){const r=ot(e,"auth");if(r.isInitialized()){const e=r.getImmediate();if(q(r.getOptions(),null!==t&&void 0!==t?t:{}))return e;Gm(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:eS,persistence:[uw,Ky,Jy]}),n=M("authTokenSyncURL");if(n&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>iS)return;const n=null===t||void 0===t?void 0:t.token;sS!==n&&(sS=n,await fetch(i,{method:n?"POST":"DELETE",headers:n?{Authorization:"Bearer ".concat(n)}:{}}))});!function(e,t,r){Y(e).beforeAuthStateChanged(t,r)}(r,t,(()=>t(r.currentUser))),function(e,t,r,n){Y(e).onIdTokenChanged(t,r,n)}(r,(e=>t(e)))}}var i;const s=D("auth");return s&&ly(r,"http://".concat(s)),r}(rA),oA=500;let aA="",cA="";const uA=function(){const[t,r]=(0,e.useState)(null),[n,i]=(0,e.useState)([]),[s,o]=(0,e.useState)([]),[a,c]=(0,e.useState)([]),[u,P]=(0,e.useState)(""),[R,_]=(0,e.useState)(null),[A,k]=(0,e.useState)(""),[x,O]=(0,e.useState)(""),[D,N]=(0,e.useState)(""),[M,L]=(0,e.useState)(!1),[F,z]=(0,e.useState)(!1),[B,j]=(0,e.useState)(!1),[U,V]=(0,e.useState)(!1),[q,W]=(0,e.useState)(!1),[H,K]=(0,e.useState)(!1),[G,J]=(0,e.useState)(!1),[Q,X]=(0,e.useState)(!1),[Z,$]=(0,e.useState)(!1),[ee,te]=(0,e.useState)(!1),[re,ne]=(0,e.useState)(!1),[ie,se]=(0,e.useState)(""),[oe,ae]=(0,e.useState)(""),[ce,ue]=(0,e.useState)(!1),[le,he]=(0,e.useState)(!1),[de,pe]=(0,e.useState)(""),[fe,ve]=(0,e.useState)(null),[me,ge]=(0,e.useState)(null),ye=new URLSearchParams(window.location.search).get("limit"),we=ye?parseInt(ye):oA,[Se,be]=(0,e.useState)(!1),[Ce,Ie]=(0,e.useState)(!1),[Ee,Te]=(0,e.useState)(!1),[Pe,Re]=(0,e.useState)(""),[_e,Ae]=(0,e.useState)(!1),[ke,xe]=(0,e.useState)(!1),[Oe,De]=(0,e.useState)(!1),Ne=(0,e.useRef)(null),[Me,Le]=(0,e.useState)("");(0,e.useEffect)((()=>{const e=sA.onAuthStateChanged((e=>{r(e)}));return()=>e()}),[]),(0,e.useEffect)((()=>{if(t){["bTGBBpeYPmPJonItYpUOCYhdIlr1","qDzUX26K0dgtSMlN9PtCj6Q9L5J3","yvsWRZwjTQecvGap3pGXWNGHoTp2","lpwCpZkPk2h1ZWrESgkyXPUXEPQ2"].includes(t.uid)&&he(!0);const e=_v(iA,"tasks"),r=new URLSearchParams(window.location.search).get("limit"),n=r?parseInt(r):499,s=new Date;cA=t.uid;const o=Lm(dm(e,fm("userId","==",t.uid),fm("status","==",!1),fm("dueDate","<",s),gm("dueDate","desc"),wm(n)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));aA+=t.map((e=>e.task)).join(" . "),ve(e.docs[e.docs.length-1]),499==t.length?K(!0):K(!1),i(t)}));return()=>o()}}),[t,B]),(0,e.useEffect)((()=>{if(M){z(!1),te(!0);const e=Lm(dm(_v(iA,"tasks"),fm("userId","==",t.uid),fm("status","==",!0),gm("createdDate","desc"),wm(we)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));aA+=t.map((e=>e.task)).join(" "),ve(e.docs[e.docs.length-1]),t.length==oA?J(!0):J(!1),o(t)}));return()=>e()}}),[M]),(0,e.useEffect)((()=>{if(F){L(!1),te(!0);const e=Lm(dm(_v(iA,"tasks"),fm("userId","==",t.uid),fm("dueDate",">",new Date),gm("dueDate","asc"),wm(we)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));aA+=t.map((e=>e.task)).join(" . "),t.length==oA?X(!0):X(!1),c(t)}));return()=>e()}}),[F]);const Fe=async(e,t)=>{let r=new Date;console.log("before callTTS"+"".concat(r.getFullYear(),"-").concat(r.getMonth()+1,"-").concat(r.getDate()," ").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds())),xe(!0),e=(e=(e=e.replace(/<[^>]*>?/gm,"")).replace(/&nbsp;/g," ")).replace(/[-*#_`~=^><]/g,""),console.log("Calling TTS API with message:",e),console.log("Calling TTS API with appUrl:",t);try{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,uid:cA})});if(!r.ok)throw new Error(["Network response was not ok: ".concat(r.statusText)])}catch(n){console.error("Error calling TTS API:",n),alert(["Error: ".concat(n.message)])}finally{let e=dm(_v(iA,"genai",cA,"MyGenAI"),gm("createdDateTime","desc"),wm(1));const t=(await Nm(e)).docs.map((e=>({id:e.id,...e.data()})));if(t.length>0){let e=t[0].answer;e=e.substring(e.indexOf("http")),e=e.replace(")",""),Le(e)}xe(!1),r=new Date,console.log("after callTTS"+"".concat(r.getFullYear(),"-").concat(r.getMonth()+1,"-").concat(r.getDate()," ").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()))}},ze=async(e,t,r,n)=>{const i=Av(iA,"tasks",e),s=new Date;let o=new Date(n);if("ad-hoc"!==r){switch(r){case"daily":o.setDate(o.getDate()+1);break;case"weekly":o.setDate(o.getDate()+7);break;case"monthly":o.setMonth(o.getMonth()+1);break;case"yearly":o.setFullYear(o.getFullYear()+1)}for(;"ad-hoc"!==r&&o<s;)switch(r){case"daily":o.setDate(o.getDate()+1);break;case"weekly":o.setDate(o.getDate()+7);break;case"monthly":o.setMonth(o.getMonth()+1);break;case"yearly":o.setFullYear(o.getFullYear()+1)}await Mm(i,{dueDate:o})}else await Mm(i,{status:!t})},Be=async(e,t)=>{window.confirm("Are you sure you want to delete this task: ".concat(t.substring(0,30),"...?"))&&await function(e){return Fm(Sv(e.firestore,Ov),[new cl(e._key,Qu.none())])}(Av(iA,"tasks",e))},je=e=>{_(e),k(e.task),O(e.recurrence);const t=6e4*(new Date).getTimezoneOffset(),r=new Date(e.dueDate.toDate()-t);N(r.toISOString().slice(0,16))},Ue=()=>{aA.length>2?Fe(aA,"https://tts.happyrock-2dd71657.centralus.azurecontainerapps.io/"):Fe(aA,"https://us-central1-reviewtext-ad5c6.cloudfunctions.net/function-18")},Ve=async e=>{try{const e=await function(e,t,r){return at(e.app)?Promise.reject(Ym(e)):By(Y(e),Ey.credential(t,r)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Uy(e),t}))}(sA,ie,oe);e.user.emailVerified||(await sA.signOut(),alert("Please verify your email before signing in."))}catch(t){"auth/wrong-password"===t.code?alert("Wrong password, please try again."):(alert("Error signing in, please try again."+t.message),console.error("Error signing in:",t))}},qe=async()=>{try{const e=await async function(e,t,r){if(at(e.app))return Promise.reject(Ym(e));const n=ry(e),i=uy(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xy),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Uy(e),t})),o=await Oy._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}(sA,ie,oe);await Vy(sA.currentUser);const t=e.user;alert("Verification email sent! Please check your inbox. Ater verification, please sign in."),t.emailVerified||await sA.signOut()}catch(e){alert("Error signing up, please try again."+e.message),console.error("Error signing up:",e)}},We=async()=>{if(ie)try{await async function(e,t,r){const n=ry(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};r&&jy(n,i,r),await uy(n,i,"getOobCode",gy)}(sA,ie),alert("Password reset email sent, please check your inbox.")}catch(e){console.error("Error sending password reset email",e)}else alert("Please enter your email address.")};return(0,eA.jsxs)("div",{children:[t&&(0,eA.jsx)("div",{className:"app",style:{marginBottom:"120px",fontSize:"24px"},children:re?(0,eA.jsxs)("div",{children:[(0,eA.jsx)("button",{className:"button",onClick:()=>{ne(!1)},children:(0,eA.jsx)(d,{})}),(0,eA.jsx)("p",{children:aA})]}):(0,eA.jsxs)("div",{children:[(0,eA.jsx)("button",{className:M?"button_selected":"button",onClick:()=>L(!M),children:(0,eA.jsx)(f,{})}),(0,eA.jsx)("button",{className:F?"button_selected":"button",onClick:()=>z(!F),children:(0,eA.jsx)(m,{})}),(0,eA.jsx)("button",{className:q?"button_selected":"button",onClick:()=>W(!q),children:(0,eA.jsx)(p,{})}),(0,eA.jsx)("button",{className:U?"button_selected":"button",onClick:()=>V(!U),children:(0,eA.jsx)(g,{})}),U&&(M||F)&&(0,eA.jsx)("button",{className:Z?"button_delete_selected":"button",onClick:()=>$(!Z),children:(0,eA.jsx)(T,{})}),(0,eA.jsx)("button",{className:ke?"button_selected":"button",onClick:async()=>{if(tA)return void Ue();const e=$_.SpeechConfig.fromSubscription("55c4f5f13d764a77a683b5c225c52705","eastus");e.speechSynthesisVoiceName="en-US-AvaNeural";const t=$_.AudioConfig.fromDefaultSpeakerOutput(),r=new $_.SpeechSynthesizer(e,t),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;const r=[];for(let n=0;n<e.length;n+=t)r.push(e.substring(n,n+t));return r}(aA);for(const s of n)try{const e=await r.speakTextAsync(s);if(e.reason===$_.ResultReason.SynthesizingAudioCompleted)console.log("Speech synthesized to speaker for text: [".concat(s,"]"));else if(e.reason===$_.ResultReason.Canceled){const t=$_.SpeechSynthesisCancellationDetails.fromResult(e);t.reason===$_.CancellationReason.Error&&console.error("Error details: ".concat(t.errorDetails))}}catch(i){console.error("Error synthesizing speech: ".concat(i))}},children:(0,eA.jsx)(S,{})}),!M&&!F&&re&&(0,eA.jsx)("button",{className:ke?"button_selected":"button",onClick:Ue,children:(0,eA.jsx)(h,{})}),(0,eA.jsx)("button",{className:Ee?"button_selected":"button",onClick:()=>{Te((e=>{const t=!e;return t?setTimeout((()=>{var e;null===(e=Ne.current)||void 0===e||e.focus()}),0):Re(""),t}))},children:(0,eA.jsx)(C,{})}),(0,eA.jsx)("button",{className:_e?"button_selected":"button",onClick:async()=>{be(!Se)},children:(0,eA.jsx)(l,{})}),(0,eA.jsx)("button",{className:"signoutbutton",onClick:()=>{sA.signOut()},children:(0,eA.jsx)(I,{})}),Ee&&(0,eA.jsxs)("div",{children:[" ",(0,eA.jsx)("input",{type:"text",className:"searchTask",placeholder:"Search tasks",value:Pe,onChange:e=>Re(e.target.value),ref:Ne}),(0,eA.jsx)("button",{className:"button",onClick:()=>{Re("")},children:(0,eA.jsx)(E,{})})]}),ke&&(0,eA.jsxs)("div",{children:[" ",(0,eA.jsx)("br",{})," ",(0,eA.jsx)("p",{children:"Generating audio..."})," "]}),Me&&(0,eA.jsxs)("div",{children:[(0,eA.jsx)("br",{}),(0,eA.jsx)("a",{href:Me,target:"_blank",rel:"noopener noreferrer",children:"Play/Download"})]}),!M&&!F&&(0,eA.jsxs)("div",{children:[(0,eA.jsxs)("form",{onSubmit:async e=>{if(De(!1),e.preventDefault(),""!==u.trim()){let e=u.trim();const r=u.trim().split(" ");let n=r.pop().toLowerCase();n=n.toLowerCase();const i=new Date;["daily","weekly","monthly","yearly"].includes(n)?e=r.join(" "):n="ad-hoc";let s=e.split(" ");const o=s.pop().toLowerCase(),a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];if(a.includes(o)){e=s.join(" "),n="weekly";const t=new Date;let r=a.indexOf(o)-t.getDay();r<0&&(r-=7),i.setDate(i.getDate()+r)}await function(e,t){const r=Sv(e.firestore,Ov),n=Av(e),i=Rm(e.converter,t);return Fm(r,[Kv(Hv(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,Qu.exists(!1))]).then((()=>n))}(_v(iA,"tasks"),{task:e,recurrence:n,status:!1,userId:t.uid,createdDate:new Date,dueDate:i,uemail:t.email}),P("")}j(!B)},children:[(0,eA.jsx)("input",{className:"addTask",type:"text",placeholder:"",value:u,onChange:e=>P(e.target.value)}),(0,eA.jsx)("button",{className:"addbutton",type:"submit",children:(0,eA.jsx)(b,{})})]}),(0,eA.jsx)("ul",{children:n.filter((e=>!e.status&&(!Se||"ad-hoc"===e.recurrence)&&(!Pe||e.task.toLowerCase().includes(Pe.toLowerCase())))).map((e=>(0,eA.jsx)("li",{"data-task-id":e.id,"data-status":e.status,children:(0,eA.jsxs)(eA.Fragment,{children:[(0,eA.jsx)("button",{className:"markcompletebutton",onClick:()=>ze(e.id,e.status,e.recurrence,e.dueDate.toDate().toLocaleDateString()),children:(0,eA.jsx)(v,{})}),(0,eA.jsxs)("span",{children:[e.task,e.recurrence&&"ad-hoc"!==e.recurrence&&(0,eA.jsxs)("span",{style:{color:"grey"},children:[" (",e.recurrence.charAt(0).toUpperCase()+e.recurrence.slice(1),")"]}),q&&(0,eA.jsxs)("span",{style:{color:"orange"},children:[" - ",e.dueDate.toDate().toLocaleDateString()," _ ",e.dueDate.toDate().toLocaleTimeString()]})]}),U&&(0,eA.jsx)("button",{className:"button",onClick:()=>je(e),children:(0,eA.jsx)(g,{style:{color:"Green",backgroundColor:"whitesmoke"}})})]})},e.id)))}),H&&(0,eA.jsx)("button",{className:"button",onClick:async()=>{try{const e=new URLSearchParams(window.location.search).get("limit"),r=e?parseInt(e):oA,n=_v(iA,"tasks"),s=new Date;if(fe){const e=dm(n,fm("userId","==",t.uid),fm("status","==",!1),fm("dueDate","<",s),gm("dueDate","desc"),bm(fe),wm(r)),o=await Nm(e),a=o.docs.map((e=>({id:e.id,...e.data()})));i((e=>[...e,...a])),ve(o.docs[o.docs.length-1]),a.length==oA?K(!0):K(!1)}else alert("No more data to fetch")}catch(e){console.error("Error fetching more data: ",e)}},children:"Show More"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),le&&(0,eA.jsxs)("div",{children:[(0,eA.jsx)("button",{className:"button",onClick:async()=>{if(Ce)j(!B);else{const e=_v(iA,"tasks"),t=new Date;console.log("Admin user");const r=dm(e,fm("userId","in",["qDzUX26K0dgtSMlN9PtCj6Q9L5J3"]),fm("status","==",!1),fm("dueDate","<",t),gm("dueDate","desc"),wm(500)),n=(await Nm(r)).docs.map((e=>({id:e.id,...e.data()})));i(n)}Ie(!Ce)},children:Ce?"Hide Navya Tasks":"Show Navya Tasks"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{})]}),le&&(0,eA.jsxs)("div",{children:[(0,eA.jsx)("button",{className:"button",onClick:async()=>{if(Ce)j(!B);else{const e=_v(iA,"tasks"),t=new Date;console.log("Admin user");const r=dm(e,fm("userId","==","yvsWRZwjTQecvGap3pGXWNGHoTp2"),fm("status","==",!1),fm("dueDate","<",t),gm("dueDate","desc"),wm(500)),n=(await Nm(r)).docs.map((e=>({id:e.id,...e.data()})));i(n)}Ie(!Ce)},children:Ce?"Hide Aarush Tasks":"Show Aarush Tasks"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{})]})]}),M&&(0,eA.jsxs)("div",{children:[(0,eA.jsx)("h2",{children:"Completed Tasks"}),(0,eA.jsx)("ul",{children:s.filter((e=>e.status&&(!Pe||e.task.toLowerCase().includes(Pe.toLowerCase())))).map((e=>(0,eA.jsxs)("li",{className:"completed",children:[(0,eA.jsx)("button",{onClick:()=>ze(e.id,e.status,e.recurrence,e.dueDate.toDate().toLocaleDateString()),children:(0,eA.jsx)(v,{})}),e.task," \xa0\xa0",e.recurrence&&"ad-hoc"!==e.recurrence&&(0,eA.jsxs)("span",{style:{color:"grey"},children:[" (",e.recurrence.charAt(0).toUpperCase()+e.recurrence.slice(1),")"]}),"\xa0",q&&(0,eA.jsxs)("span",{style:{color:"orange"},children:[" - ",e.dueDate.toDate().toLocaleDateString()," _ ",e.dueDate.toDate().toLocaleTimeString()]}),Z&&(0,eA.jsx)("button",{onClick:()=>Be(e.id,e.task),className:"button_delete_selected",children:(0,eA.jsx)(T,{})})]},e.id)))}),G&&(0,eA.jsx)("button",{className:"button",onClick:async()=>{try{const e=new URLSearchParams(window.location.search).get("limit"),r=e?parseInt(e):oA,n=_v(iA,"tasks");if(fe){const e=dm(n,fm("userId","==",t.uid),fm("status","==",!0),gm("createdDate","desc"),bm(fe),wm(r)),i=await Nm(e),s=i.docs.map((e=>({id:e.id,...e.data()})));ve(i.docs[i.docs.length-1]),s.length==oA?J(!0):J(!1),o((e=>[...e,...s]))}else alert("No more data to fetch")}catch(e){console.error("Error fetching more data: ",e)}},children:"Show More"}),(0,eA.jsx)("div",{style:{marginBottom:"110px"}})]}),F&&(0,eA.jsxs)("div",{children:[(0,eA.jsx)("h2",{children:"Future Tasks"}),(0,eA.jsx)("ul",{children:a.filter((e=>!Pe||e.task.toLowerCase().includes(Pe.toLowerCase()))).map((e=>(0,eA.jsxs)("li",{children:[e.task,"\xa0",q&&(0,eA.jsxs)("span",{style:{color:"orange"},children:[" - ",e.dueDate.toDate().toLocaleDateString()," _ ",e.dueDate.toDate().toLocaleTimeString()]}),"\xa0",e.recurrence&&"ad-hoc"!==e.recurrence&&(0,eA.jsxs)("span",{style:{color:"grey"},children:[" (",e.recurrence.charAt(0).toUpperCase()+e.recurrence.slice(1),")"]}),"\xa0",U&&(0,eA.jsx)("button",{className:"editbutton",onClick:()=>je(e),children:(0,eA.jsx)(g,{style:{color:"Green",backgroundColor:"whitesmoke"}})}),"\xa0",Z&&(0,eA.jsx)("button",{onClick:()=>Be(e.id,e.task),className:"button_delete_selected",children:(0,eA.jsx)(T,{})})]},e.id)))}),Q&&(0,eA.jsx)("button",{className:"button",onClick:async()=>{try{const e=new URLSearchParams(window.location.search).get("limit"),r=e?parseInt(e):oA,n=_v(iA,"tasks"),i=new Date;if(fe){const e=dm(n,fm("userId","==",t.uid),fm("dueDate",">",i),gm("dueDate","asc"),bm(fe),wm(r)),s=await Nm(e),o=s.docs.map((e=>({id:e.id,...e.data()})));ve(s.docs[s.docs.length-1]),o.length===oA?X(!0):X(!1),c((e=>[...e,...o]))}else alert("No more data to fetch")}catch(e){console.error("Error fetching more data: ",e)}},children:"Show More"}),(0,eA.jsx)("div",{style:{marginBottom:"110px"}})]}),R&&(0,eA.jsx)("div",{children:(0,eA.jsxs)("form",{className:"editForm",onSubmit:e=>{e.preventDefault(),(async()=>{const e=Av(iA,"tasks",R.id);await Mm(e,{task:A,recurrence:x,dueDate:new Date(D)}),_(null)})()},children:[(0,eA.jsx)("input",{style:{width:"80%"},type:"text",value:A,onChange:e=>k(e.target.value)}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsxs)("select",{value:x,onChange:e=>O(e.target.value),children:[(0,eA.jsx)("option",{value:"daily",children:"Daily"}),(0,eA.jsx)("option",{value:"weekly",children:"Weekly"}),(0,eA.jsx)("option",{value:"monthly",children:"Monthly"}),(0,eA.jsx)("option",{value:"yearly",children:"Yearly"}),(0,eA.jsx)("option",{value:"ad-hoc",children:"Ad-hoc"})]}),"\xa0\xa0",(0,eA.jsx)("input",{type:"datetime-local",value:D,onChange:e=>N(e.target.value)}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("button",{className:"button",type:"submit",children:"Save"}),"\xa0\xa0\xa0\xa0\xa0",(0,eA.jsx)("button",{className:"button",onClick:()=>_(null),children:"Cancel"})]})}),(0,eA.jsx)("button",{className:"button",onClick:async()=>{const e=new M_({sections:[{properties:{},children:[new QP({children:[new kT(aA)]})]}]});Z_.toBlob(e).then((e=>{const t=new Date,r="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),n="".concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds()),i="".concat(r,"__").concat(n);(0,aS.saveAs)(e,i+"_.docx")}))},children:(0,eA.jsx)(w,{})}),(0,eA.jsx)("button",{className:"button",onClick:async()=>{const e=new Blob([aA],{type:"text/plain;charset=utf-8"}),t=new Date,r="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),n="".concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds()),i="".concat(r,"__").concat(n);(0,aS.saveAs)(e,i+".txt")},children:(0,eA.jsx)(y,{})})]})}),!t&&(0,eA.jsxs)("div",{style:{fontSize:"22px",width:"100%",margin:"0 auto"},children:[(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("p",{children:"Sign In"}),(0,eA.jsx)("input",{className:"textinput",type:"email",placeholder:"Email",value:ie,onChange:e=>se(e.target.value),required:!0}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("input",{type:"password",className:"textinput",placeholder:"Password",value:oe,onChange:e=>ae(e.target.value),required:!0}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("button",{className:"signonpagebutton",onClick:()=>Ve(),children:"Sign In"}),"\xa0\xa0\xa0\xa0\xa0",(0,eA.jsx)("button",{className:"signuppagebutton",onClick:()=>qe(),children:"Sign Up"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("button",{onClick:()=>We(),children:"Forgot Password?"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{}),(0,eA.jsx)("button",{className:"signonpagebutton",onClick:()=>{const e=new _y;!async function(e,t,r){if(at(e.app))return Promise.reject(Jm(e,"operation-not-supported-in-this-environment"));const n=ry(e);Xm(e,t,Ty);const i=pw(n,r);new Sw(n,"signInViaPopup",t,i).executeNotNull()}(sA,e)},children:"Sign In with Google"}),(0,eA.jsx)("br",{}),(0,eA.jsx)("br",{})]})]})},lA=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then((t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:s,getTTFB:o}=t;r(e),n(e),i(e),s(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,eA.jsx)(e.StrictMode,{children:(0,eA.jsx)(uA,{})})),lA()})()})();
//# sourceMappingURL=main.59fe82f4.js.map